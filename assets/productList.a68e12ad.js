import{d as a}from"./dataService.50f846ff.js";import{_ as b,o as u,c as h,b as e,d,e as v,t as i,F as g,g as _,v as p}from"./index.a8eb44f7.js";const f={name:"adminOrderList",components:{},data(){return{month:new Date().getMonth()+1,year:new Date().getFullYear(),days:[],orgAmount:[],amount:[],currentAmount:[],amountDateKey:[],product:"tiramisu"}},methods:{setAmount(){var r;new Date(this.year,this.month,0).getDate();for(let t in this.amount)a.setAmount({year:this.year,month:this.month,date:t,amount:this.amount[t],currentAmount:this.amount[t]!=this.orgAmount[t]?this.amount[t]:this.currentAmount[t],product:this.product},(r=this.amountDateKey[t])!=null?r:"");alert("\u65B0\u589E\u6210\u529F")},logOut(){a.auth().signOut().then(()=>{a.auth().onAuthStateChanged(()=>{this.$router.push({name:"adminLogin"})})})},getDaysInMonth(r,t){const m=new Date(t,r,0).getDate();this.days=[],this.amount=[],this.orgAmount=[],this.amountDateKey=[],this.currentAmount=[],a.getAllAmounts().orderByChild("date").on("value",l=>{for(let n in l.val()){let o=l.val()[n];typeof o=="object"&&o!==null&&o.product===this.product&&(this.amount[o.date]=o.amount,this.orgAmount[o.date]=o.amount,this.currentAmount[o.date]=o.currentAmount,this.amountDateKey[o.date]=n)}});for(let l=1;l<=m;l++){const o=new Date(t,r-1,l).toLocaleDateString("zh-TW",{weekday:"short"});this.days.push({date:l,day:o})}},getNextMonth(r,t){return t===12?(this.year=r+1,this.month=1,this.getDaysInMonth(this.month,this.year),{year:r+1,month:1}):(this.month=t+1,this.getDaysInMonth(this.month,this.year),{year:r,month:t+1})},getPrevMonth(r,t){return t===1?(this.year=r-1,this.month=12,this.getDaysInMonth(this.month,this.year),{year:r-1,month:12}):(this.month=t-1,this.getDaysInMonth(this.month,this.year),{year:r,month:t-1})}},mounted(){a.checkAuth(),this.getDaysInMonth(this.month,this.year)}},A={class:"container mt-5"},D={class:"row d-flex justify-content-center"},k={class:"col-md-12"},M={class:"nav nav-tabs",id:"nav-tab",role:"tablist"},x=e("a",{class:"nav-link",href:"/admin/orderlist",type:"button",role:"tab","aria-selected":"false"},"\u8A02\u55AE\u8A2D\u5B9A",-1),C=e("a",{class:"nav-link active",href:"/admin/productList",type:"button",role:"tab","aria-selected":"true"},"\u5546\u54C1\u8A2D\u5B9A",-1),w=e("a",{class:"nav-link",href:"/admin/setting",role:"tab","aria-selected":"false"},"\u7CFB\u7D71\u8A2D\u5B9A",-1),I={class:"tab-content",id:"nav-tabContent"},L={class:"tab-pane fade show active mb-5",id:"nav-home",role:"tabpanel","aria-labelledby":"nav-home-tab"},O=e("option",{value:"tiramisu"},"\u63D0\u62C9\u7C73\u8607",-1),S=e("option",{value:"millefeuille"},"\u6CD5\u5F0F\u5343\u5C64\u86CB\u7CD5",-1),B=e("option",{value:"basque"},"\u5DF4\u65AF\u514B\u4E73\u916A\u86CB\u7CD5",-1),K=[O,S,B],N=e("br",null,null,-1),V={class:"h4"},F={width:"100%",class:"table mt-3"},P=e("thead",null,[e("tr",null,[e("th",null,"\u65E5\u671F"),e("th",null,"\u8A2D\u5B9A\u53EF\u8CE3\u91CF"),e("th",null,"\u76EE\u524D\u53EF\u8CE3\u91CF")])],-1),U=["onUpdate:modelValue"],j={class:"h4"};function T(r,t,m,l,n,o){return u(),h("div",A,[e("div",D,[e("div",k,[e("nav",null,[e("div",M,[x,C,w,e("button",{class:"nav-link",type:"button",role:"tab",onClick:t[0]||(t[0]=(...s)=>o.logOut&&o.logOut(...s))},"\u767B\u51FA")])]),e("div",I,[e("div",L,[d(e("select",{class:"form-control my-2",onChange:t[1]||(t[1]=s=>o.getDaysInMonth(n.month,n.year)),"onUpdate:modelValue":t[2]||(t[2]=s=>n.product=s)},K,544),[[v,n.product]]),N,e("span",V,i(n.year)+" / "+i(n.month),1),e("span",{class:"btn btn-light mx-2",role:"button",onClick:t[3]||(t[3]=s=>o.getPrevMonth(n.year,n.month))},"\u4E0A\u500B\u6708\u4EFD"),e("span",{class:"btn btn-light",role:"button",onClick:t[4]||(t[4]=s=>o.getNextMonth(n.year,n.month))},"\u4E0B\u500B\u6708\u4EFD"),e("button",{class:"btn btn-primary mx-3",onClick:t[5]||(t[5]=(...s)=>o.setAmount&&o.setAmount(...s))},"\u5132\u5B58"),e("table",F,[P,e("tbody",null,[(u(!0),h(g,null,_(n.days,(s,c)=>(u(),h("tr",{key:c},[e("td",null,i(n.year)+" / "+i(n.month)+" / "+i(s.date)+" "+i(s.day),1),e("td",null,[d(e("input",{type:"number",class:"form-control","onUpdate:modelValue":y=>n.amount[`${n.year}/${n.month}/${s.date}`]=y},null,8,U),[[p,n.amount[`${n.year}/${n.month}/${s.date}`]]])]),e("td",null,i(n.currentAmount[`${n.year}/${n.month}/${s.date}`]),1)]))),128))])]),e("span",j,i(n.year)+" / "+i(n.month),1),e("span",{class:"btn btn-light mx-2",role:"button",onClick:t[6]||(t[6]=s=>o.getPrevMonth(n.year,n.month))},"\u4E0A\u500B\u6708\u4EFD"),e("span",{class:"btn btn-light",role:"button",onClick:t[7]||(t[7]=s=>o.getNextMonth(n.year,n.month))},"\u4E0B\u500B\u6708\u4EFD"),e("button",{class:"btn btn-primary mx-3",onClick:t[8]||(t[8]=(...s)=>o.setAmount&&o.setAmount(...s))},"\u5132\u5B58")])])])])])}var E=b(f,[["render",T]]);export{E as default};
