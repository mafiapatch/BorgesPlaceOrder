import{d}from"./dataService.251bf696.js";import{_ as v,o as c,c as h,b as t,d as _,e as m,v as g,t as o,F as y,g as b}from"./index.ea000ab3.js";const f={name:"adminOrderList",components:{},data(){return{email:"",password:"",orderList:[],orderCount:0,searchKey:"pickup_date",searchValue:new Date().toLocaleString("en-US",{timeZone:"Asia/Taipei"}).slice(0,10)}},methods:{getOrderRealTime(){let l=d.getAllOrder(),e=this.searchKey,a=this.searchValue,r=this.date2str(new Date(a),"yyyy/M/d");this.searchValue=this.date2str(new Date(r),"yyyy-MM-dd"),l.orderByChild(e).equalTo(r).on("value",n=>{this.processData(n)})},date2str(l,e){var a={M:l.getMonth()+1,d:l.getDate(),h:l.getHours(),m:l.getMinutes(),s:l.getSeconds()};return e=e.replace(/(M+|d+|h+|m+|s+)/g,function(r){return((r.length>1?"0":"")+a[r.slice(-1)]).slice(-2)}),e.replace(/(y+)/g,function(r){return l.getFullYear().toString().slice(-r.length)})},processData(l){let e=[];for(let a in l.val())e.push({...l.val()[a],key:a});this.orderList=e.reverse(),this.orderCount=e.length},updateOrder(){for(let l in this.orderList)d.updateOrder({order_status:this.orderList[l].order_status},this.orderList[l].key);alert("\u4FEE\u6539\u6210\u529F")},logOut(){d.auth().signOut().then(()=>{d.auth().onAuthStateChanged(()=>{this.$router.push({name:"adminLogin"})})})}},mounted(){d.checkAuth(),this.getOrderRealTime()}},k={class:"container mt-5"},L={class:"row d-flex justify-content-center"},O={class:"col-md-12"},V={class:"nav nav-tabs",id:"nav-tab",role:"tablist"},M=t("a",{class:"nav-link active",href:"/admin/orderlist",role:"tab","aria-selected":"true"},"\u8A02\u55AE\u8A2D\u5B9A",-1),C=t("a",{class:"nav-link",href:"/admin/productList",role:"tab","aria-selected":"false"},"\u5546\u54C1\u8A2D\u5B9A",-1),D={class:"row mt-3"},S={class:"col-md-4"},w=t("option",{value:"created_date"},"\u8A02\u55AE\u5EFA\u7ACB\u6642\u9593",-1),T=t("option",{value:"pickup_date"},"\u53D6\u8CA8\u6642\u9593",-1),R=[w,T],U={class:"col-md-4"},A={class:"col-md-2"},B={class:"col-md-2 text-end"},F={class:"table mt-3"},K=t("thead",null,[t("tr",null,[t("th",null,"\u5546\u54C1\u540D\u7A31"),t("th",null,"\u5206\u5E97"),t("th",null,"\u53D6\u8CA8\u65E5\u671F"),t("th",null,"\u53D6\u8CA8\u6642\u9593"),t("th",null,"\u8A02\u55AE\u5EFA\u7ACB\u65E5\u671F"),t("th",null,"\u8A02\u8CFC\u91CF"),t("th",null,"\u8A02\u55AE\u91D1\u984D"),t("th",null,"\u8A02\u8CFC\u8005\u59D3\u540D"),t("th",null,"\u8A02\u8CFC\u8005\u624B\u6A5F"),t("th",null,"\u8A02\u55AE\u72C0\u614B")])],-1),x=["onUpdate:modelValue"],j=t("option",{value:"\u672A\u53D6\u8CA8"},"\u672A\u53D6\u8CA8",-1),q=t("option",{value:"\u5DF2\u53D6\u8CA8"},"\u5DF2\u53D6\u8CA8",-1),z=[j,q],E=t("hr",null,null,-1);function H(l,e,a,r,n,i){return c(),h("div",k,[t("div",L,[t("div",O,[t("nav",null,[t("div",V,[M,C,t("button",{class:"nav-link",id:"nav-profile-tab","data-bs-toggle":"tab",type:"button",role:"tab",onClick:e[0]||(e[0]=(...s)=>i.logOut&&i.logOut(...s))},"\u767B\u51FA")])]),t("div",D,[t("div",S,[_(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>n.searchKey=s),class:"form-control"},R,512),[[m,n.searchKey]])]),t("div",U,[_(t("input",{type:"date",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=s=>n.searchValue=s)},null,512),[[g,n.searchValue]])]),t("div",A,[t("button",{class:"btn btn-primary",onClick:e[3]||(e[3]=(...s)=>i.getOrderRealTime&&i.getOrderRealTime(...s))},"\u9001\u51FA")]),t("div",B," \u5171 "+o(n.orderCount)+" \u7B46\u8CC7\u6599 ",1)]),t("table",F,[K,t("tbody",null,[(c(!0),h(y,null,b(n.orderList,(s,u)=>(c(),h("tr",{key:u},[t("td",null,o(s.item_name),1),t("td",null,o(s.pickup_location),1),t("td",null,o(s.pickup_date),1),t("td",null,o(s.pickup_time),1),t("td",null,o(s.created_ts),1),t("td",null,o(s.count),1),t("td",null,o(s.order_price),1),t("td",null,o(s.order_name),1),t("td",null,o(s.order_mobile),1),t("td",null,[_(t("select",{"onUpdate:modelValue":p=>n.orderList[u].order_status=p,class:"form-control"},z,8,x),[[m,n.orderList[u].order_status]])])]))),128))])]),E,t("button",{class:"btn btn-secondary my-3",onClick:e[4]||(e[4]=(...s)=>i.updateOrder&&i.updateOrder(...s))},"\u5132\u5B58")])])])}var Z=v(f,[["render",H]]);export{Z as default};
