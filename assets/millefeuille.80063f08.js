import{d as k}from"./dataService.251bf696.js";import{n as F,F as N,C as O,S as j,P as U,N as B,_ as L}from"./package_01.35730e1a.js";import{_ as T,r as m,o as d,c,a as _,b as t,w as v,t as u,d as l,e as b,v as x,f as A,g as M,F as f,h as w,i as C,n as Y}from"./index.029200aa.js";import{_ as I,a as z}from"./product_02.38baa434.js";const q={name:"millefeuille",data(){return{formStatus:"",userIP:"",item_name_slug:"millefeuille",order:{item_name:"\u6CD5\u5F0F\u5343\u5C64\u86CB\u7CD5",count:1,pickup_date:"",pickup_time:"12:00",pickup_location:"\u660C\u5409\u5E97",order_mobile:"",order_name:"",order_status:"\u672A\u53D6\u8CA8",created_ts:"",created_date:"",ip:"",userAgent:""},amount:[],amountKey:[],month:new Date().getMonth()+1,year:new Date().getFullYear(),days:[],orderErrorMsg:[]}},components:{navbar:F,Footer:N,Carousel:O,Slide:j,Pagination:U,Navigation:B},methods:{getUserIP(){fetch("https://api.ipify.org?format=json").then(s=>s.json()).then(({ip:s})=>{this.userIP=s})},getDailyAmount(){this.amount=[],k.getAllAmounts().orderByChild("date").once("value",s=>{for(let e in s.val()){let r=s.val()[e];typeof r=="object"&&r!==null&&r.product===this.item_name_slug&&this.amount.push({...s.val()[e],key:e})}})},dateAmount(s,e,r){var i,o;return(o=(i=this.amount.find(n=>{if(n.date==`${s}/${e}/${r}`&&new Date(`${s}/${e}/${r} 23:59:59`)>=new Date)return n}))==null?void 0:i.currentAmount)!=null?o:0},dateAmountIndex(s,e,r){var i,o;return(o=(i=this.amount.find(n=>{if(n.date==`${s}/${e}/${r}`&&new Date(`${s}/${e}/${r} 23:59:59`)>=new Date)return n}))==null?void 0:i.key)!=null?o:""},chooseDate(s,e,r){this.dateAmount(s,e,r)>0&&(this.order.pickup_date=`${s}/${e}/${r}`,document.getElementById("datePickerClose").click())},saveOrder(){if(this.order.ip=this.userIP,this.order.userAgent=window.navigator.userAgent,!this.order.count||this.order.ip==""||this.order.userAgent==""||!this.checkOrder())return!1;let s=new Date;this.order.created_date=s.getFullYear()+"/"+(s.getMonth()+1)+"/"+s.getDate(),this.order.created_ts=s.getFullYear()+"/"+(s.getMonth()+1)+"/"+s.getDate()+" "+s.getHours()+":"+s.getMinutes()+":"+s.getSeconds(),k.createOrder(this.order).then(()=>{let e=this.order.pickup_date.split("/")[0],r=this.order.pickup_date.split("/")[1],i=this.order.pickup_date.split("/")[2];k.setAmount({currentAmount:this.dateAmount(e,r,i)-this.order.count},this.dateAmountIndex(e,r,i)),this.formStatus="\u65B0\u589E\u6210\u529F",this.resetOrder(),this.timeout=setTimeout(()=>{this.formStatus=""},1e4),this.getDailyAmount()}).catch(e=>{alert("\u65B0\u589E\u5931\u6557"),console.log(e)})},resetOrder(){this.order.count=1,this.order.pickup_date="",this.order.pickup_time="12:00",this.order.pickup_location="\u660C\u5409\u5E97",this.order.order_mobile="",this.order.order_name="",this.order.order_status="\u672A\u53D6\u8CA8",this.order.created_ts="",this.order.created_date=""},checkOrder(){return this.orderErrorMsg=[],this.order.order_name==""&&this.orderErrorMsg.push("\u8ACB\u8F38\u5165\u59D3\u540D"),this.order.order_mobile==""&&this.order.order_mobile.length!=10&&this.orderErrorMsg.push("\u8ACB\u8F38\u5165\u96FB\u8A71"),this.order.pickup_date==""&&this.orderErrorMsg.push("\u8ACB\u9078\u64C7\u53D6\u8CA8\u65E5\u671F"),this.order.pickup_time==""&&this.orderErrorMsg.push("\u8ACB\u9078\u64C7\u53D6\u8CA8\u6642\u9593"),this.order.pickup_location==""&&this.orderErrorMsg.push("\u8ACB\u9078\u64C7\u53D6\u8CA8\u5730\u9EDE"),!this.orderErrorMsg.length},getCookie(s){let r=`; ${document.cookie}`.split(`; ${s}=`);if(r.length===2)return r.pop().split(";").shift()},getDaysInMonth(s,e){const r=new Date(e,s,0).getDate();this.days=[];let i=[],o=["\u9031\u65E5","\u9031\u4E00","\u9031\u4E8C","\u9031\u4E09","\u9031\u56DB","\u9031\u4E94","\u9031\u516D"];for(let n=1;n<=r;n++){const h=new Date(e,s-1,n).toLocaleDateString("zh-TW",{weekday:"short"});if(!this.days.length&&!i.length&&h!="\u9031\u65E5")for(let g=0;g<o.indexOf(h);g++)i.push({date:"",day:""});i.push({date:n,day:h}),(h=="\u9031\u516D"||n==r)&&(this.days.push(i),i=[])}},getNextMonth(s,e){return e===12?(this.year=s+1,this.month=1,this.getDaysInMonth(this.month,this.year),{year:s+1,month:1}):(this.month=e+1,this.getDaysInMonth(this.month,this.year),{year:s,month:e+1})},getPrevMonth(s,e){return e===1?(this.year=s-1,this.month=12,this.getDaysInMonth(this.month,this.year),{year:s-1,month:12}):(this.month=e-1,this.getDaysInMonth(this.month,this.year),{year:s,month:e-1})}},mounted(){this.getUserIP(),this.getDailyAmount(),this.getDaysInMonth(this.month,this.year)}},H={class:"masthead bogres-bg-color text-center",id:"header_form"},K={class:"container text-black"},W={class:"row"},G={class:"col-md-8 text-center"},J=t("img",{src:z,class:"d-block w-100 rounded",alt:"..."},null,-1),Q=t("img",{src:I,class:"d-block w-100 rounded",alt:"..."},null,-1),R={class:"col-md-4 text-start"},X={class:"my-2"},Z={class:"h3"},$=t("span",{class:"badge bg-secondary"},"\u8477\u98DF",-1),tt=t("span",{class:"badge bg-danger"},"\u672C\u7522\u54C1\u542B\u9152",-1),et=C('<p class="fw-light">\u70BA\u4FDD\u6301\u98A8\u5473\u6700\u4F73\uFF0C\u8ACB\u65BC\u9694\u65E5\u5167\u4EAB\u7528\u5B8C\u7562</p><span class="badge rounded-pill bg-light text-dark mx-1">\u6CD5\u5F0F\u5343\u5C64\u9165</span><span class="badge rounded-pill bg-light text-dark mx-1">\u8C9D\u91CC\u65AF\u5976\u9152\u7518\u90A3\u8A31</span><span class="badge rounded-pill bg-light text-dark mx-1">\u5DE7\u514B\u529B\u6155\u65AF</span><span class="badge rounded-pill bg-light text-dark mx-1">\u5DE7\u514B\u529B\u9999\u7DF9</span><span class="badge rounded-pill bg-light text-dark mx-1">\u8C9D\u91CC\u65AF\u5976\u9152\u91AC</span><hr>',7),ot={class:"row"},st={class:"col-md-6 pt-1"},rt=t("label",{for:"order_name",class:"form-label"},"\u8A02\u8CFC\u8005\u59D3\u540D",-1),nt={class:"col-md-6 pt-1"},lt=t("label",{for:"order_mobile",class:"form-label"},"\u8A02\u8CFC\u8005\u624B\u6A5F",-1),at={class:"row mt-2"},it={class:"col-md-6 pt-1"},dt=t("label",{for:"order_count",class:"form-label"},"\u8A02\u8CFC\u6578\u91CF",-1),ct={class:"col-md-6 pt-1"},ut=t("label",{class:"form-label"},"\u81EA\u53D6\u65E5\u671F",-1),ht={type:"button",class:"btn btn-light","data-bs-toggle":"modal",id:"datepickerBtn","data-bs-target":"#datepickerModal"},pt={class:"row"},_t={class:"col-md-6 pt-1"},mt=t("label",{class:"form-label"},"\u81EA\u53D6\u6642\u6BB5",-1),bt=C('<option value="09:00">09:00</option><option value="09:30">09:30</option><option value="10:00">10:00</option><option value="10:30">10:30</option><option value="11:00">11:00</option><option value="11:30">11:30</option><option value="12:00">12:00</option><option value="12:30">12:30</option><option value="13:00">13:00</option><option value="13:30">13:30</option><option value="14:00">14:00</option><option value="14:30">14:30</option><option value="15:00">15:00</option><option value="15:30">15:30</option><option value="16:00">16:00</option><option value="16:30">16:30</option><option value="17:00">17:00</option><option value="17:30">17:30</option><option value="18:00">18:00</option><option value="18:30">18:30</option><option value="19:00">19:00</option>',21),gt=[bt],vt={class:"col-md-6 pt-1"},ft=t("label",{class:"form-label"},"\u81EA\u53D6\u5206\u5E97",-1),yt=t("option",{value:"\u660C\u5409\u5E97"},"\u660C\u5409\u5E97",-1),kt=t("option",{value:"\u660E\u6C34\u5E97"},"\u660E\u6C34\u5E97",-1),xt=[yt,kt],Mt={class:"col-md-6"},wt=t("label",{class:"form-label"},"\u3000",-1),Dt={key:0,class:"alert alert-success alert-dismissible fade show mt-2",role:"alert"},At=t("strong",null,"\u8A02\u55AE\u65B0\u589E\u6210\u529F",-1),Ct=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"},null,-1),It=[At,Ct],Et={key:1,class:"alert alert-danger alert-dismissible fade show mt-2",role:"alert"},St=t("strong",null,"\u8ACB\u6AA2\u67E5\u8868\u55AE!",-1),Pt=t("br",null,null,-1),Vt=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"},null,-1),Ft=t("section",{class:"page-section",id:"product_description"},[t("div",{class:"container"},[t("div",{class:"row d-flex justify-content-center py-5",id:"product_description_content"},[t("div",{class:"col-md-10"},[t("nav",null,[t("div",{class:"nav nav-tabs",id:"nav-tab",role:"tablist"},[t("button",{class:"nav-link active",id:"nav-home-tab","data-bs-toggle":"tab","data-bs-target":"#nav-home",type:"button",role:"tab","aria-controls":"nav-home","aria-selected":"true"},"\u5546\u54C1\u4ECB\u7D39"),t("button",{class:"nav-link",id:"nav-storage-tab","data-bs-toggle":"tab","data-bs-target":"#nav-storage",type:"button",role:"tab","aria-controls":"nav-contact","aria-selected":"false"},"\u4FDD\u5B58\u53CA\u5305\u88DD")])]),t("div",{class:"tab-content mt-3",id:"nav-tabContent"},[t("div",{class:"tab-pane fade show active",id:"nav-home",role:"tabpanel","aria-labelledby":"nav-home-tab"},[t("p",null,[l(" \u4F60\u5011\u77E5\u9053\u6CD5\u5F0F\u5343\u5C64\u86CB\u7CD5\u4EE5\u524D\u662F\u7D66\u8CB4\u65CF\u4EAB\u7528\u4E0B\u5348\u8336\u55CE"),t("br"),l(" \u9084\u6709\u53E6\u4E00\u500B\u540D\u7A31\u53EB\u5343\u5C64\u53EF\u9E97\u9905"),t("br"),l(" \u6CD5\u5F0F\u7684\u53EF\u9E97\u9905\u5C31\u662F\u9019\u6A23\u8EDF\u8EDF\u7684\u6C92\u932F"),t("br"),l(" \u4E00\u5C64\u4E00\u5C64\u593E\u8457\u5976\u6CB9\u8DDF\u5176\u4ED6\u9921\u6599"),t("br"),l(" \u5207\u9762\u7684\u5730\u65B9\u771F\u7684\u5F88\u6709\u85DD\u8853\u611F"),t("br"),l(" \u6C34\u679C\u8DDF\u5976\u6CB9\u56E0\u70BA\u6709\u9905\u76AE\u7684\u5340\u9694"),t("br"),l(" \u984F\u8272\u7E7D\u7D1B\uFF0C\u5BC6\u96C6\u537B\u53C8\u4E0D\u6CBE\u67D3\u5F7C\u6B64"),t("br"),l(" \u611F\u89BA\u90FD\u6709\u81EA\u5DF1\u7684\u623F\u9593\u53EF\u4EE5\u5F85\u8457"),t("br"),l(" \u6709\u4E00\u7A2E\u96D6\u7136\u662F\u4F4F\u4E00\u8D77\u4F46\u53C8\u7D66\u4E86\u5F7C\u6B64\u96B1\u79C1\u7684\u611F\u89BA"),t("br"),l(" \u7D44\u5408\u518D\u4E00\u8D77\u5403\u5C31\u662F\u9019\u9EBC\u6709\u5C64\u6B21\u53C8\u878D\u6D3D"),t("br")]),t("p",null,[l(" \u5976\u6CB9\u7684\u751C\u800C\u4E0D\u81A9"),t("br"),l(" \u9905\u76AE\u7684\u5C64\u6B21\u53E3\u611F"),t("br"),l(" \u4F86\u9EDE\u9999\u8549\u5947\u7570\u679C\u4E00\u8D77\u8DF3\u821E\u878D\u5408\u7684\u9178\u751C\u611F"),t("br"),l(" \u7136\u5F8C\u6574\u500B\u4E00\u53E3\u585E\u9032\u6211\u7684\u5634\u5DF4\u6EFF\u8DB3\u6211\u7684\u5473\u857E"),t("br"),l(" \u6C92\u932F!!\u9084\u6709\u6817\u5B50\u7684\u9999\u6C23"),t("br"),l(" \u662F\u6817\u5B50!!!\u5C45\u7136\u52A0\u4E86\u6817\u5B50~~\u592A\u597D\u5403\u62C9 ")]),t("div",{class:"row justify-content-center"},[t("div",{class:"col-10 mb-5"},[t("div",{class:"portfolio-item mx-auto","data-bs-toggle":"modal",role:"button","data-bs-target":"#productModal2"},[t("img",{class:"img-fluid",src:I,alt:"..."})])])])]),t("div",{class:"tab-pane fade",id:"nav-storage",role:"tabpanel","aria-labelledby":"nav-storage-tab"},[t("p",null,"\u5EFA\u8B70\u4FDD\u5B58\u671F\u9650\u70BA\u51B7\u51CD3\u661F\u671F\u6216\u51B7\u85CF3-5\u5929\uFF0C\u51B7\u51CD\u5F8C\u9000\u51B0\u7D041\u5C0F\u6642\uFF0C\u51B7\u85CF\u5F8C\u53D6\u51FA\u98DF\u7528\uFF0C\u98DF\u7528\u4E0D\u5B8C\u9700\u518D\u51B7\u85CF\u4FDD\u5B58\u3002"),t("div",{class:"row justify-content-center"},[t("div",{class:"col-10 mb-5"},[t("div",{class:"portfolio-item mx-auto"},[t("img",{class:"img-fluid",src:L,alt:"..."})])])])])])])])])],-1),Nt={class:"modal fade",id:"datepickerModal",tabindex:"-1","aria-labelledby":"datepickerModalLabel","aria-hidden":"true"},Ot={class:"modal-dialog modal-lg modal-fullscreen-lg-down"},jt={class:"modal-content"},Ut=t("div",{class:"modal-header"},[t("h5",{class:"modal-title",id:"datepickerModalLabel"},"\u8ACB\u9078\u64C7\u65E5\u671F"),t("button",{type:"button",class:"btn-close",id:"datePickerClose","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Bt={class:"modal-body"},Lt={class:"h4"},Tt={class:"table",width:"100%"},Yt=t("thead",null,[t("th",null,"\u9031\u65E5"),t("th",null,"\u9031\u4E00"),t("th",null,"\u9031\u4E8C"),t("th",null,"\u9031\u4E09"),t("th",null,"\u9031\u56DB"),t("th",null,"\u9031\u4E94"),t("th",null,"\u9031\u516D")],-1),zt=["role","onClick"],qt={key:0};function Ht(s,e,r,i,o,n){const D=m("navbar"),h=m("slide"),g=m("navigation"),E=m("pagination"),S=m("carousel"),P=m("Footer");return d(),c(f,null,[_(D),t("header",H,[t("div",K,[t("div",W,[t("div",G,[_(S,{"items-to-show":1},{addons:v(()=>[_(g),_(E)]),default:v(()=>[_(h,{key:"1"},{default:v(()=>[J]),_:1}),_(h,{key:"2"},{default:v(()=>[Q]),_:1})]),_:1})]),t("div",R,[t("div",X,[t("span",Z,u(o.order.item_name),1),l(),$,l(),tt]),et,t("div",ot,[t("div",st,[rt,b(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>o.order.order_name=a),id:"order_name",class:"form-control",type:"text",required:""},null,512),[[x,o.order.order_name]])]),t("div",nt,[lt,b(t("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>o.order.order_mobile=a),id:"order_mobile",class:"form-control",type:"text",required:""},null,512),[[x,o.order.order_mobile]])])]),t("div",at,[t("div",it,[dt,b(t("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>o.order.count=a),id:"order_count",class:"form-control",type:"number"},null,512),[[x,o.order.count]])]),t("div",ct,[ut,t("p",null,[t("button",ht,"\u9078\u64C7\u81EA\u53D6\u65E5\u671F "+u(o.order.pickup_date),1)])])]),t("div",pt,[t("div",_t,[mt,b(t("select",{"onUpdate:modelValue":e[3]||(e[3]=a=>o.order.pickup_time=a),class:"form-control",placeholder:"\u8ACB\u9078\u64C7\u81EA\u53D6\u6642\u6BB5"},gt,512),[[A,o.order.pickup_time]])]),t("div",vt,[ft,b(t("select",{"onUpdate:modelValue":e[4]||(e[4]=a=>o.order.pickup_location=a),class:"form-control",placeholder:"\u8ACB\u9078\u64C7\u81EA\u53D6\u5206\u5E97"},xt,512),[[A,o.order.pickup_location]])]),t("div",Mt,[wt,t("p",null,[t("button",{type:"button",class:"btn btn-secondary",onClick:e[5]||(e[5]=(...a)=>n.saveOrder&&n.saveOrder(...a))},"\u9001\u51FA")])])]),o.formStatus.length?(d(),c("div",Dt,It)):M("",!0),o.orderErrorMsg.length?(d(),c("div",Et,[St,Pt,(d(!0),c(f,null,w(o.orderErrorMsg,(a,y)=>(d(),c("span",{class:"mx-1",key:y},u(a),1))),128)),Vt])):M("",!0)])])])]),Ft,t("div",Nt,[t("div",Ot,[t("div",jt,[Ut,t("div",Bt,[t("span",Lt,u(o.year)+" / "+u(o.month),1),t("span",{class:"btn btn-light mx-2",role:"button",onClick:e[6]||(e[6]=a=>n.getPrevMonth(o.year,o.month))},"\u4E0A\u500B\u6708\u4EFD"),t("span",{class:"btn btn-light",role:"button",onClick:e[7]||(e[7]=a=>n.getNextMonth(o.year,o.month))},"\u4E0B\u500B\u6708\u4EFD"),t("table",Tt,[Yt,t("tbody",null,[(d(!0),c(f,null,w(o.days,(a,y)=>(d(),c("tr",{key:y},[(d(!0),c(f,null,w(a,(p,V)=>(d(),c("td",{width:"14%",key:V,role:n.dateAmount(o.year,o.month,p.date)>0?"button":"",onClick:Kt=>n.chooseDate(o.year,o.month,p.date)},[p.day.length?(d(),c("span",qt,[t("h5",null,u(o.month)+"/"+u(p.date),1),t("div",{class:Y(["text-white p-1",n.dateAmount(o.year,o.month,p.date)>0?"bg-success":"bg-warning"]),style:{"font-size":"12px"}},u(n.dateAmount(o.year,o.month,p.date)>0?`${n.dateAmount(o.year,o.month,p.date)} \u500B`:"\u7121\u6CD5\u8A02\u8CFC"),3)])):M("",!0)],8,zt))),128))]))),128))])])])])])]),_(P)],64)}var Rt=T(q,[["render",Ht]]);export{Rt as default};
