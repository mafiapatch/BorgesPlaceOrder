var hl=function(t,n){return hl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(i[a]=o[a])},hl(t,n)};function ae(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");hl(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}var zt=function(){return zt=Object.assign||function(n){for(var i,o=1,a=arguments.length;o<a;o++){i=arguments[o];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(n[l]=i[l])}return n},zt.apply(this,arguments)};function tv(t,n,i,o){function a(l){return l instanceof i?l:new i(function(h){h(l)})}return new(i||(i=Promise))(function(l,h){function p(g){try{m(o.next(g))}catch(_){h(_)}}function f(g){try{m(o.throw(g))}catch(_){h(_)}}function m(g){g.done?l(g.value):a(g.value).then(p,f)}m((o=o.apply(t,n||[])).next())})}function nv(t,n){var i={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},o,a,l,h;return h={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function p(m){return function(g){return f([m,g])}}function f(m){if(o)throw new TypeError("Generator is already executing.");for(;h&&(h=0,m[0]&&(i=0)),i;)try{if(o=1,a&&(l=m[0]&2?a.return:m[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,m[1])).done)return l;switch(a=0,l&&(m=[m[0]&2,l.value]),m[0]){case 0:case 1:l=m;break;case 4:return i.label++,{value:m[1],done:!1};case 5:i.label++,a=m[1],m=[0];continue;case 7:m=i.ops.pop(),i.trys.pop();continue;default:if(l=i.trys,!(l=l.length>0&&l[l.length-1])&&(m[0]===6||m[0]===2)){i=0;continue}if(m[0]===3&&(!l||m[1]>l[0]&&m[1]<l[3])){i.label=m[1];break}if(m[0]===6&&i.label<l[1]){i.label=l[1],l=m;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(m);break}l[2]&&i.ops.pop(),i.trys.pop();continue}m=n.call(t,i)}catch(g){m=[6,g],a=0}finally{o=l=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}}function Ue(t){var n=typeof Symbol=="function"&&Symbol.iterator,i=n&&t[n],o=0;if(i)return i.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ce(t,n){var i=typeof Symbol=="function"&&t[Symbol.iterator];if(!i)return t;var o=i.call(t),a,l=[],h;try{for(;(n===void 0||n-- >0)&&!(a=o.next()).done;)l.push(a.value)}catch(p){h={error:p}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(h)throw h.error}}return l}function Kt(t,n,i){if(i||arguments.length===2)for(var o=0,a=n.length,l;o<a;o++)(l||!(o in n))&&(l||(l=Array.prototype.slice.call(n,0,o)),l[o]=n[o]);return t.concat(l||Array.prototype.slice.call(n))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rv={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var A=function(t,n){if(!t)throw mr(n)},mr=function(t){return new Error("Firebase Database ("+rv.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var iv=function(t){for(var n=[],i=0,o=0;o<t.length;o++){var a=t.charCodeAt(o);a<128?n[i++]=a:a<2048?(n[i++]=a>>6|192,n[i++]=a&63|128):(a&64512)===55296&&o+1<t.length&&(t.charCodeAt(o+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++o)&1023),n[i++]=a>>18|240,n[i++]=a>>12&63|128,n[i++]=a>>6&63|128,n[i++]=a&63|128):(n[i++]=a>>12|224,n[i++]=a>>6&63|128,n[i++]=a&63|128)}return n},Qw=function(t){for(var n=[],i=0,o=0;i<t.length;){var a=t[i++];if(a<128)n[o++]=String.fromCharCode(a);else if(a>191&&a<224){var l=t[i++];n[o++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){var l=t[i++],h=t[i++],p=t[i++],f=((a&7)<<18|(l&63)<<12|(h&63)<<6|p&63)-65536;n[o++]=String.fromCharCode(55296+(f>>10)),n[o++]=String.fromCharCode(56320+(f&1023))}else{var l=t[i++],h=t[i++];n[o++]=String.fromCharCode((a&15)<<12|(l&63)<<6|h&63)}}return n.join("")},Dl={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray:function(t,n){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var i=n?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[],a=0;a<t.length;a+=3){var l=t[a],h=a+1<t.length,p=h?t[a+1]:0,f=a+2<t.length,m=f?t[a+2]:0,g=l>>2,_=(l&3)<<4|p>>4,w=(p&15)<<2|m>>6,E=m&63;f||(E=64,h||(w=64)),o.push(i[g],i[_],i[w],i[E])}return o.join("")},encodeString:function(t,n){return this.HAS_NATIVE_SUPPORT&&!n?btoa(t):this.encodeByteArray(iv(t),n)},decodeString:function(t,n){return this.HAS_NATIVE_SUPPORT&&!n?atob(t):Qw(this.decodeStringToByteArray(t,n))},decodeStringToByteArray:function(t,n){this.init_();for(var i=n?this.charToByteMapWebSafe_:this.charToByteMap_,o=[],a=0;a<t.length;){var l=i[t.charAt(a++)],h=a<t.length,p=h?i[t.charAt(a)]:0;++a;var f=a<t.length,m=f?i[t.charAt(a)]:64;++a;var g=a<t.length,_=g?i[t.charAt(a)]:64;if(++a,l==null||p==null||m==null||_==null)throw Error();var w=l<<2|p>>4;if(o.push(w),m!==64){var E=p<<4&240|m>>2;if(o.push(E),_!==64){var S=m<<6&192|_;o.push(S)}}}return o},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},ov=function(t){var n=iv(t);return Dl.encodeByteArray(n,!0)},hp=function(t){return ov(t).replace(/\./g,"")},fp=function(t){try{return Dl.decodeString(t,!0)}catch(n){console.error("base64Decode failed: ",n)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sv(t){return gi(void 0,t)}function gi(t,n){if(!(n instanceof Object))return n;switch(n.constructor){case Date:var i=n;return new Date(i.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return n}for(var o in n)!n.hasOwnProperty(o)||!Xw(o)||(t[o]=gi(t[o],n[o]));return t}function Xw(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De=function(){function t(){var n=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(i,o){n.resolve=i,n.reject=o})}return t.prototype.wrapCallback=function(n){var i=this;return function(o,a){o?i.reject(o):i.resolve(a),typeof n=="function"&&(i.promise.catch(function(){}),n.length===1?n(o):n(o,a))}},t}();/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $w(t,n){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var i={alg:"none",type:"JWT"},o=n||"demo-project",a=t.iat||0,l=t.sub||t.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var h=zt({iss:"https://securetoken.google.com/"+o,aud:o,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},t),p="";return[hp(JSON.stringify(i)),hp(JSON.stringify(h)),p].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jw(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function av(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Jw())}function Zw(){try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function eb(){return typeof self=="object"&&self.self===self}function tb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function uv(){return rv.NODE_ADMIN===!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nb="FirebaseError",rb=function(t){ae(n,t);function n(i,o,a){var l=t.call(this,o)||this;return l.code=i,l.customData=a,l.name=nb,Object.setPrototypeOf(l,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(l,xl.prototype.create),l}return n}(Error),xl=function(){function t(n,i,o){this.service=n,this.serviceName=i,this.errors=o}return t.prototype.create=function(n){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];var a=i[0]||{},l=this.service+"/"+n,h=this.errors[n],p=h?ib(h,a):"Error",f=this.serviceName+": "+p+" ("+l+").",m=new rb(l,f,a);return m},t}();function ib(t,n){return t.replace(ob,function(i,o){var a=n[o];return a!=null?String(a):"<"+o+"?>"})}var ob=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yi(t){return JSON.parse(t)}function me(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lv=function(t){var n={},i={},o={},a="";try{var l=t.split(".");n=yi(fp(l[0])||""),i=yi(fp(l[1])||""),a=l[2],o=i.d||{},delete i.d}catch{}return{header:n,claims:i,data:o,signature:a}},sb=function(t){var n=lv(t),i=n.claims;return!!i&&typeof i=="object"&&i.hasOwnProperty("iat")},ab=function(t){var n=lv(t).claims;return typeof n=="object"&&n.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ve(t,n){return Object.prototype.hasOwnProperty.call(t,n)}function kn(t,n){if(Object.prototype.hasOwnProperty.call(t,n))return t[n]}function fl(t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))return!1;return!0}function Wo(t,n,i){var o={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(o[a]=n.call(i,t[a],a,t));return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ub(t){for(var n=[],i=function(f,m){Array.isArray(m)?m.forEach(function(g){n.push(encodeURIComponent(f)+"="+encodeURIComponent(g))}):n.push(encodeURIComponent(f)+"="+encodeURIComponent(m))},o=0,a=Object.entries(t);o<a.length;o++){var l=a[o],h=l[0],p=l[1];i(h,p)}return n.length?"&"+n.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lb=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(var n=1;n<this.blockSize;++n)this.pad_[n]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(n,i){i||(i=0);var o=this.W_;if(typeof n=="string")for(var a=0;a<16;a++)o[a]=n.charCodeAt(i)<<24|n.charCodeAt(i+1)<<16|n.charCodeAt(i+2)<<8|n.charCodeAt(i+3),i+=4;else for(var a=0;a<16;a++)o[a]=n[i]<<24|n[i+1]<<16|n[i+2]<<8|n[i+3],i+=4;for(var a=16;a<80;a++){var l=o[a-3]^o[a-8]^o[a-14]^o[a-16];o[a]=(l<<1|l>>>31)&4294967295}for(var h=this.chain_[0],p=this.chain_[1],f=this.chain_[2],m=this.chain_[3],g=this.chain_[4],_,w,a=0;a<80;a++){a<40?a<20?(_=m^p&(f^m),w=1518500249):(_=p^f^m,w=1859775393):a<60?(_=p&f|m&(p|f),w=2400959708):(_=p^f^m,w=3395469782);var l=(h<<5|h>>>27)+_+g+w+o[a]&4294967295;g=m,m=f,f=(p<<30|p>>>2)&4294967295,p=h,h=l}this.chain_[0]=this.chain_[0]+h&4294967295,this.chain_[1]=this.chain_[1]+p&4294967295,this.chain_[2]=this.chain_[2]+f&4294967295,this.chain_[3]=this.chain_[3]+m&4294967295,this.chain_[4]=this.chain_[4]+g&4294967295},t.prototype.update=function(n,i){if(n!=null){i===void 0&&(i=n.length);for(var o=i-this.blockSize,a=0,l=this.buf_,h=this.inbuf_;a<i;){if(h===0)for(;a<=o;)this.compress_(n,a),a+=this.blockSize;if(typeof n=="string"){for(;a<i;)if(l[h]=n.charCodeAt(a),++h,++a,h===this.blockSize){this.compress_(l),h=0;break}}else for(;a<i;)if(l[h]=n[a],++h,++a,h===this.blockSize){this.compress_(l),h=0;break}}this.inbuf_=h,this.total_+=i}},t.prototype.digest=function(){var n=[],i=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var o=this.blockSize-1;o>=56;o--)this.buf_[o]=i&255,i/=256;this.compress_(this.buf_);for(var a=0,o=0;o<5;o++)for(var l=24;l>=0;l-=8)n[a]=this.chain_[o]>>l&255,++a;return n},t}();function cb(t,n){var i=new hb(t,n);return i.subscribe.bind(i)}var hb=function(){function t(n,i){var o=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=i,this.task.then(function(){n(o)}).catch(function(a){o.error(a)})}return t.prototype.next=function(n){this.forEachObserver(function(i){i.next(n)})},t.prototype.error=function(n){this.forEachObserver(function(i){i.error(n)}),this.close(n)},t.prototype.complete=function(){this.forEachObserver(function(n){n.complete()}),this.close()},t.prototype.subscribe=function(n,i,o){var a=this,l;if(n===void 0&&i===void 0&&o===void 0)throw new Error("Missing Observer.");fb(n,["next","error","complete"])?l=n:l={next:n,error:i,complete:o},l.next===void 0&&(l.next=rl),l.error===void 0&&(l.error=rl),l.complete===void 0&&(l.complete=rl);var h=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{a.finalError?l.error(a.finalError):l.complete()}catch{}}),this.observers.push(l),h},t.prototype.unsubscribeOne=function(n){this.observers===void 0||this.observers[n]===void 0||(delete this.observers[n],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))},t.prototype.forEachObserver=function(n){if(!this.finalized)for(var i=0;i<this.observers.length;i++)this.sendOne(i,n)},t.prototype.sendOne=function(n,i){var o=this;this.task.then(function(){if(o.observers!==void 0&&o.observers[n]!==void 0)try{i(o.observers[n])}catch(a){typeof console!="undefined"&&console.error&&console.error(a)}})},t.prototype.close=function(n){var i=this;this.finalized||(this.finalized=!0,n!==void 0&&(this.finalError=n),this.task.then(function(){i.observers=void 0,i.onNoObservers=void 0}))},t}();function fb(t,n){if(typeof t!="object"||t===null)return!1;for(var i=0,o=n;i<o.length;i++){var a=o[i];if(a in t&&typeof t[a]=="function")return!0}return!1}function rl(){}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var L=function(t,n,i,o){var a;if(o<n?a="at least "+n:o>i&&(a=i===0?"none":"no more than "+i),a){var l=t+" failed: Was called with "+o+(o===1?" argument.":" arguments.")+" Expects "+a+".";throw new Error(l)}};function xe(t,n){return t+" failed: "+n+" argument "}function _e(t,n,i,o){if(!(o&&!i)&&typeof i!="function")throw new Error(xe(t,n)+"must be a valid function.")}function dp(t,n,i,o){if(!(o&&!i)&&(typeof i!="object"||i===null))throw new Error(xe(t,n)+"must be a valid context object.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var db=function(t){for(var n=[],i=0,o=0;o<t.length;o++){var a=t.charCodeAt(o);if(a>=55296&&a<=56319){var l=a-55296;o++,A(o<t.length,"Surrogate pair missing trail surrogate.");var h=t.charCodeAt(o)-56320;a=65536+(l<<10)+h}a<128?n[i++]=a:a<2048?(n[i++]=a>>6|192,n[i++]=a&63|128):a<65536?(n[i++]=a>>12|224,n[i++]=a>>6&63|128,n[i++]=a&63|128):(n[i++]=a>>18|240,n[i++]=a>>12&63|128,n[i++]=a>>6&63|128,n[i++]=a&63|128)}return n},ns=function(t){for(var n=0,i=0;i<t.length;i++){var o=t.charCodeAt(i);o<128?n++:o<2048?n+=2:o>=55296&&o<=56319?(n+=4,i++):n+=3}return n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Be(t){return t&&t._delegate?t._delegate:t}var Ti=function(){function t(n,i,o){this.name=n,this.instanceFactory=i,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(n){return this.instantiationMode=n,this},t.prototype.setMultipleInstances=function(n){return this.multipleInstances=n,this},t.prototype.setServiceProps=function(n){return this.serviceProps=n,this},t.prototype.setInstanceCreatedCallback=function(n){return this.onInstanceCreated=n,this},t}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var En="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cv=function(){function t(n,i){this.name=n,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(n){var i=this.normalizeInstanceIdentifier(n);if(!this.instancesDeferred.has(i)){var o=new De;if(this.instancesDeferred.set(i,o),this.isInitialized(i)||this.shouldAutoInitialize())try{var a=this.getOrInitializeService({instanceIdentifier:i});a&&o.resolve(a)}catch{}}return this.instancesDeferred.get(i).promise},t.prototype.getImmediate=function(n){var i,o=this.normalizeInstanceIdentifier(n==null?void 0:n.identifier),a=(i=n==null?void 0:n.optional)!==null&&i!==void 0?i:!1;if(this.isInitialized(o)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:o})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error("Service "+this.name+" is not available")}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(n){var i,o;if(n.name!==this.name)throw Error("Mismatching Component "+n.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=n,!!this.shouldAutoInitialize()){if(vb(n))try{this.getOrInitializeService({instanceIdentifier:En})}catch{}try{for(var a=Ue(this.instancesDeferred.entries()),l=a.next();!l.done;l=a.next()){var h=Ce(l.value,2),p=h[0],f=h[1],m=this.normalizeInstanceIdentifier(p);try{var g=this.getOrInitializeService({instanceIdentifier:m});f.resolve(g)}catch{}}}catch(_){i={error:_}}finally{try{l&&!l.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}}},t.prototype.clearInstance=function(n){n===void 0&&(n=En),this.instancesDeferred.delete(n),this.instancesOptions.delete(n),this.instances.delete(n)},t.prototype.delete=function(){return tv(this,void 0,void 0,function(){var n;return nv(this,function(i){switch(i.label){case 0:return n=Array.from(this.instances.values()),[4,Promise.all(Kt(Kt([],Ce(n.filter(function(o){return"INTERNAL"in o}).map(function(o){return o.INTERNAL.delete()}))),Ce(n.filter(function(o){return"_delete"in o}).map(function(o){return o._delete()}))))];case 1:return i.sent(),[2]}})})},t.prototype.isComponentSet=function(){return this.component!=null},t.prototype.isInitialized=function(n){return n===void 0&&(n=En),this.instances.has(n)},t.prototype.getOptions=function(n){return n===void 0&&(n=En),this.instancesOptions.get(n)||{}},t.prototype.initialize=function(n){var i,o;n===void 0&&(n={});var a=n.options,l=a===void 0?{}:a,h=this.normalizeInstanceIdentifier(n.instanceIdentifier);if(this.isInitialized(h))throw Error(this.name+"("+h+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var p=this.getOrInitializeService({instanceIdentifier:h,options:l});try{for(var f=Ue(this.instancesDeferred.entries()),m=f.next();!m.done;m=f.next()){var g=Ce(m.value,2),_=g[0],w=g[1],E=this.normalizeInstanceIdentifier(_);h===E&&w.resolve(p)}}catch(S){i={error:S}}finally{try{m&&!m.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}return p},t.prototype.onInit=function(n,i){var o,a=this.normalizeInstanceIdentifier(i),l=(o=this.onInitCallbacks.get(a))!==null&&o!==void 0?o:new Set;l.add(n),this.onInitCallbacks.set(a,l);var h=this.instances.get(a);return h&&n(h,a),function(){l.delete(n)}},t.prototype.invokeOnInitCallbacks=function(n,i){var o,a,l=this.onInitCallbacks.get(i);if(!!l)try{for(var h=Ue(l),p=h.next();!p.done;p=h.next()){var f=p.value;try{f(n,i)}catch{}}}catch(m){o={error:m}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(o)throw o.error}}},t.prototype.getOrInitializeService=function(n){var i=n.instanceIdentifier,o=n.options,a=o===void 0?{}:o,l=this.instances.get(i);if(!l&&this.component&&(l=this.component.instanceFactory(this.container,{instanceIdentifier:pb(i),options:a}),this.instances.set(i,l),this.instancesOptions.set(i,a),this.invokeOnInitCallbacks(l,i),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,i,l)}catch{}return l||null},t.prototype.normalizeInstanceIdentifier=function(n){return n===void 0&&(n=En),this.component?this.component.multipleInstances?n:En:n},t.prototype.shouldAutoInitialize=function(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"},t}();function pb(t){return t===En?void 0:t}function vb(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hv=function(){function t(n){this.name=n,this.providers=new Map}return t.prototype.addComponent=function(n){var i=this.getProvider(n.name);if(i.isComponentSet())throw new Error("Component "+n.name+" has already been registered with "+this.name);i.setComponent(n)},t.prototype.addOrOverwriteComponent=function(n){var i=this.getProvider(n.name);i.isComponentSet()&&this.providers.delete(n.name),this.addComponent(n)},t.prototype.getProvider=function(n){if(this.providers.has(n))return this.providers.get(n);var i=new cv(n,this);return this.providers.set(n,i),i},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function ot(){for(var t=0,n=0,i=arguments.length;n<i;n++)t+=arguments[n].length;for(var o=Array(t),a=0,n=0;n<i;n++)for(var l=arguments[n],h=0,p=l.length;h<p;h++,a++)o[a]=l[h];return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bn,Ll=[],$;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})($||($={}));var fv={debug:$.DEBUG,verbose:$.VERBOSE,info:$.INFO,warn:$.WARN,error:$.ERROR,silent:$.SILENT},mb=$.INFO,gb=(bn={},bn[$.DEBUG]="log",bn[$.VERBOSE]="log",bn[$.INFO]="info",bn[$.WARN]="warn",bn[$.ERROR]="error",bn),yb=function(t,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];if(!(n<t.logLevel)){var a=new Date().toISOString(),l=gb[n];if(l)console[l].apply(console,ot(["["+a+"]  "+t.name+":"],i));else throw new Error("Attempted to log a message with an invalid logType (value: "+n+")")}},dv=function(){function t(n){this.name=n,this._logLevel=mb,this._logHandler=yb,this._userLogHandler=null,Ll.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(n){if(!(n in $))throw new TypeError('Invalid value "'+n+'" assigned to `logLevel`');this._logLevel=n},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(n){this._logLevel=typeof n=="string"?fv[n]:n},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(n){if(typeof n!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(n){this._userLogHandler=n},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];this._userLogHandler&&this._userLogHandler.apply(this,ot([this,$.DEBUG],n)),this._logHandler.apply(this,ot([this,$.DEBUG],n))},t.prototype.log=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];this._userLogHandler&&this._userLogHandler.apply(this,ot([this,$.VERBOSE],n)),this._logHandler.apply(this,ot([this,$.VERBOSE],n))},t.prototype.info=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];this._userLogHandler&&this._userLogHandler.apply(this,ot([this,$.INFO],n)),this._logHandler.apply(this,ot([this,$.INFO],n))},t.prototype.warn=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];this._userLogHandler&&this._userLogHandler.apply(this,ot([this,$.WARN],n)),this._logHandler.apply(this,ot([this,$.WARN],n))},t.prototype.error=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];this._userLogHandler&&this._userLogHandler.apply(this,ot([this,$.ERROR],n)),this._logHandler.apply(this,ot([this,$.ERROR],n))},t}();function _b(t){Ll.forEach(function(n){n.setLogLevel(t)})}function wb(t,n){for(var i=function(h){var p=null;n&&n.level&&(p=fv[n.level]),t===null?h.userLogHandler=null:h.userLogHandler=function(f,m){for(var g=[],_=2;_<arguments.length;_++)g[_-2]=arguments[_];var w=g.map(function(E){if(E==null)return null;if(typeof E=="string")return E;if(typeof E=="number"||typeof E=="boolean")return E.toString();if(E instanceof Error)return E.message;try{return JSON.stringify(E)}catch{return null}}).filter(function(E){return E}).join(" ");m>=(p!=null?p:f.logLevel)&&t({level:$[m].toLowerCase(),message:w,args:g,type:f.name})}},o=0,a=Ll;o<a.length;o++){var l=a[o];i(l)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bt,bb=(Bt={},Bt["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",Bt["bad-app-name"]="Illegal App name: '{$appName}",Bt["duplicate-app"]="Firebase App named '{$appName}' already exists",Bt["app-deleted"]="Firebase App named '{$appName}' already deleted",Bt["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",Bt["invalid-log-argument"]="First argument to `onLog` must be null or a function.",Bt),ur=new xl("app","Firebase",bb),pv="@firebase/app",Eb="0.6.30",Ib="@firebase/analytics",Tb="@firebase/app-check",Sb="@firebase/auth",Cb="@firebase/database",Ab="@firebase/functions",Nb="@firebase/installations",kb="@firebase/messaging",Rb="@firebase/performance",Ob="@firebase/remote-config",Pb="@firebase/storage",Db="@firebase/firestore",xb="firebase-wrapper";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ie,Bo="[DEFAULT]",Lb=(Ie={},Ie[pv]="fire-core",Ie[Ib]="fire-analytics",Ie[Tb]="fire-app-check",Ie[Sb]="fire-auth",Ie[Cb]="fire-rtdb",Ie[Ab]="fire-fn",Ie[Nb]="fire-iid",Ie[kb]="fire-fcm",Ie[Rb]="fire-perf",Ie[Ob]="fire-rc",Ie[Pb]="fire-gcs",Ie[Db]="fire-fst",Ie["fire-js"]="fire-js",Ie[xb]="fire-js-all",Ie);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cr=new dv("@firebase/app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vo=function(){function t(n,i,o){var a=this;this.firebase_=o,this.isDeleted_=!1,this.name_=i.name,this.automaticDataCollectionEnabled_=i.automaticDataCollectionEnabled||!1,this.options_=sv(n),this.container=new hv(i.name),this._addComponent(new Ti("app",function(){return a},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(l){return a._addComponent(l)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(n){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var n=this;return new Promise(function(i){n.checkDestroyed_(),i()}).then(function(){return n.firebase_.INTERNAL.removeApp(n.name_),Promise.all(n.container.getProviders().map(function(i){return i.delete()}))}).then(function(){n.isDeleted_=!0})},t.prototype._getService=function(n,i){var o;i===void 0&&(i=Bo),this.checkDestroyed_();var a=this.container.getProvider(n);return!a.isInitialized()&&((o=a.getComponent())===null||o===void 0?void 0:o.instantiationMode)==="EXPLICIT"&&a.initialize(),a.getImmediate({identifier:i})},t.prototype._removeServiceInstance=function(n,i){i===void 0&&(i=Bo),this.container.getProvider(n).clearInstance(i)},t.prototype._addComponent=function(n){try{this.container.addComponent(n)}catch(i){cr.debug("Component "+n.name+" failed to register with FirebaseApp "+this.name,i)}},t.prototype._addOrOverwriteComponent=function(n){this.container.addOrOverwriteComponent(n)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw ur.create("app-deleted",{appName:this.name_})},t}();Vo.prototype.name&&Vo.prototype.options||Vo.prototype.delete||console.log("dc");var Mb="8.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fb(t){var n={},i=new Map,o={__esModule:!0,initializeApp:h,app:l,registerVersion:m,setLogLevel:_b,onLog:g,apps:null,SDK_VERSION:Mb,INTERNAL:{registerComponent:f,removeApp:a,components:i,useAsService:_}};o.default=o,Object.defineProperty(o,"apps",{get:p});function a(w){delete n[w]}function l(w){if(w=w||Bo,!Ve(n,w))throw ur.create("no-app",{appName:w});return n[w]}l.App=t;function h(w,E){if(E===void 0&&(E={}),typeof E!="object"||E===null){var S=E;E={name:S}}var N=E;N.name===void 0&&(N.name=Bo);var C=N.name;if(typeof C!="string"||!C)throw ur.create("bad-app-name",{appName:String(C)});if(Ve(n,C))throw ur.create("duplicate-app",{appName:C});var P=new t(w,N,o);return n[C]=P,P}function p(){return Object.keys(n).map(function(w){return n[w]})}function f(w){var E=w.name;if(i.has(E))return cr.debug("There were multiple attempts to register component "+E+"."),w.type==="PUBLIC"?o[E]:null;if(i.set(E,w),w.type==="PUBLIC"){var S=function(q){if(q===void 0&&(q=l()),typeof q[E]!="function")throw ur.create("invalid-app-argument",{appName:E});return q[E]()};w.serviceProps!==void 0&&gi(S,w.serviceProps),o[E]=S,t.prototype[E]=function(){for(var q=[],ue=0;ue<arguments.length;ue++)q[ue]=arguments[ue];var Ot=this._getService.bind(this,E);return Ot.apply(this,w.multipleInstances?q:[])}}for(var N=0,C=Object.keys(n);N<C.length;N++){var P=C[N];n[P]._addComponent(w)}return w.type==="PUBLIC"?o[E]:null}function m(w,E,S){var N,C=(N=Lb[w])!==null&&N!==void 0?N:w;S&&(C+="-"+S);var P=C.match(/\s|\//),q=E.match(/\s|\//);if(P||q){var ue=['Unable to register library "'+C+'" with version "'+E+'":'];P&&ue.push('library name "'+C+'" contains illegal characters (whitespace or "/")'),P&&q&&ue.push("and"),q&&ue.push('version name "'+E+'" contains illegal characters (whitespace or "/")'),cr.warn(ue.join(" "));return}f(new Ti(C+"-version",function(){return{library:C,version:E}},"VERSION"))}function g(w,E){if(w!==null&&typeof w!="function")throw ur.create("invalid-log-argument");wb(w,E)}function _(w,E){if(E==="serverAuth")return null;var S=E;return S}return o}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vv(){var t=Fb(Vo);t.INTERNAL=zt(zt({},t.INTERNAL),{createFirebaseNamespace:vv,extendNamespace:n,createSubscribe:cb,ErrorFactory:xl,deepExtend:gi});function n(i){gi(t,i)}return t}var Ml=vv();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jb=function(){function t(n){this.container=n}return t.prototype.getPlatformInfoString=function(){var n=this.container.getProviders();return n.map(function(i){if(Ub(i)){var o=i.getImmediate();return o.library+"/"+o.version}else return null}).filter(function(i){return i}).join(" ")},t}();function Ub(t){var n=t.getComponent();return(n==null?void 0:n.type)==="VERSION"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(t,n){t.INTERNAL.registerComponent(new Ti("platform-logger",function(i){return new jb(i)},"PRIVATE")),t.registerVersion(pv,Eb,n),t.registerVersion("fire-js","")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(eb()&&self.firebase!==void 0){cr.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);var pp=self.firebase.SDK_VERSION;pp&&pp.indexOf("LITE")>=0&&cr.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}var Wb=Ml.initializeApp;Ml.initializeApp=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Zw()&&cr.warn(`
      Warning: This is a browser-targeted Firebase bundle but it appears it is being
      run in a Node environment.  If running in a Node environment, make sure you
      are using the bundle specified by the "main" field in package.json.
      
      If you are using Webpack, you can specify "main" as the first item in
      "resolve.mainFields":
      https://webpack.js.org/configuration/resolve/#resolvemainfields
      
      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"
      as the first item in "mainFields", e.g. ['main', 'module'].
      https://github.com/rollup/@rollup/plugin-node-resolve
      `),Wb.apply(void 0,t)};var x=Ml;Vb(x);var Bb="firebase",mv="8.10.1";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */x.registerVersion(Bb,mv,"app");x.SDK_VERSION=mv;var Hb="@firebase/database",Gb="0.11.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gv="";function yv(t){gv=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qb=function(){function t(n){this.domStorage_=n,this.prefix_="firebase:"}return t.prototype.set=function(n,i){i==null?this.domStorage_.removeItem(this.prefixedName_(n)):this.domStorage_.setItem(this.prefixedName_(n),me(i))},t.prototype.get=function(n){var i=this.domStorage_.getItem(this.prefixedName_(n));return i==null?null:yi(i)},t.prototype.remove=function(n){this.domStorage_.removeItem(this.prefixedName_(n))},t.prototype.prefixedName_=function(n){return this.prefix_+n},t.prototype.toString=function(){return this.domStorage_.toString()},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zb=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(n,i){i==null?delete this.cache_[n]:this.cache_[n]=i},t.prototype.get=function(n){return Ve(this.cache_,n)?this.cache_[n]:null},t.prototype.remove=function(n){delete this.cache_[n]},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _v=function(t){try{if(typeof window!="undefined"&&typeof window[t]!="undefined"){var n=window[t];return n.setItem("firebase:sentinel","cache"),n.removeItem("firebase:sentinel"),new qb(n)}}catch{}return new zb},Sn=_v("localStorage"),dl=_v("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lr=new dv("@firebase/database"),wv=function(){var t=1;return function(){return t++}}(),bv=function(t){var n=db(t),i=new lb;i.update(n);var o=i.digest();return Dl.encodeByteArray(o)},Si=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var i="",o=0;o<t.length;o++){var a=t[o];Array.isArray(a)||a&&typeof a=="object"&&typeof a.length=="number"?i+=Si.apply(null,a):typeof a=="object"?i+=me(a):i+=a,i+=" "}return i},An=null,vp=!0,Ev=function(t,n){A(!n||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(lr.logLevel=$.VERBOSE,An=lr.log.bind(lr),n&&dl.set("logging_enabled",!0)):typeof t=="function"?An=t:(An=null,dl.remove("logging_enabled"))},we=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(vp===!0&&(vp=!1,An===null&&dl.get("logging_enabled")===!0&&Ev(!0)),An){var i=Si.apply(null,t);An(i)}},Ci=function(t){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];we.apply(void 0,Kt([t],Ce(n)))}},pl=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i="FIREBASE INTERNAL ERROR: "+Si.apply(void 0,Kt([],Ce(t)));lr.error(i)},yt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i="FIREBASE FATAL ERROR: "+Si.apply(void 0,Kt([],Ce(t)));throw lr.error(i),new Error(i)},Ee=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i="FIREBASE WARNING: "+Si.apply(void 0,Kt([],Ce(t)));lr.warn(i)},Kb=function(){typeof window!="undefined"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Ee("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},rs=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Yb=function(t){if(document.readyState==="complete")t();else{var n=!1,i=function(){if(!document.body){setTimeout(i,Math.floor(10));return}n||(n=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){document.readyState==="complete"&&i()}),window.attachEvent("onload",i))}},Rt="[MIN_NAME]",_t="[MAX_NAME]",Pn=function(t,n){if(t===n)return 0;if(t===Rt||n===_t)return-1;if(n===Rt||t===_t)return 1;var i=Ho(t),o=Ho(n);return i!==null?o!==null?i-o===0?t.length-n.length:i-o:-1:o!==null?1:t<n?-1:1},Qb=function(t,n){return t===n?0:t<n?-1:1},ai=function(t,n){if(n&&t in n)return n[t];throw new Error("Missing required key ("+t+") in object: "+me(n))},Fl=function(t){if(typeof t!="object"||t===null)return me(t);var n=[];for(var i in t)n.push(i);n.sort();for(var o="{",a=0;a<n.length;a++)a!==0&&(o+=","),o+=me(n[a]),o+=":",o+=Fl(t[n[a]]);return o+="}",o},Iv=function(t,n){var i=t.length;if(i<=n)return[t];for(var o=[],a=0;a<i;a+=n)a+n>i?o.push(t.substring(a,i)):o.push(t.substring(a,a+n));return o};function ge(t,n){for(var i in t)t.hasOwnProperty(i)&&n(i,t[i])}var Tv=function(t){A(!rs(t),"Invalid JSON number");var n=11,i=52,o=(1<<n-1)-1,a,l,h,p,f;t===0?(l=0,h=0,a=1/t===-1/0?1:0):(a=t<0,t=Math.abs(t),t>=Math.pow(2,1-o)?(p=Math.min(Math.floor(Math.log(t)/Math.LN2),o),l=p+o,h=Math.round(t*Math.pow(2,i-p)-Math.pow(2,i))):(l=0,h=Math.round(t/Math.pow(2,1-o-i))));var m=[];for(f=i;f;f-=1)m.push(h%2?1:0),h=Math.floor(h/2);for(f=n;f;f-=1)m.push(l%2?1:0),l=Math.floor(l/2);m.push(a?1:0),m.reverse();var g=m.join(""),_="";for(f=0;f<64;f+=8){var w=parseInt(g.substr(f,8),2).toString(16);w.length===1&&(w="0"+w),_=_+w}return _.toLowerCase()},Xb=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},$b=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Jb(t,n){var i="Unknown Error";t==="too_big"?i="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?i="Client doesn't have permission to access the desired data.":t==="unavailable"&&(i="The service is unavailable");var o=new Error(t+" at "+n._path.toString()+": "+i);return o.code=t.toUpperCase(),o}var Zb=new RegExp("^-?(0*)\\d{1,10}$"),Sv=-2147483648,jl=2147483647,Ho=function(t){if(Zb.test(t)){var n=Number(t);if(n>=Sv&&n<=jl)return n}return null},gr=function(t){try{t()}catch(n){setTimeout(function(){var i=n.stack||"";throw Ee("Exception was thrown by user callback.",i),n},Math.floor(0))}},e0=function(){var t=typeof window=="object"&&window.navigator&&window.navigator.userAgent||"";return t.search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},hi=function(t,n){var i=setTimeout(t,n);return typeof i=="object"&&i.unref&&i.unref(),i};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var t0=function(){function t(n,i){var o=this;this.appName_=n,this.appCheckProvider=i,this.appCheck=i==null?void 0:i.getImmediate({optional:!0}),this.appCheck||i==null||i.get().then(function(a){return o.appCheck=a})}return t.prototype.getToken=function(n){var i=this;return this.appCheck?this.appCheck.getToken(n):new Promise(function(o,a){setTimeout(function(){i.appCheck?i.getToken(n).then(o,a):o(null)},0)})},t.prototype.addTokenChangeListener=function(n){var i;(i=this.appCheckProvider)===null||i===void 0||i.get().then(function(o){return o.addTokenListener(n)})},t.prototype.notifyForInvalidToken=function(){Ee('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var n0=function(){function t(n,i,o){var a=this;this.appName_=n,this.firebaseOptions_=i,this.authProvider_=o,this.auth_=null,this.auth_=o.getImmediate({optional:!0}),this.auth_||o.onInit(function(l){return a.auth_=l})}return t.prototype.getToken=function(n){var i=this;return this.auth_?this.auth_.getToken(n).catch(function(o){return o&&o.code==="auth/token-not-initialized"?(we("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(o)}):new Promise(function(o,a){setTimeout(function(){i.auth_?i.getToken(n).then(o,a):o(null)},0)})},t.prototype.addTokenChangeListener=function(n){this.auth_?this.auth_.addAuthTokenListener(n):this.authProvider_.get().then(function(i){return i.addAuthTokenListener(n)})},t.prototype.removeTokenChangeListener=function(n){this.authProvider_.get().then(function(i){return i.removeAuthTokenListener(n)})},t.prototype.notifyForInvalidToken=function(){var n='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?n+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?n+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':n+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ee(n)},t}(),fi=function(){function t(n){this.accessToken=n}return t.prototype.getToken=function(n){return Promise.resolve({accessToken:this.accessToken})},t.prototype.addTokenChangeListener=function(n){n(this.accessToken)},t.prototype.removeTokenChangeListener=function(n){},t.prototype.notifyForInvalidToken=function(){},t.OWNER="owner",t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ul="5",Cv="v",Av="s",Nv="r",kv="f",Rv=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Ov="ls",r0="p",vl="ac",Pv="websocket",Dv="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vl=function(){function t(n,i,o,a,l,h,p){l===void 0&&(l=!1),h===void 0&&(h=""),p===void 0&&(p=!1),this.secure=i,this.namespace=o,this.webSocketOnly=a,this.nodeAdmin=l,this.persistenceKey=h,this.includeNamespaceInQueryParams=p,this._host=n.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Sn.get("host:"+n)||this._host}return t.prototype.isCacheableHost=function(){return this.internalHost.substr(0,2)==="s-"},t.prototype.isCustomHost=function(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"},Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(n){n!==this.internalHost&&(this.internalHost=n,this.isCacheableHost()&&Sn.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var n=this.toURLString();return this.persistenceKey&&(n+="<"+this.persistenceKey+">"),n},t.prototype.toURLString=function(){var n=this.secure?"https://":"http://",i=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return""+n+this.host+"/"+i},t}();function i0(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function xv(t,n,i){A(typeof n=="string","typeof type must == string"),A(typeof i=="object","typeof params must == object");var o;if(n===Pv)o=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(n===Dv)o=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+n);i0(t)&&(i.ns=t.namespace);var a=[];return ge(i,function(l,h){a.push(l+"="+h)}),o+a.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var o0=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(n,i){i===void 0&&(i=1),Ve(this.counters_,n)||(this.counters_[n]=0),this.counters_[n]+=i},t.prototype.get=function(){return sv(this.counters_)},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var il={},ol={};function Wl(t){var n=t.toString();return il[n]||(il[n]=new o0),il[n]}function s0(t,n){var i=t.toString();return ol[i]||(ol[i]=n()),ol[i]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var a0=function(){function t(n){this.onMessage_=n,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(n,i){this.closeAfterResponse=n,this.onClose=i,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(n,i){var o=this;this.pendingResponses[n]=i;for(var a=function(){var p=l.pendingResponses[l.currentResponseNum];delete l.pendingResponses[l.currentResponseNum];for(var f=function(g){p[g]&&gr(function(){o.onMessage_(p[g])})},m=0;m<p.length;++m)f(m);if(l.currentResponseNum===l.closeAfterResponse)return l.onClose&&(l.onClose(),l.onClose=null),"break";l.currentResponseNum++},l=this;this.pendingResponses[this.currentResponseNum];){var h=a();if(h==="break")break}},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mp="start",u0="close",l0="pLPCommand",c0="pRTLPCB",Lv="id",Mv="pw",Fv="ser",h0="cb",f0="seg",d0="ts",p0="d",v0="dframe",jv=1870,Uv=30,m0=jv-Uv,g0=25e3,y0=3e4,Bl=function(){function t(n,i,o,a,l,h,p){var f=this;this.connId=n,this.repoInfo=i,this.applicationId=o,this.appCheckToken=a,this.authToken=l,this.transportSessionId=h,this.lastSessionId=p,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ci(n),this.stats_=Wl(i),this.urlFn=function(m){return f.appCheckToken&&(m[vl]=f.appCheckToken),xv(i,Dv,m)}}return t.prototype.open=function(n,i){var o=this;this.curSegmentNum=0,this.onDisconnect_=i,this.myPacketOrderer=new a0(n),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){o.log_("Timed out trying to connect."),o.onClosed_(),o.connectTimeoutTimer_=null},Math.floor(y0)),Yb(function(){if(!o.isClosed_){o.scriptTagHolder=new _0(function(){for(var h=[],p=0;p<arguments.length;p++)h[p]=arguments[p];var f=Ce(h,5),m=f[0],g=f[1],_=f[2];if(f[3],f[4],o.incrementIncomingBytes_(h),!!o.scriptTagHolder)if(o.connectTimeoutTimer_&&(clearTimeout(o.connectTimeoutTimer_),o.connectTimeoutTimer_=null),o.everConnected_=!0,m===mp)o.id=g,o.password=_;else if(m===u0)g?(o.scriptTagHolder.sendNewPolls=!1,o.myPacketOrderer.closeAfter(g,function(){o.onClosed_()})):o.onClosed_();else throw new Error("Unrecognized command received: "+m)},function(){for(var h=[],p=0;p<arguments.length;p++)h[p]=arguments[p];var f=Ce(h,2),m=f[0],g=f[1];o.incrementIncomingBytes_(h),o.myPacketOrderer.handleResponse(m,g)},function(){o.onClosed_()},o.urlFn);var a={};a[mp]="t",a[Fv]=Math.floor(Math.random()*1e8),o.scriptTagHolder.uniqueCallbackIdentifier&&(a[h0]=o.scriptTagHolder.uniqueCallbackIdentifier),a[Cv]=Ul,o.transportSessionId&&(a[Av]=o.transportSessionId),o.lastSessionId&&(a[Ov]=o.lastSessionId),o.applicationId&&(a[r0]=o.applicationId),o.appCheckToken&&(a[vl]=o.appCheckToken),typeof location!="undefined"&&location.hostname&&Rv.test(location.hostname)&&(a[Nv]=kv);var l=o.urlFn(a);o.log_("Connecting via long-poll to "+l),o.scriptTagHolder.addTag(l,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return t.forceAllow_?!0:!t.forceDisallow_&&typeof document!="undefined"&&document.createElement!=null&&!Xb()&&!$b()},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(n){var i=me(n);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);for(var o=ov(i),a=Iv(o,m0),l=0;l<a.length;l++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,a.length,a[l]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(n,i){this.myDisconnFrame=document.createElement("iframe");var o={};o[v0]="t",o[Lv]=n,o[Mv]=i,this.myDisconnFrame.src=this.urlFn(o),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},t.prototype.incrementIncomingBytes_=function(n){var i=me(n).length;this.bytesReceived+=i,this.stats_.incrementCounter("bytes_received",i)},t}(),_0=function(){function t(n,i,o,a){this.onDisconnect=o,this.urlFn=a,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=wv(),window[l0+this.uniqueCallbackIdentifier]=n,window[c0+this.uniqueCallbackIdentifier]=i,this.myIFrame=t.createIFrame_();var l="";if(this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"){var h=document.domain;l='<script>document.domain="'+h+'";<\/script>'}var p="<html><body>"+l+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(p),this.myIFrame.doc.close()}catch(f){we("frame writing exception"),f.stack&&we(f.stack),we(f)}}}return t.createIFrame_=function(){var n=document.createElement("iframe");if(n.style.display="none",document.body){document.body.appendChild(n);try{var i=n.contentWindow.document;i||we("No IE domain setting required")}catch{var o=document.domain;n.src="javascript:void((function(){document.open();document.domain='"+o+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return n.contentDocument?n.doc=n.contentDocument:n.contentWindow?n.doc=n.contentWindow.document:n.document&&(n.doc=n.document),n},t.prototype.close=function(){var n=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){n.myIFrame!==null&&(document.body.removeChild(n.myIFrame),n.myIFrame=null)},Math.floor(0)));var i=this.onDisconnect;i&&(this.onDisconnect=null,i())},t.prototype.startLongPoll=function(n,i){for(this.myID=n,this.myPW=i,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var n={};n[Lv]=this.myID,n[Mv]=this.myPW,n[Fv]=this.currentSerial;for(var i=this.urlFn(n),o="",a=0;this.pendingSegs.length>0;){var l=this.pendingSegs[0];if(l.d.length+Uv+o.length<=jv){var h=this.pendingSegs.shift();o=o+"&"+f0+a+"="+h.seg+"&"+d0+a+"="+h.ts+"&"+p0+a+"="+h.d,a++}else break}return i=i+o,this.addLongPollTag_(i,this.currentSerial),!0}else return!1},t.prototype.enqueueSegment=function(n,i,o){this.pendingSegs.push({seg:n,ts:i,d:o}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(n,i){var o=this;this.outstandingRequests.add(i);var a=function(){o.outstandingRequests.delete(i),o.newRequest_()},l=setTimeout(a,Math.floor(g0)),h=function(){clearTimeout(l),a()};this.addTag(n,h)},t.prototype.addTag=function(n,i){var o=this;setTimeout(function(){try{if(!o.sendNewPolls)return;var a=o.myIFrame.doc.createElement("script");a.type="text/javascript",a.async=!0,a.src=n,a.onload=a.onreadystatechange=function(){var l=a.readyState;(!l||l==="loaded"||l==="complete")&&(a.onload=a.onreadystatechange=null,a.parentNode&&a.parentNode.removeChild(a),i())},a.onerror=function(){we("Long-poll script failed to load: "+n),o.sendNewPolls=!1,o.close()},o.myIFrame.doc.body.appendChild(a)}catch{}},Math.floor(1))},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var w0=16384,b0=45e3,Go=null;typeof MozWebSocket!="undefined"?Go=MozWebSocket:typeof WebSocket!="undefined"&&(Go=WebSocket);var Tn=function(){function t(n,i,o,a,l,h,p){this.connId=n,this.applicationId=o,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ci(this.connId),this.stats_=Wl(i),this.connURL=t.connectionURL_(i,h,p,a),this.nodeAdmin=i.nodeAdmin}return t.connectionURL_=function(n,i,o,a){var l={};return l[Cv]=Ul,typeof location!="undefined"&&location.hostname&&Rv.test(location.hostname)&&(l[Nv]=kv),i&&(l[Av]=i),o&&(l[Ov]=o),a&&(l[vl]=a),xv(n,Pv,l)},t.prototype.open=function(n,i){var o=this;this.onDisconnect=i,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Sn.set("previous_websocket_failure",!0);try{var a,l,h,p;if(!uv()){var l={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new Go(this.connURL,[],l)}}catch(m){this.log_("Error instantiating WebSocket.");var f=m.message||m.data;f&&this.log_(f),this.onClosed_();return}this.mySock.onopen=function(){o.log_("Websocket connected."),o.everConnected_=!0},this.mySock.onclose=function(){o.log_("Websocket connection was disconnected."),o.mySock=null,o.onClosed_()},this.mySock.onmessage=function(m){o.handleIncomingFrame(m)},this.mySock.onerror=function(m){o.log_("WebSocket error.  Closing connection.");var g=m.message||m.data;g&&o.log_(g),o.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var n=!1;if(typeof navigator!="undefined"&&navigator.userAgent){var i=/Android ([0-9]{0,}\.[0-9]{0,})/,o=navigator.userAgent.match(i);o&&o.length>1&&parseFloat(o[1])<4.4&&(n=!0)}return!n&&Go!==null&&!t.forceDisallow_},t.previouslyFailed=function(){return Sn.isInMemoryStorage||Sn.get("previous_websocket_failure")===!0},t.prototype.markConnectionHealthy=function(){Sn.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(n){if(this.frames.push(n),this.frames.length===this.totalFrames){var i=this.frames.join("");this.frames=null;var o=yi(i);this.onMessage(o)}},t.prototype.handleNewFrameCount_=function(n){this.totalFrames=n,this.frames=[]},t.prototype.extractFrameCount_=function(n){if(A(this.frames===null,"We already have a frame buffer"),n.length<=6){var i=Number(n);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),n},t.prototype.handleIncomingFrame=function(n){if(this.mySock!==null){var i=n.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(i);else{var o=this.extractFrameCount_(i);o!==null&&this.appendFrame_(o)}}},t.prototype.send=function(n){this.resetKeepAlive();var i=me(n);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);var o=Iv(i,w0);o.length>1&&this.sendString_(String(o.length));for(var a=0;a<o.length;a++)this.sendString_(o[a])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var n=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){n.mySock&&n.sendString_("0"),n.resetKeepAlive()},Math.floor(b0))},t.prototype.sendString_=function(n){try{this.mySock.send(n)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var E0=function(){function t(n){this.initTransports_(n)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[Bl,Tn]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(n){var i,o,a=Tn&&Tn.isAvailable(),l=a&&!Tn.previouslyFailed();if(n.webSocketOnly&&(a||Ee("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),l=!0),l)this.transports_=[Tn];else{var h=this.transports_=[];try{for(var p=Ue(t.ALL_TRANSPORTS),f=p.next();!f.done;f=p.next()){var m=f.value;m&&m.isAvailable()&&h.push(m)}}catch(g){i={error:g}}finally{try{f&&!f.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var I0=6e4,T0=5e3,S0=10*1024,C0=100*1024,sl="t",gp="d",A0="s",yp="r",N0="e",_p="o",wp="a",bp="n",Ep="p",k0="h",Vv=function(){function t(n,i,o,a,l,h,p,f,m,g){this.id=n,this.repoInfo_=i,this.applicationId_=o,this.appCheckToken_=a,this.authToken_=l,this.onMessage_=h,this.onReady_=p,this.onDisconnect_=f,this.onKill_=m,this.lastSessionId=g,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ci("c:"+this.id+":"),this.transportManager_=new E0(i),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var n=this,i=this.transportManager_.initialTransport();this.conn_=new i(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=i.responsesRequiredToBeHealthy||0;var o=this.connReceiver_(this.conn_),a=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){n.conn_&&n.conn_.open(o,a)},Math.floor(0));var l=i.healthyTimeout||0;l>0&&(this.healthyTimeout_=hi(function(){n.healthyTimeout_=null,n.isHealthy_||(n.conn_&&n.conn_.bytesReceived>C0?(n.log_("Connection exceeded healthy timeout but has received "+n.conn_.bytesReceived+" bytes.  Marking connection healthy."),n.isHealthy_=!0,n.conn_.markConnectionHealthy()):n.conn_&&n.conn_.bytesSent>S0?n.log_("Connection exceeded healthy timeout but has sent "+n.conn_.bytesSent+" bytes.  Leaving connection alive."):(n.log_("Closing unhealthy connection after timeout."),n.close()))},Math.floor(l)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(n){var i=this;return function(o){n===i.conn_?i.onConnectionLost_(o):n===i.secondaryConn_?(i.log_("Secondary connection lost."),i.onSecondaryConnectionLost_()):i.log_("closing an old connection")}},t.prototype.connReceiver_=function(n){var i=this;return function(o){i.state_!==2&&(n===i.rx_?i.onPrimaryMessageReceived_(o):n===i.secondaryConn_?i.onSecondaryMessageReceived_(o):i.log_("message on old connection"))}},t.prototype.sendRequest=function(n){var i={t:"d",d:n};this.sendData_(i)},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(n){if(sl in n){var i=n[sl];i===wp?this.upgradeIfSecondaryHealthy_():i===yp?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):i===_p&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(n){var i=ai("t",n),o=ai("d",n);if(i==="c")this.onSecondaryControl_(o);else if(i==="d")this.pendingDataMessages.push(o);else throw new Error("Unknown protocol layer: "+i)},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Ep,d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:wp,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:bp,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(n){var i=ai("t",n),o=ai("d",n);i==="c"?this.onControl_(o):i==="d"&&this.onDataMessage_(o)},t.prototype.onDataMessage_=function(n){this.onPrimaryResponse_(),this.onMessage_(n)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(n){var i=ai(sl,n);if(gp in n){var o=n[gp];if(i===k0)this.onHandshake_(o);else if(i===bp){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var a=0;a<this.pendingDataMessages.length;++a)this.onDataMessage_(this.pendingDataMessages[a]);this.pendingDataMessages=[],this.tryCleanupConnection()}else i===A0?this.onConnectionShutdown_(o):i===yp?this.onReset_(o):i===N0?pl("Server Error: "+o):i===_p?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):pl("Unknown control packet command: "+i)}},t.prototype.onHandshake_=function(n){var i=n.ts,o=n.v,a=n.h;this.sessionId=n.s,this.repoInfo_.host=a,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,i),Ul!==o&&Ee("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var n=this.transportManager_.upgradeTransport();n&&this.startUpgrade_(n)},t.prototype.startUpgrade_=function(n){var i=this;this.secondaryConn_=new n(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=n.responsesRequiredToBeHealthy||0;var o=this.connReceiver_(this.secondaryConn_),a=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(o,a),hi(function(){i.secondaryConn_&&(i.log_("Timed out trying to upgrade."),i.secondaryConn_.close())},Math.floor(I0))},t.prototype.onReset_=function(n){this.log_("Reset packet received.  New host: "+n),this.repoInfo_.host=n,this.state_===1?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(n,i){var o=this;this.log_("Realtime connection established."),this.conn_=n,this.state_=1,this.onReady_&&(this.onReady_(i,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):hi(function(){o.sendPingOnPrimaryIfNecessary_()},Math.floor(T0))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Ep,d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var n=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===n||this.rx_===n)&&this.close()},t.prototype.onConnectionLost_=function(n){this.conn_=null,!n&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Sn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()},t.prototype.onConnectionShutdown_=function(n){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(n),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(n){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(n)},t.prototype.close=function(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wv=function(){function t(){}return t.prototype.put=function(n,i,o,a){},t.prototype.merge=function(n,i,o,a){},t.prototype.refreshAuthToken=function(n){},t.prototype.refreshAppCheckToken=function(n){},t.prototype.onDisconnectPut=function(n,i,o){},t.prototype.onDisconnectMerge=function(n,i,o){},t.prototype.onDisconnectCancel=function(n,i){},t.prototype.reportStats=function(n){},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bv=function(){function t(n){this.allowedEvents_=n,this.listeners_={},A(Array.isArray(n)&&n.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(n){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];if(Array.isArray(this.listeners_[n]))for(var a=Kt([],Ce(this.listeners_[n])),l=0;l<a.length;l++)a[l].callback.apply(a[l].context,i)},t.prototype.on=function(n,i,o){this.validateEventType_(n),this.listeners_[n]=this.listeners_[n]||[],this.listeners_[n].push({callback:i,context:o});var a=this.getInitialEvent(n);a&&i.apply(o,a)},t.prototype.off=function(n,i,o){this.validateEventType_(n);for(var a=this.listeners_[n]||[],l=0;l<a.length;l++)if(a[l].callback===i&&(!o||o===a[l].context)){a.splice(l,1);return}},t.prototype.validateEventType_=function(n){A(this.allowedEvents_.find(function(i){return i===n}),"Unknown event: "+n)},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ip=function(t){ae(n,t);function n(){var i=t.call(this,["online"])||this;return i.online_=!0,typeof window!="undefined"&&typeof window.addEventListener!="undefined"&&!av()&&(window.addEventListener("online",function(){i.online_||(i.online_=!0,i.trigger("online",!0))},!1),window.addEventListener("offline",function(){i.online_&&(i.online_=!1,i.trigger("online",!1))},!1)),i}return n.getInstance=function(){return new n},n.prototype.getInitialEvent=function(i){return A(i==="online","Unknown event type: "+i),[this.online_]},n.prototype.currentlyOnline=function(){return this.online_},n}(Bv);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tp=32,Sp=768,Y=function(){function t(n,i){if(i===void 0){this.pieces_=n.split("/");for(var o=0,a=0;a<this.pieces_.length;a++)this.pieces_[a].length>0&&(this.pieces_[o]=this.pieces_[a],o++);this.pieces_.length=o,this.pieceNum_=0}else this.pieces_=n,this.pieceNum_=i}return t.prototype.toString=function(){for(var n="",i=this.pieceNum_;i<this.pieces_.length;i++)this.pieces_[i]!==""&&(n+="/"+this.pieces_[i]);return n||"/"},t}();function K(){return new Y("")}function V(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Yt(t){return t.pieces_.length-t.pieceNum_}function J(t){var n=t.pieceNum_;return n<t.pieces_.length&&n++,new Y(t.pieces_,n)}function Hl(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function R0(t){for(var n="",i=t.pieceNum_;i<t.pieces_.length;i++)t.pieces_[i]!==""&&(n+="/"+encodeURIComponent(String(t.pieces_[i])));return n||"/"}function _i(t,n){return n===void 0&&(n=0),t.pieces_.slice(t.pieceNum_+n)}function Hv(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var n=[],i=t.pieceNum_;i<t.pieces_.length-1;i++)n.push(t.pieces_[i]);return new Y(n,0)}function re(t,n){for(var i=[],o=t.pieceNum_;o<t.pieces_.length;o++)i.push(t.pieces_[o]);if(n instanceof Y)for(var o=n.pieceNum_;o<n.pieces_.length;o++)i.push(n.pieces_[o]);else for(var a=n.split("/"),o=0;o<a.length;o++)a[o].length>0&&i.push(a[o]);return new Y(i,0)}function W(t){return t.pieceNum_>=t.pieces_.length}function Ae(t,n){var i=V(t),o=V(n);if(i===null)return n;if(i===o)return Ae(J(t),J(n));throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+t+")")}function O0(t,n){for(var i=_i(t,0),o=_i(n,0),a=0;a<i.length&&a<o.length;a++){var l=Pn(i[a],o[a]);if(l!==0)return l}return i.length===o.length?0:i.length<o.length?-1:1}function Gl(t,n){if(Yt(t)!==Yt(n))return!1;for(var i=t.pieceNum_,o=n.pieceNum_;i<=t.pieces_.length;i++,o++)if(t.pieces_[i]!==n.pieces_[o])return!1;return!0}function Ke(t,n){var i=t.pieceNum_,o=n.pieceNum_;if(Yt(t)>Yt(n))return!1;for(;i<t.pieces_.length;){if(t.pieces_[i]!==n.pieces_[o])return!1;++i,++o}return!0}var P0=function(){function t(n,i){this.errorPrefix_=i,this.parts_=_i(n,0),this.byteLength_=Math.max(1,this.parts_.length);for(var o=0;o<this.parts_.length;o++)this.byteLength_+=ns(this.parts_[o]);Gv(this)}return t}();function D0(t,n){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(n),t.byteLength_+=ns(n),Gv(t)}function x0(t){var n=t.parts_.pop();t.byteLength_-=ns(n),t.parts_.length>0&&(t.byteLength_-=1)}function Gv(t){if(t.byteLength_>Sp)throw new Error(t.errorPrefix_+"has a key path longer than "+Sp+" bytes ("+t.byteLength_+").");if(t.parts_.length>Tp)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Tp+") or object contains a cycle "+In(t))}function In(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var L0=function(t){ae(n,t);function n(){var i=t.call(this,["visible"])||this,o,a;return typeof document!="undefined"&&typeof document.addEventListener!="undefined"&&(typeof document.hidden!="undefined"?(a="visibilitychange",o="hidden"):typeof document.mozHidden!="undefined"?(a="mozvisibilitychange",o="mozHidden"):typeof document.msHidden!="undefined"?(a="msvisibilitychange",o="msHidden"):typeof document.webkitHidden!="undefined"&&(a="webkitvisibilitychange",o="webkitHidden")),i.visible_=!0,a&&document.addEventListener(a,function(){var l=!document[o];l!==i.visible_&&(i.visible_=l,i.trigger("visible",l))},!1),i}return n.getInstance=function(){return new n},n.prototype.getInitialEvent=function(i){return A(i==="visible","Unknown event type: "+i),[this.visible_]},n}(Bv);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ui=1e3,M0=60*5*1e3,F0=3*1e3,Cp=30*1e3,j0=1.3,U0=3e4,V0="server_kill",Ap=3,Nn=function(t){ae(n,t);function n(i,o,a,l,h,p,f,m){var g=t.call(this)||this;if(g.repoInfo_=i,g.applicationId_=o,g.onDataUpdate_=a,g.onConnectStatus_=l,g.onServerInfoUpdate_=h,g.authTokenProvider_=p,g.appCheckTokenProvider_=f,g.authOverride_=m,g.id=n.nextPersistentConnectionId_++,g.log_=Ci("p:"+g.id+":"),g.interruptReasons_={},g.listens=new Map,g.outstandingPuts_=[],g.outstandingGets_=[],g.outstandingPutCount_=0,g.outstandingGetCount_=0,g.onDisconnectRequestQueue_=[],g.connected_=!1,g.reconnectDelay_=ui,g.maxReconnectDelay_=M0,g.securityDebugCallback_=null,g.lastSessionId=null,g.establishConnectionTimer_=null,g.visible_=!1,g.requestCBHash_={},g.requestNumber_=0,g.realtime_=null,g.authToken_=null,g.appCheckToken_=null,g.forceTokenRefresh_=!1,g.invalidAuthTokenCount_=0,g.invalidAppCheckTokenCount_=0,g.firstConnection_=!0,g.lastConnectionAttemptTime_=null,g.lastConnectionEstablishedTime_=null,m&&!uv())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return L0.getInstance().on("visible",g.onVisible_,g),i.host.indexOf("fblocal")===-1&&Ip.getInstance().on("online",g.onOnline_,g),g}return n.prototype.sendRequest=function(i,o,a){var l=++this.requestNumber_,h={r:l,a:i,b:o};this.log_(me(h)),A(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(h),a&&(this.requestCBHash_[l]=a)},n.prototype.get=function(i){var o=this;this.initConnection_();var a=new De,l={p:i._path.toString(),q:i._queryObject},h={action:"g",request:l,onComplete:function(f){var m=f.d;f.s==="ok"?(o.onDataUpdate_(l.p,m,!1,null),a.resolve(m)):a.reject(m)}};this.outstandingGets_.push(h),this.outstandingGetCount_++;var p=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var f=o.outstandingGets_[p];f===void 0||h!==f||(delete o.outstandingGets_[p],o.outstandingGetCount_--,o.outstandingGetCount_===0&&(o.outstandingGets_=[]),o.log_("get "+p+" timed out on connection"),a.reject(new Error("Client is offline.")))},F0),this.connected_&&this.sendGet_(p),a.promise},n.prototype.listen=function(i,o,a,l){this.initConnection_();var h=i._queryIdentifier,p=i._path.toString();this.log_("Listen called for "+p+" "+h),this.listens.has(p)||this.listens.set(p,new Map),A(i._queryParams.isDefault()||!i._queryParams.loadsAllData(),"listen() called for non-default but complete query"),A(!this.listens.get(p).has(h),"listen() called twice for same path/queryId.");var f={onComplete:l,hashFn:o,query:i,tag:a};this.listens.get(p).set(h,f),this.connected_&&this.sendListen_(f)},n.prototype.sendGet_=function(i){var o=this,a=this.outstandingGets_[i];this.sendRequest("g",a.request,function(l){delete o.outstandingGets_[i],o.outstandingGetCount_--,o.outstandingGetCount_===0&&(o.outstandingGets_=[]),a.onComplete&&a.onComplete(l)})},n.prototype.sendListen_=function(i){var o=this,a=i.query,l=a._path.toString(),h=a._queryIdentifier;this.log_("Listen on "+l+" for "+h);var p={p:l},f="q";i.tag&&(p.q=a._queryObject,p.t=i.tag),p.h=i.hashFn(),this.sendRequest(f,p,function(m){var g=m.d,_=m.s;n.warnOnListenWarnings_(g,a);var w=o.listens.get(l)&&o.listens.get(l).get(h);w===i&&(o.log_("listen response",m),_!=="ok"&&o.removeListen_(l,h),i.onComplete&&i.onComplete(_,g))})},n.warnOnListenWarnings_=function(i,o){if(i&&typeof i=="object"&&Ve(i,"w")){var a=kn(i,"w");if(Array.isArray(a)&&~a.indexOf("no_index")){var l='".indexOn": "'+o._queryParams.getIndex().toString()+'"',h=o._path.toString();Ee("Using an unspecified index. Your data will be downloaded and "+("filtered on the client. Consider adding "+l+" at ")+(h+" to your security rules for better performance."))}}},n.prototype.refreshAuthToken=function(i){this.authToken_=i,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(i)},n.prototype.reduceReconnectDelayIfAdminCredential_=function(i){var o=i&&i.length===40;(o||ab(i))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Cp)},n.prototype.refreshAppCheckToken=function(i){this.appCheckToken_=i,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},function(){})},n.prototype.tryAuth=function(){var i=this;if(this.connected_&&this.authToken_){var o=this.authToken_,a=sb(o)?"auth":"gauth",l={cred:o};this.authOverride_===null?l.noauth=!0:typeof this.authOverride_=="object"&&(l.authvar=this.authOverride_),this.sendRequest(a,l,function(h){var p=h.s,f=h.d||"error";i.authToken_===o&&(p==="ok"?i.invalidAuthTokenCount_=0:i.onAuthRevoked_(p,f))})}},n.prototype.tryAppCheck=function(){var i=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},function(o){var a=o.s,l=o.d||"error";a==="ok"?i.invalidAppCheckTokenCount_=0:i.onAppCheckRevoked_(a,l)})},n.prototype.unlisten=function(i,o){var a=i._path.toString(),l=i._queryIdentifier;this.log_("Unlisten called for "+a+" "+l),A(i._queryParams.isDefault()||!i._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");var h=this.removeListen_(a,l);h&&this.connected_&&this.sendUnlisten_(a,l,i._queryObject,o)},n.prototype.sendUnlisten_=function(i,o,a,l){this.log_("Unlisten on "+i+" for "+o);var h={p:i},p="n";l&&(h.q=a,h.t=l),this.sendRequest(p,h)},n.prototype.onDisconnectPut=function(i,o,a){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",i,o,a):this.onDisconnectRequestQueue_.push({pathString:i,action:"o",data:o,onComplete:a})},n.prototype.onDisconnectMerge=function(i,o,a){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",i,o,a):this.onDisconnectRequestQueue_.push({pathString:i,action:"om",data:o,onComplete:a})},n.prototype.onDisconnectCancel=function(i,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",i,null,o):this.onDisconnectRequestQueue_.push({pathString:i,action:"oc",data:null,onComplete:o})},n.prototype.sendOnDisconnect_=function(i,o,a,l){var h={p:o,d:a};this.log_("onDisconnect "+i,h),this.sendRequest(i,h,function(p){l&&setTimeout(function(){l(p.s,p.d)},Math.floor(0))})},n.prototype.put=function(i,o,a,l){this.putInternal("p",i,o,a,l)},n.prototype.merge=function(i,o,a,l){this.putInternal("m",i,o,a,l)},n.prototype.putInternal=function(i,o,a,l,h){this.initConnection_();var p={p:o,d:a};h!==void 0&&(p.h=h),this.outstandingPuts_.push({action:i,request:p,onComplete:l}),this.outstandingPutCount_++;var f=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(f):this.log_("Buffering put: "+o)},n.prototype.sendPut_=function(i){var o=this,a=this.outstandingPuts_[i].action,l=this.outstandingPuts_[i].request,h=this.outstandingPuts_[i].onComplete;this.outstandingPuts_[i].queued=this.connected_,this.sendRequest(a,l,function(p){o.log_(a+" response",p),delete o.outstandingPuts_[i],o.outstandingPutCount_--,o.outstandingPutCount_===0&&(o.outstandingPuts_=[]),h&&h(p.s,p.d)})},n.prototype.reportStats=function(i){var o=this;if(this.connected_){var a={c:i};this.log_("reportStats",a),this.sendRequest("s",a,function(l){var h=l.s;if(h!=="ok"){var p=l.d;o.log_("reportStats","Error sending stats: "+p)}})}},n.prototype.onDataMessage_=function(i){if("r"in i){this.log_("from server: "+me(i));var o=i.r,a=this.requestCBHash_[o];a&&(delete this.requestCBHash_[o],a(i.b))}else{if("error"in i)throw"A server-side error has occurred: "+i.error;"a"in i&&this.onDataPush_(i.a,i.b)}},n.prototype.onDataPush_=function(i,o){this.log_("handleServerMessage",i,o),i==="d"?this.onDataUpdate_(o.p,o.d,!1,o.t):i==="m"?this.onDataUpdate_(o.p,o.d,!0,o.t):i==="c"?this.onListenRevoked_(o.p,o.q):i==="ac"?this.onAuthRevoked_(o.s,o.d):i==="apc"?this.onAppCheckRevoked_(o.s,o.d):i==="sd"?this.onSecurityDebugPacket_(o):pl("Unrecognized action received from server: "+me(i)+`
Are you using the latest client?`)},n.prototype.onReady_=function(i,o){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(i),this.lastSessionId=o,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},n.prototype.scheduleConnect_=function(i){var o=this;A(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){o.establishConnectionTimer_=null,o.establishConnection_()},Math.floor(i))},n.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},n.prototype.onVisible_=function(i){i&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ui,this.realtime_||this.scheduleConnect_(0)),this.visible_=i},n.prototype.onOnline_=function(i){i?(this.log_("Browser went online."),this.reconnectDelay_=ui,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},n.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(!this.visible_)this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime();else if(this.lastConnectionEstablishedTime_){var i=new Date().getTime()-this.lastConnectionEstablishedTime_;i>U0&&(this.reconnectDelay_=ui),this.lastConnectionEstablishedTime_=null}var o=new Date().getTime()-this.lastConnectionAttemptTime_,a=Math.max(0,this.reconnectDelay_-o);a=Math.random()*a,this.log_("Trying to reconnect in "+a+"ms"),this.scheduleConnect_(a),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*j0)}this.onConnectStatus_(!1)},n.prototype.establishConnection_=function(){return tv(this,void 0,void 0,function(){var i,o,a,l,h,p,f,m,g,_,w,E,S,N,C=this;return nv(this,function(P){switch(P.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null,i=this.onDataMessage_.bind(this),o=this.onReady_.bind(this),a=this.onRealtimeDisconnect_.bind(this),l=this.id+":"+n.nextConnectionId_++,h=this.lastSessionId,p=!1,f=null,m=function(){f?f.close():(p=!0,a())},g=function(q){A(f,"sendRequest call when we're not connected not allowed."),f.sendRequest(q)},this.realtime_={close:m,sendRequest:g},_=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,P.label=1;case 1:return P.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(_),this.appCheckTokenProvider_.getToken(_)])];case 2:return w=Ce.apply(void 0,[P.sent(),2]),E=w[0],S=w[1],p?we("getToken() completed but was canceled"):(we("getToken() completed. Creating connection."),this.authToken_=E&&E.accessToken,this.appCheckToken_=S&&S.token,f=new Vv(l,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,i,o,a,function(q){Ee(q+" ("+C.repoInfo_.toString()+")"),C.interrupt(V0)},h)),[3,4];case 3:return N=P.sent(),this.log_("Failed to get token: "+N),p||(this.repoInfo_.nodeAdmin&&Ee(N),m()),[3,4];case 4:return[2]}})})},n.prototype.interrupt=function(i){we("Interrupting connection for reason: "+i),this.interruptReasons_[i]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},n.prototype.resume=function(i){we("Resuming connection for reason: "+i),delete this.interruptReasons_[i],fl(this.interruptReasons_)&&(this.reconnectDelay_=ui,this.realtime_||this.scheduleConnect_(0))},n.prototype.handleTimestamp_=function(i){var o=i-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:o})},n.prototype.cancelSentTransactions_=function(){for(var i=0;i<this.outstandingPuts_.length;i++){var o=this.outstandingPuts_[i];o&&"h"in o.request&&o.queued&&(o.onComplete&&o.onComplete("disconnect"),delete this.outstandingPuts_[i],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])},n.prototype.onListenRevoked_=function(i,o){var a;o?a=o.map(function(h){return Fl(h)}).join("$"):a="default";var l=this.removeListen_(i,a);l&&l.onComplete&&l.onComplete("permission_denied")},n.prototype.removeListen_=function(i,o){var a=new Y(i).toString(),l;if(this.listens.has(a)){var h=this.listens.get(a);l=h.get(o),h.delete(o),h.size===0&&this.listens.delete(a)}else l=void 0;return l},n.prototype.onAuthRevoked_=function(i,o){we("Auth token revoked: "+i+"/"+o),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(i==="invalid_token"||i==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Ap&&(this.reconnectDelay_=Cp,this.authTokenProvider_.notifyForInvalidToken()))},n.prototype.onAppCheckRevoked_=function(i,o){we("App check token revoked: "+i+"/"+o),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(i==="invalid_token"||i==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Ap&&this.appCheckTokenProvider_.notifyForInvalidToken())},n.prototype.onSecurityDebugPacket_=function(i){this.securityDebugCallback_?this.securityDebugCallback_(i):"msg"in i&&console.log("FIREBASE: "+i.msg.replace(`
`,`
FIREBASE: `))},n.prototype.restoreState_=function(){var i,o,a,l;this.tryAuth(),this.tryAppCheck();try{for(var h=Ue(this.listens.values()),p=h.next();!p.done;p=h.next()){var f=p.value;try{for(var m=(a=void 0,Ue(f.values())),g=m.next();!g.done;g=m.next()){var _=g.value;this.sendListen_(_)}}catch(S){a={error:S}}finally{try{g&&!g.done&&(l=m.return)&&l.call(m)}finally{if(a)throw a.error}}}}catch(S){i={error:S}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}for(var w=0;w<this.outstandingPuts_.length;w++)this.outstandingPuts_[w]&&this.sendPut_(w);for(;this.onDisconnectRequestQueue_.length;){var E=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(E.action,E.pathString,E.data,E.onComplete)}for(var w=0;w<this.outstandingGets_.length;w++)this.outstandingGets_[w]&&this.sendGet_(w)},n.prototype.sendConnectStats_=function(){var i={},o="js";i["sdk."+o+"."+gv.replace(/\./g,"-")]=1,av()?i["framework.cordova"]=1:tb()&&(i["framework.reactnative"]=1),this.reportStats(i)},n.prototype.shouldReconnect_=function(){var i=Ip.getInstance().currentlyOnline();return fl(this.interruptReasons_)&&i},n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n}(Wv);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var G=function(){function t(n,i){this.name=n,this.node=i}return t.Wrap=function(n,i){return new t(n,i)},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var is=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(n,i){var o=new G(Rt,n),a=new G(Rt,i);return this.compare(o,a)!==0},t.prototype.minPost=function(){return G.MIN},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jo,qv=function(t){ae(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(n,"__EMPTY_NODE",{get:function(){return jo},set:function(i){jo=i},enumerable:!1,configurable:!0}),n.prototype.compare=function(i,o){return Pn(i.name,o.name)},n.prototype.isDefinedOn=function(i){throw mr("KeyIndex.isDefinedOn not expected to be called.")},n.prototype.indexedValueChanged=function(i,o){return!1},n.prototype.minPost=function(){return G.MIN},n.prototype.maxPost=function(){return new G(_t,jo)},n.prototype.makePost=function(i,o){return A(typeof i=="string","KeyIndex indexValue must always be a string."),new G(i,jo)},n.prototype.toString=function(){return".key"},n}(is),gt=new qv;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Uo=function(){function t(n,i,o,a,l){l===void 0&&(l=null),this.isReverse_=a,this.resultGenerator_=l,this.nodeStack_=[];for(var h=1;!n.isEmpty();)if(n=n,h=i?o(n.key,i):1,a&&(h*=-1),h<0)this.isReverse_?n=n.left:n=n.right;else if(h===0){this.nodeStack_.push(n);break}else this.nodeStack_.push(n),this.isReverse_?n=n.right:n=n.left}return t.prototype.getNext=function(){if(this.nodeStack_.length===0)return null;var n=this.nodeStack_.pop(),i;if(this.resultGenerator_?i=this.resultGenerator_(n.key,n.value):i={key:n.key,value:n.value},this.isReverse_)for(n=n.left;!n.isEmpty();)this.nodeStack_.push(n),n=n.right;else for(n=n.right;!n.isEmpty();)this.nodeStack_.push(n),n=n.left;return i},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(this.nodeStack_.length===0)return null;var n=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(n.key,n.value):{key:n.key,value:n.value}},t}(),st=function(){function t(n,i,o,a,l){this.key=n,this.value=i,this.color=o!=null?o:t.RED,this.left=a!=null?a:Nt.EMPTY_NODE,this.right=l!=null?l:Nt.EMPTY_NODE}return t.prototype.copy=function(n,i,o,a,l){return new t(n!=null?n:this.key,i!=null?i:this.value,o!=null?o:this.color,a!=null?a:this.left,l!=null?l:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)},t.prototype.reverseTraversal=function(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(n,i,o){var a=this,l=o(n,a.key);return l<0?a=a.copy(null,null,null,a.left.insert(n,i,o),null):l===0?a=a.copy(null,i,null,null,null):a=a.copy(null,null,null,null,a.right.insert(n,i,o)),a.fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Nt.EMPTY_NODE;var n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()},t.prototype.remove=function(n,i){var o,a;if(o=this,i(n,o.key)<0)!o.left.isEmpty()&&!o.left.isRed_()&&!o.left.left.isRed_()&&(o=o.moveRedLeft_()),o=o.copy(null,null,null,o.left.remove(n,i),null);else{if(o.left.isRed_()&&(o=o.rotateRight_()),!o.right.isEmpty()&&!o.right.isRed_()&&!o.right.left.isRed_()&&(o=o.moveRedRight_()),i(n,o.key)===0){if(o.right.isEmpty())return Nt.EMPTY_NODE;a=o.right.min_(),o=o.copy(a.key,a.value,null,null,o.right.removeMin_())}o=o.copy(null,null,null,null,o.right.remove(n,i))}return o.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n},t.prototype.moveRedLeft_=function(){var n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n},t.prototype.moveRedRight_=function(){var n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n},t.prototype.rotateLeft_=function(){var n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)},t.prototype.rotateRight_=function(){var n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)},t.prototype.colorFlip_=function(){var n=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,i)},t.prototype.checkMaxDepth_=function(){var n=this.check_();return Math.pow(2,n)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),W0=function(){function t(){}return t.prototype.copy=function(n,i,o,a,l){return this},t.prototype.insert=function(n,i,o){return new st(n,i,null)},t.prototype.remove=function(n,i){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(n){return!1},t.prototype.reverseTraversal=function(n){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Nt=function(){function t(n,i){i===void 0&&(i=t.EMPTY_NODE),this.comparator_=n,this.root_=i}return t.prototype.insert=function(n,i){return new t(this.comparator_,this.root_.insert(n,i,this.comparator_).copy(null,null,st.BLACK,null,null))},t.prototype.remove=function(n){return new t(this.comparator_,this.root_.remove(n,this.comparator_).copy(null,null,st.BLACK,null,null))},t.prototype.get=function(n){for(var i,o=this.root_;!o.isEmpty();){if(i=this.comparator_(n,o.key),i===0)return o.value;i<0?o=o.left:i>0&&(o=o.right)}return null},t.prototype.getPredecessorKey=function(n){for(var i,o=this.root_,a=null;!o.isEmpty();)if(i=this.comparator_(n,o.key),i===0){if(o.left.isEmpty())return a?a.key:null;for(o=o.left;!o.right.isEmpty();)o=o.right;return o.key}else i<0?o=o.left:i>0&&(a=o,o=o.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(n){return this.root_.inorderTraversal(n)},t.prototype.reverseTraversal=function(n){return this.root_.reverseTraversal(n)},t.prototype.getIterator=function(n){return new Uo(this.root_,null,this.comparator_,!1,n)},t.prototype.getIteratorFrom=function(n,i){return new Uo(this.root_,n,this.comparator_,!1,i)},t.prototype.getReverseIteratorFrom=function(n,i){return new Uo(this.root_,n,this.comparator_,!0,i)},t.prototype.getReverseIterator=function(n){return new Uo(this.root_,null,this.comparator_,!0,n)},t.EMPTY_NODE=new W0,t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B0(t,n){return Pn(t.name,n.name)}function ql(t,n){return Pn(t,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ml;function H0(t){ml=t}var zv=function(t){return typeof t=="number"?"number:"+Tv(t):"string:"+t},Kv=function(t){if(t.isLeafNode()){var n=t.val();A(typeof n=="string"||typeof n=="number"||typeof n=="object"&&Ve(n,".sv"),"Priority must be a string or number.")}else A(t===ml||t.isEmpty(),"priority of unexpected type.");A(t===ml||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Np,hr=function(){function t(n,i){i===void 0&&(i=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=n,this.priorityNode_=i,this.lazyHash_=null,A(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Kv(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return Np},set:function(n){Np=n},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(n){return new t(this.value_,n)},t.prototype.getImmediateChild=function(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(n){return W(n)?this:V(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(n,i){return null},t.prototype.updateImmediateChild=function(n,i){return n===".priority"?this.updatePriority(i):i.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,i).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(n,i){var o=V(n);return o===null?i:i.isEmpty()&&o!==".priority"?this:(A(o!==".priority"||Yt(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(o,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(J(n),i)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(n,i){return!1},t.prototype.val=function(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(this.lazyHash_===null){var n="";this.priorityNode_.isEmpty()||(n+="priority:"+zv(this.priorityNode_.val())+":");var i=typeof this.value_;n+=i+":",i==="number"?n+=Tv(this.value_):n+=this.value_,this.lazyHash_=bv(n)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(A(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))},t.prototype.compareToLeafNode_=function(n){var i=typeof n.value_,o=typeof this.value_,a=t.VALUE_TYPE_ORDER.indexOf(i),l=t.VALUE_TYPE_ORDER.indexOf(o);return A(a>=0,"Unknown leaf type: "+i),A(l>=0,"Unknown leaf type: "+o),a===l?o==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:l-a},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(n){if(n===this)return!0;if(n.isLeafNode()){var i=n;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}else return!1},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yv,Qv;function G0(t){Yv=t}function q0(t){Qv=t}var z0=function(t){ae(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.compare=function(i,o){var a=i.node.getPriority(),l=o.node.getPriority(),h=a.compareTo(l);return h===0?Pn(i.name,o.name):h},n.prototype.isDefinedOn=function(i){return!i.getPriority().isEmpty()},n.prototype.indexedValueChanged=function(i,o){return!i.getPriority().equals(o.getPriority())},n.prototype.minPost=function(){return G.MIN},n.prototype.maxPost=function(){return new G(_t,new hr("[PRIORITY-POST]",Qv))},n.prototype.makePost=function(i,o){var a=Yv(i);return new G(o,new hr("[PRIORITY-POST]",a))},n.prototype.toString=function(){return".priority"},n}(is),ee=new z0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var K0=Math.log(2),Y0=function(){function t(n){var i=function(l){return parseInt(Math.log(l)/K0,10)},o=function(l){return parseInt(Array(l+1).join("1"),2)};this.count=i(n+1),this.current_=this.count-1;var a=o(this.count);this.bits_=n+1&a}return t.prototype.nextBitIsOne=function(){var n=!(this.bits_&1<<this.current_);return this.current_--,n},t}(),qo=function(t,n,i,o){t.sort(n);var a=function(f,m){var g=m-f,_,w;if(g===0)return null;if(g===1)return _=t[f],w=i?i(_):_,new st(w,_.node,st.BLACK,null,null);var E=parseInt(g/2,10)+f,S=a(f,E),N=a(E+1,m);return _=t[E],w=i?i(_):_,new st(w,_.node,st.BLACK,S,N)},l=function(f){for(var m=null,g=null,_=t.length,w=function(P,q){var ue=_-P,Ot=_;_-=P;var br=a(ue+1,Ot),D=t[ue],Pt=i?i(D):D;E(new st(Pt,D.node,q,null,br))},E=function(P){m?(m.left=P,m=P):(g=P,m=P)},S=0;S<f.count;++S){var N=f.nextBitIsOne(),C=Math.pow(2,f.count-(S+1));N?w(C,st.BLACK):(w(C,st.BLACK),w(C,st.RED))}return g},h=new Y0(t.length),p=l(h);return new Nt(o||n,p)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var al,sr={},zo=function(){function t(n,i){this.indexes_=n,this.indexSet_=i}return Object.defineProperty(t,"Default",{get:function(){return A(sr&&ee,"ChildrenNode.ts has not been loaded"),al=al||new t({".priority":sr},{".priority":ee}),al},enumerable:!1,configurable:!0}),t.prototype.get=function(n){var i=kn(this.indexes_,n);if(!i)throw new Error("No index defined for "+n);return i instanceof Nt?i:null},t.prototype.hasIndex=function(n){return Ve(this.indexSet_,n.toString())},t.prototype.addIndex=function(n,i){A(n!==gt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var o=[],a=!1,l=i.getIterator(G.Wrap),h=l.getNext();h;)a=a||n.isDefinedOn(h.node),o.push(h),h=l.getNext();var p;a?p=qo(o,n.getCompare()):p=sr;var f=n.toString(),m=zt({},this.indexSet_);m[f]=n;var g=zt({},this.indexes_);return g[f]=p,new t(g,m)},t.prototype.addToIndexes=function(n,i){var o=this,a=Wo(this.indexes_,function(l,h){var p=kn(o.indexSet_,h);if(A(p,"Missing index implementation for "+h),l===sr)if(p.isDefinedOn(n.node)){for(var f=[],m=i.getIterator(G.Wrap),g=m.getNext();g;)g.name!==n.name&&f.push(g),g=m.getNext();return f.push(n),qo(f,p.getCompare())}else return sr;else{var _=i.get(n.name),w=l;return _&&(w=w.remove(new G(n.name,_))),w.insert(n,n.node)}});return new t(a,this.indexSet_)},t.prototype.removeFromIndexes=function(n,i){var o=Wo(this.indexes_,function(a){if(a===sr)return a;var l=i.get(n.name);return l?a.remove(new G(n.name,l)):a});return new t(o,this.indexSet_)},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var li,F=function(){function t(n,i,o){this.children_=n,this.priorityNode_=i,this.indexMap_=o,this.lazyHash_=null,this.priorityNode_&&Kv(this.priorityNode_),this.children_.isEmpty()&&A(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return li||(li=new t(new Nt(ql),null,zo.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||li},t.prototype.updatePriority=function(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)},t.prototype.getImmediateChild=function(n){if(n===".priority")return this.getPriority();var i=this.children_.get(n);return i===null?li:i},t.prototype.getChild=function(n){var i=V(n);return i===null?this:this.getImmediateChild(i).getChild(J(n))},t.prototype.hasChild=function(n){return this.children_.get(n)!==null},t.prototype.updateImmediateChild=function(n,i){if(A(i,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(i);var o=new G(n,i),a=void 0,l=void 0;i.isEmpty()?(a=this.children_.remove(n),l=this.indexMap_.removeFromIndexes(o,this.children_)):(a=this.children_.insert(n,i),l=this.indexMap_.addToIndexes(o,this.children_));var h=a.isEmpty()?li:this.priorityNode_;return new t(a,h,l)},t.prototype.updateChild=function(n,i){var o=V(n);if(o===null)return i;A(V(n)!==".priority"||Yt(n)===1,".priority must be the last token in a path");var a=this.getImmediateChild(o).updateChild(J(n),i);return this.updateImmediateChild(o,a)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(n){if(this.isEmpty())return null;var i={},o=0,a=0,l=!0;if(this.forEachChild(ee,function(f,m){i[f]=m.val(n),o++,l&&t.INTEGER_REGEXP_.test(f)?a=Math.max(a,Number(f)):l=!1}),!n&&l&&a<2*o){var h=[];for(var p in i)h[p]=i[p];return h}else return n&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i},t.prototype.hash=function(){if(this.lazyHash_===null){var n="";this.getPriority().isEmpty()||(n+="priority:"+zv(this.getPriority().val())+":"),this.forEachChild(ee,function(i,o){var a=o.hash();a!==""&&(n+=":"+i+":"+a)}),this.lazyHash_=n===""?"":bv(n)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(n,i,o){var a=this.resolveIndex_(o);if(a){var l=a.getPredecessorKey(new G(n,i));return l?l.name:null}else return this.children_.getPredecessorKey(n)},t.prototype.getFirstChildName=function(n){var i=this.resolveIndex_(n);if(i){var o=i.minKey();return o&&o.name}else return this.children_.minKey()},t.prototype.getFirstChild=function(n){var i=this.getFirstChildName(n);return i?new G(i,this.children_.get(i)):null},t.prototype.getLastChildName=function(n){var i=this.resolveIndex_(n);if(i){var o=i.maxKey();return o&&o.name}else return this.children_.maxKey()},t.prototype.getLastChild=function(n){var i=this.getLastChildName(n);return i?new G(i,this.children_.get(i)):null},t.prototype.forEachChild=function(n,i){var o=this.resolveIndex_(n);return o?o.inorderTraversal(function(a){return i(a.name,a.node)}):this.children_.inorderTraversal(i)},t.prototype.getIterator=function(n){return this.getIteratorFrom(n.minPost(),n)},t.prototype.getIteratorFrom=function(n,i){var o=this.resolveIndex_(i);if(o)return o.getIteratorFrom(n,function(h){return h});for(var a=this.children_.getIteratorFrom(n.name,G.Wrap),l=a.peek();l!=null&&i.compare(l,n)<0;)a.getNext(),l=a.peek();return a},t.prototype.getReverseIterator=function(n){return this.getReverseIteratorFrom(n.maxPost(),n)},t.prototype.getReverseIteratorFrom=function(n,i){var o=this.resolveIndex_(i);if(o)return o.getReverseIteratorFrom(n,function(h){return h});for(var a=this.children_.getReverseIteratorFrom(n.name,G.Wrap),l=a.peek();l!=null&&i.compare(l,n)>0;)a.getNext(),l=a.peek();return a},t.prototype.compareTo=function(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===Ai?-1:0},t.prototype.withIndex=function(n){if(n===gt||this.indexMap_.hasIndex(n))return this;var i=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,i)},t.prototype.isIndexed=function(n){return n===gt||this.indexMap_.hasIndex(n)},t.prototype.equals=function(n){if(n===this)return!0;if(n.isLeafNode())return!1;var i=n;if(this.getPriority().equals(i.getPriority()))if(this.children_.count()===i.children_.count()){for(var o=this.getIterator(ee),a=i.getIterator(ee),l=o.getNext(),h=a.getNext();l&&h;){if(l.name!==h.name||!l.node.equals(h.node))return!1;l=o.getNext(),h=a.getNext()}return l===null&&h===null}else return!1;else return!1},t.prototype.resolveIndex_=function(n){return n===gt?null:this.indexMap_.get(n.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),Q0=function(t){ae(n,t);function n(){return t.call(this,new Nt(ql),F.EMPTY_NODE,zo.Default)||this}return n.prototype.compareTo=function(i){return i===this?0:1},n.prototype.equals=function(i){return i===this},n.prototype.getPriority=function(){return this},n.prototype.getImmediateChild=function(i){return F.EMPTY_NODE},n.prototype.isEmpty=function(){return!1},n}(F),Ai=new Q0;Object.defineProperties(G,{MIN:{value:new G(Rt,F.EMPTY_NODE)},MAX:{value:new G(_t,Ai)}});qv.__EMPTY_NODE=F.EMPTY_NODE;hr.__childrenNodeConstructor=F;H0(Ai);q0(Ai);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var X0=!0;function se(t,n){if(n===void 0&&(n=null),t===null)return F.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(n=t[".priority"]),A(n===null||typeof n=="string"||typeof n=="number"||typeof n=="object"&&".sv"in n,"Invalid priority type found: "+typeof n),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){var i=t;return new hr(i,se(n))}if(!(t instanceof Array)&&X0){var o=[],a=!1,l=t;if(ge(l,function(m,g){if(m.substring(0,1)!=="."){var _=se(g);_.isEmpty()||(a=a||!_.getPriority().isEmpty(),o.push(new G(m,_)))}}),o.length===0)return F.EMPTY_NODE;var h=qo(o,B0,function(m){return m.name},ql);if(a){var p=qo(o,ee.getCompare());return new F(h,se(n),new zo({".priority":p},{".priority":ee}))}else return new F(h,se(n),zo.Default)}else{var f=F.EMPTY_NODE;return ge(t,function(m,g){if(Ve(t,m)&&m.substring(0,1)!=="."){var _=se(g);(_.isLeafNode()||!_.isEmpty())&&(f=f.updateImmediateChild(m,_))}}),f.updatePriority(se(n))}}G0(se);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zl=function(t){ae(n,t);function n(i){var o=t.call(this)||this;return o.indexPath_=i,A(!W(i)&&V(i)!==".priority","Can't create PathIndex with empty path or .priority key"),o}return n.prototype.extractChild=function(i){return i.getChild(this.indexPath_)},n.prototype.isDefinedOn=function(i){return!i.getChild(this.indexPath_).isEmpty()},n.prototype.compare=function(i,o){var a=this.extractChild(i.node),l=this.extractChild(o.node),h=a.compareTo(l);return h===0?Pn(i.name,o.name):h},n.prototype.makePost=function(i,o){var a=se(i),l=F.EMPTY_NODE.updateChild(this.indexPath_,a);return new G(o,l)},n.prototype.maxPost=function(){var i=F.EMPTY_NODE.updateChild(this.indexPath_,Ai);return new G(_t,i)},n.prototype.toString=function(){return _i(this.indexPath_,0).join("/")},n}(is);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $0=function(t){ae(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.compare=function(i,o){var a=i.node.compareTo(o.node);return a===0?Pn(i.name,o.name):a},n.prototype.isDefinedOn=function(i){return!0},n.prototype.indexedValueChanged=function(i,o){return!i.equals(o)},n.prototype.minPost=function(){return G.MIN},n.prototype.maxPost=function(){return G.MAX},n.prototype.makePost=function(i,o){var a=se(i);return new G(o,a)},n.prototype.toString=function(){return".value"},n}(is),Kl=new $0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fr="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",gl="-",Xv="z",$v=786,J0=function(){var t=0,n=[];return function(i){var o=i===t;t=i;var a,l=new Array(8);for(a=7;a>=0;a--)l[a]=fr.charAt(i%64),i=Math.floor(i/64);A(i===0,"Cannot push at time == 0");var h=l.join("");if(o){for(a=11;a>=0&&n[a]===63;a--)n[a]=0;n[a]++}else for(a=0;a<12;a++)n[a]=Math.floor(Math.random()*64);for(a=0;a<12;a++)h+=fr.charAt(n[a]);return A(h.length===20,"nextPushId: Length should be 20."),h}}(),kp=function(t){if(t===""+jl)return gl;var n=Ho(t);if(n!=null)return""+(n+1);for(var i=new Array(t.length),o=0;o<i.length;o++)i[o]=t.charAt(o);if(i.length<$v)return i.push(gl),i.join("");for(var a=i.length-1;a>=0&&i[a]===Xv;)a--;if(a===-1)return _t;var l=i[a],h=fr.charAt(fr.indexOf(l)+1);return i[a]=h,i.slice(0,a+1).join("")},Rp=function(t){if(t===""+Sv)return Rt;var n=Ho(t);if(n!=null)return""+(n-1);for(var i=new Array(t.length),o=0;o<i.length;o++)i[o]=t.charAt(o);return i[i.length-1]===gl?i.length===1?""+jl:(delete i[i.length-1],i.join("")):(i[i.length-1]=fr.charAt(fr.indexOf(i[i.length-1])-1),i.join("")+Xv.repeat($v-i.length))};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jv(t){return{type:"value",snapshotNode:t}}function dr(t,n){return{type:"child_added",snapshotNode:n,childName:t}}function wi(t,n){return{type:"child_removed",snapshotNode:n,childName:t}}function bi(t,n,i){return{type:"child_changed",snapshotNode:n,childName:t,oldSnap:i}}function Z0(t,n){return{type:"child_moved",snapshotNode:n,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yl=function(){function t(n){this.index_=n}return t.prototype.updateChild=function(n,i,o,a,l,h){A(n.isIndexed(this.index_),"A node must be indexed if only a child is updated");var p=n.getImmediateChild(i);return p.getChild(a).equals(o.getChild(a))&&p.isEmpty()===o.isEmpty()||(h!=null&&(o.isEmpty()?n.hasChild(i)?h.trackChildChange(wi(i,p)):A(n.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):p.isEmpty()?h.trackChildChange(dr(i,o)):h.trackChildChange(bi(i,o,p))),n.isLeafNode()&&o.isEmpty())?n:n.updateImmediateChild(i,o).withIndex(this.index_)},t.prototype.updateFullNode=function(n,i,o){return o!=null&&(n.isLeafNode()||n.forEachChild(ee,function(a,l){i.hasChild(a)||o.trackChildChange(wi(a,l))}),i.isLeafNode()||i.forEachChild(ee,function(a,l){if(n.hasChild(a)){var h=n.getImmediateChild(a);h.equals(l)||o.trackChildChange(bi(a,l,h))}else o.trackChildChange(dr(a,l))})),i.withIndex(this.index_)},t.prototype.updatePriority=function(n,i){return n.isEmpty()?F.EMPTY_NODE:n.updatePriority(i)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zv=function(){function t(n){this.indexedFilter_=new Yl(n.getIndex()),this.index_=n.getIndex(),this.startPost_=t.getStartPost_(n),this.endPost_=t.getEndPost_(n)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(n){return this.index_.compare(this.getStartPost(),n)<=0&&this.index_.compare(n,this.getEndPost())<=0},t.prototype.updateChild=function(n,i,o,a,l,h){return this.matches(new G(i,o))||(o=F.EMPTY_NODE),this.indexedFilter_.updateChild(n,i,o,a,l,h)},t.prototype.updateFullNode=function(n,i,o){i.isLeafNode()&&(i=F.EMPTY_NODE);var a=i.withIndex(this.index_);a=a.updatePriority(F.EMPTY_NODE);var l=this;return i.forEachChild(ee,function(h,p){l.matches(new G(h,p))||(a=a.updateImmediateChild(h,F.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(n,a,o)},t.prototype.updatePriority=function(n,i){return n},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(n){if(n.hasStart()){var i=n.getIndexStartName();return n.getIndex().makePost(n.getIndexStartValue(),i)}else return n.getIndex().minPost()},t.getEndPost_=function(n){if(n.hasEnd()){var i=n.getIndexEndName();return n.getIndex().makePost(n.getIndexEndValue(),i)}else return n.getIndex().maxPost()},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var eE=function(){function t(n){this.rangedFilter_=new Zv(n),this.index_=n.getIndex(),this.limit_=n.getLimit(),this.reverse_=!n.isViewFromLeft()}return t.prototype.updateChild=function(n,i,o,a,l,h){return this.rangedFilter_.matches(new G(i,o))||(o=F.EMPTY_NODE),n.getImmediateChild(i).equals(o)?n:n.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(n,i,o,a,l,h):this.fullLimitUpdateChild_(n,i,o,l,h)},t.prototype.updateFullNode=function(n,i,o){var a;if(i.isLeafNode()||i.isEmpty())a=F.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<i.numChildren()&&i.isIndexed(this.index_)){a=F.EMPTY_NODE.withIndex(this.index_);var l=void 0;this.reverse_?l=i.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):l=i.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var h=0;l.hasNext()&&h<this.limit_;){var p=l.getNext(),f=void 0;if(this.reverse_?f=this.index_.compare(this.rangedFilter_.getStartPost(),p)<=0:f=this.index_.compare(p,this.rangedFilter_.getEndPost())<=0,f)a=a.updateImmediateChild(p.name,p.node),h++;else break}}else{a=i.withIndex(this.index_),a=a.updatePriority(F.EMPTY_NODE);var m=void 0,g=void 0,_=void 0,l=void 0;if(this.reverse_){l=a.getReverseIterator(this.index_),m=this.rangedFilter_.getEndPost(),g=this.rangedFilter_.getStartPost();var w=this.index_.getCompare();_=function(C,P){return w(P,C)}}else l=a.getIterator(this.index_),m=this.rangedFilter_.getStartPost(),g=this.rangedFilter_.getEndPost(),_=this.index_.getCompare();for(var h=0,E=!1;l.hasNext();){var p=l.getNext();!E&&_(m,p)<=0&&(E=!0);var f=E&&h<this.limit_&&_(p,g)<=0;f?h++:a=a.updateImmediateChild(p.name,F.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(n,a,o)},t.prototype.updatePriority=function(n,i){return n},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(n,i,o,a,l){var h;if(this.reverse_){var p=this.index_.getCompare();h=function(q,ue){return p(ue,q)}}else h=this.index_.getCompare();var f=n;A(f.numChildren()===this.limit_,"");var m=new G(i,o),g=this.reverse_?f.getFirstChild(this.index_):f.getLastChild(this.index_),_=this.rangedFilter_.matches(m);if(f.hasChild(i)){for(var w=f.getImmediateChild(i),E=a.getChildAfterChild(this.index_,g,this.reverse_);E!=null&&(E.name===i||f.hasChild(E.name));)E=a.getChildAfterChild(this.index_,E,this.reverse_);var S=E==null?1:h(E,m),N=_&&!o.isEmpty()&&S>=0;if(N)return l!=null&&l.trackChildChange(bi(i,o,w)),f.updateImmediateChild(i,o);l!=null&&l.trackChildChange(wi(i,w));var C=f.updateImmediateChild(i,F.EMPTY_NODE),P=E!=null&&this.rangedFilter_.matches(E);return P?(l!=null&&l.trackChildChange(dr(E.name,E.node)),C.updateImmediateChild(E.name,E.node)):C}else return o.isEmpty()?n:_&&h(g,m)>=0?(l!=null&&(l.trackChildChange(wi(g.name,g.node)),l.trackChildChange(dr(i,o))),f.updateImmediateChild(i,o).updateImmediateChild(g.name,F.EMPTY_NODE)):n},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var em=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ee}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"},t.prototype.getIndexStartValue=function(){return A(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return A(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Rt},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return A(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return A(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:_t},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&this.viewFrom_!==""},t.prototype.getLimit=function(){return A(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===ee},t.prototype.copy=function(){var n=new t;return n.limitSet_=this.limitSet_,n.limit_=this.limit_,n.startSet_=this.startSet_,n.indexStartValue_=this.indexStartValue_,n.startNameSet_=this.startNameSet_,n.indexStartName_=this.indexStartName_,n.endSet_=this.endSet_,n.indexEndValue_=this.indexEndValue_,n.endNameSet_=this.endNameSet_,n.indexEndName_=this.indexEndName_,n.index_=this.index_,n.viewFrom_=this.viewFrom_,n},t}();function tE(t){return t.loadsAllData()?new Yl(t.getIndex()):t.hasLimit()?new eE(t):new Zv(t)}function nE(t,n){var i=t.copy();return i.limitSet_=!0,i.limit_=n,i.viewFrom_="l",i}function rE(t,n){var i=t.copy();return i.limitSet_=!0,i.limit_=n,i.viewFrom_="r",i}function yl(t,n,i){var o=t.copy();return o.startSet_=!0,n===void 0&&(n=null),o.indexStartValue_=n,i!=null?(o.startNameSet_=!0,o.indexStartName_=i):(o.startNameSet_=!1,o.indexStartName_=""),o}function iE(t,n,i){var o;if(t.index_===gt)typeof n=="string"&&(n=kp(n)),o=yl(t,n,i);else{var a=void 0;i==null?a=_t:a=kp(i),o=yl(t,n,a)}return o.startAfterSet_=!0,o}function _l(t,n,i){var o=t.copy();return o.endSet_=!0,n===void 0&&(n=null),o.indexEndValue_=n,i!==void 0?(o.endNameSet_=!0,o.indexEndName_=i):(o.endNameSet_=!1,o.indexEndName_=""),o}function oE(t,n,i){var o,a;return t.index_===gt?(typeof n=="string"&&(n=Rp(n)),a=_l(t,n,i)):(i==null?o=Rt:o=Rp(i),a=_l(t,n,o)),a.endBeforeSet_=!0,a}function os(t,n){var i=t.copy();return i.index_=n,i}function Op(t){var n={};if(t.isDefault())return n;var i;return t.index_===ee?i="$priority":t.index_===Kl?i="$value":t.index_===gt?i="$key":(A(t.index_ instanceof zl,"Unrecognized index type!"),i=t.index_.toString()),n.orderBy=me(i),t.startSet_&&(n.startAt=me(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+me(t.indexStartName_))),t.endSet_&&(n.endAt=me(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+me(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_),n}function Pp(t){var n={};if(t.startSet_&&(n.sp=t.indexStartValue_,t.startNameSet_&&(n.sn=t.indexStartName_)),t.endSet_&&(n.ep=t.indexEndValue_,t.endNameSet_&&(n.en=t.indexEndName_)),t.limitSet_){n.l=t.limit_;var i=t.viewFrom_;i===""&&(t.isViewFromLeft()?i="l":i="r"),n.vf=i}return t.index_!==ee&&(n.i=t.index_.toString()),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sE=function(t){ae(n,t);function n(i,o,a,l){var h=t.call(this)||this;return h.repoInfo_=i,h.onDataUpdate_=o,h.authTokenProvider_=a,h.appCheckTokenProvider_=l,h.log_=Ci("p:rest:"),h.listens_={},h}return n.prototype.reportStats=function(i){throw new Error("Method not implemented.")},n.getListenId_=function(i,o){return o!==void 0?"tag$"+o:(A(i._queryParams.isDefault(),"should have a tag if it's not a default query."),i._path.toString())},n.prototype.listen=function(i,o,a,l){var h=this,p=i._path.toString();this.log_("Listen called for "+p+" "+i._queryIdentifier);var f=n.getListenId_(i,a),m={};this.listens_[f]=m;var g=Op(i._queryParams);this.restRequest_(p+".json",g,function(_,w){var E=w;if(_===404&&(E=null,_=null),_===null&&h.onDataUpdate_(p,E,!1,a),kn(h.listens_,f)===m){var S;_?_===401?S="permission_denied":S="rest_error:"+_:S="ok",l(S,null)}})},n.prototype.unlisten=function(i,o){var a=n.getListenId_(i,o);delete this.listens_[a]},n.prototype.get=function(i){var o=this,a=Op(i._queryParams),l=i._path.toString(),h=new De;return this.restRequest_(l+".json",a,function(p,f){var m=f;p===404&&(m=null,p=null),p===null?(o.onDataUpdate_(l,m,!1,null),h.resolve(m)):h.reject(new Error(m))}),h.promise},n.prototype.refreshAuthToken=function(i){},n.prototype.restRequest_=function(i,o,a){var l=this;return o===void 0&&(o={}),o.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(function(h){var p=Ce(h,2),f=p[0],m=p[1];f&&f.accessToken&&(o.auth=f.accessToken),m&&m.token&&(o.ac=m.token);var g=(l.repoInfo_.secure?"https://":"http://")+l.repoInfo_.host+i+"?ns="+l.repoInfo_.namespace+ub(o);l.log_("Sending REST request for "+g);var _=new XMLHttpRequest;_.onreadystatechange=function(){if(a&&_.readyState===4){l.log_("REST Response for "+g+" received. status:",_.status,"response:",_.responseText);var w=null;if(_.status>=200&&_.status<300){try{w=yi(_.responseText)}catch{Ee("Failed to parse JSON response for "+g+": "+_.responseText)}a(null,w)}else _.status!==401&&_.status!==404&&Ee("Got unsuccessful REST response for "+g+" Status: "+_.status),a(_.status);a=null}},_.open("GET",g,!0),_.send()})},n}(Wv);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var aE=function(){function t(){this.rootNode_=F.EMPTY_NODE}return t.prototype.getNode=function(n){return this.rootNode_.getChild(n)},t.prototype.updateSnapshot=function(n,i){this.rootNode_=this.rootNode_.updateChild(n,i)},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ko(){return{value:null,children:new Map}}function yr(t,n,i){if(W(n))t.value=i,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(n,i);else{var o=V(n);t.children.has(o)||t.children.set(o,Ko());var a=t.children.get(o);n=J(n),yr(a,n,i)}}function wl(t,n){if(W(n))return t.value=null,t.children.clear(),!0;if(t.value!==null){if(t.value.isLeafNode())return!1;var i=t.value;return t.value=null,i.forEachChild(ee,function(l,h){yr(t,new Y(l),h)}),wl(t,n)}else if(t.children.size>0){var o=V(n);if(n=J(n),t.children.has(o)){var a=wl(t.children.get(o),n);a&&t.children.delete(o)}return t.children.size===0}else return!0}function bl(t,n,i){t.value!==null?i(n,t.value):uE(t,function(o,a){var l=new Y(n.toString()+"/"+o);bl(a,l,i)})}function uE(t,n){t.children.forEach(function(i,o){n(o,i)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tm=function(){function t(n){this.collection_=n,this.last_=null}return t.prototype.get=function(){var n=this.collection_.get(),i=zt({},n);return this.last_&&ge(this.last_,function(o,a){i[o]=i[o]-a}),this.last_=n,i},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dp=10*1e3,lE=30*1e3,cE=5*60*1e3,hE=function(){function t(n,i){this.server_=i,this.statsToReport_={},this.statsListener_=new tm(n);var o=Dp+(lE-Dp)*Math.random();hi(this.reportStats_.bind(this),Math.floor(o))}return t.prototype.reportStats_=function(){var n=this,i=this.statsListener_.get(),o={},a=!1;ge(i,function(l,h){h>0&&Ve(n.statsToReport_,l)&&(o[l]=h,a=!0)}),a&&this.server_.reportStats(o),hi(this.reportStats_.bind(this),Math.floor(Math.random()*2*cE))},t}();function fE(t,n){t.statsToReport_[n]=!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var at;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(at||(at={}));function Ql(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Xl(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function $l(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dE=function(){function t(n,i,o){this.path=n,this.affectedTree=i,this.revert=o,this.type=at.ACK_USER_WRITE,this.source=Ql()}return t.prototype.operationForChild=function(n){if(W(this.path)){if(this.affectedTree.value!=null)return A(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var i=this.affectedTree.subtree(new Y(n));return new t(K(),i,this.revert)}else return A(V(this.path)===n,"operationForChild called for unrelated child."),new t(J(this.path),this.affectedTree,this.revert)},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nm=function(){function t(n,i){this.source=n,this.path=i,this.type=at.LISTEN_COMPLETE}return t.prototype.operationForChild=function(n){return W(this.path)?new t(this.source,K()):new t(this.source,J(this.path))},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ss=function(){function t(n,i,o){this.source=n,this.path=i,this.snap=o,this.type=at.OVERWRITE}return t.prototype.operationForChild=function(n){return W(this.path)?new t(this.source,K(),this.snap.getImmediateChild(n)):new t(this.source,J(this.path),this.snap)},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jl=function(){function t(n,i,o){this.source=n,this.path=i,this.children=o,this.type=at.MERGE}return t.prototype.operationForChild=function(n){if(W(this.path)){var i=this.children.subtree(new Y(n));return i.isEmpty()?null:i.value?new ss(this.source,K(),i.value):new t(this.source,K(),i)}else return A(V(this.path)===n,"Can't get a merge for a child not on the path of the operation"),new t(this.source,J(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qt=function(){function t(n,i,o){this.node_=n,this.fullyInitialized_=i,this.filtered_=o}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(n){if(W(n))return this.isFullyInitialized()&&!this.filtered_;var i=V(n);return this.isCompleteForChild(i)},t.prototype.isCompleteForChild=function(n){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(n)},t.prototype.getNode=function(){return this.node_},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pE=function(){function t(n){this.query_=n,this.index_=this.query_._queryParams.getIndex()}return t}();function vE(t,n,i,o){var a=[],l=[];return n.forEach(function(h){h.type==="child_changed"&&t.index_.indexedValueChanged(h.oldSnap,h.snapshotNode)&&l.push(Z0(h.childName,h.snapshotNode))}),ci(t,a,"child_removed",n,o,i),ci(t,a,"child_added",n,o,i),ci(t,a,"child_moved",l,o,i),ci(t,a,"child_changed",n,o,i),ci(t,a,"value",n,o,i),a}function ci(t,n,i,o,a,l){var h=o.filter(function(p){return p.type===i});h.sort(function(p,f){return gE(t,p,f)}),h.forEach(function(p){var f=mE(t,p,l);a.forEach(function(m){m.respondsTo(p.type)&&n.push(m.createEvent(f,t.query_))})})}function mE(t,n,i){return n.type==="value"||n.type==="child_removed"||(n.prevName=i.getPredecessorChildName(n.childName,n.snapshotNode,t.index_)),n}function gE(t,n,i){if(n.childName==null||i.childName==null)throw mr("Should only compare child_ events.");var o=new G(n.childName,n.snapshotNode),a=new G(i.childName,i.snapshotNode);return t.index_.compare(o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function as(t,n){return{eventCache:t,serverCache:n}}function di(t,n,i,o){return as(new Qt(n,i,o),t.serverCache)}function rm(t,n,i,o){return as(t.eventCache,new Qt(n,i,o))}function Yo(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Rn(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ul,yE=function(){return ul||(ul=new Nt(Qb)),ul},We=function(){function t(n,i){i===void 0&&(i=yE()),this.value=n,this.children=i}return t.fromObject=function(n){var i=new t(null);return ge(n,function(o,a){i=i.set(new Y(o),a)}),i},t.prototype.isEmpty=function(){return this.value===null&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(n,i){if(this.value!=null&&i(this.value))return{path:K(),value:this.value};if(W(n))return null;var o=V(n),a=this.children.get(o);if(a!==null){var l=a.findRootMostMatchingPathAndValue(J(n),i);if(l!=null){var h=re(new Y(o),l.path);return{path:h,value:l.value}}else return null}else return null},t.prototype.findRootMostValueAndPath=function(n){return this.findRootMostMatchingPathAndValue(n,function(){return!0})},t.prototype.subtree=function(n){if(W(n))return this;var i=V(n),o=this.children.get(i);return o!==null?o.subtree(J(n)):new t(null)},t.prototype.set=function(n,i){if(W(n))return new t(i,this.children);var o=V(n),a=this.children.get(o)||new t(null),l=a.set(J(n),i),h=this.children.insert(o,l);return new t(this.value,h)},t.prototype.remove=function(n){if(W(n))return this.children.isEmpty()?new t(null):new t(null,this.children);var i=V(n),o=this.children.get(i);if(o){var a=o.remove(J(n)),l=void 0;return a.isEmpty()?l=this.children.remove(i):l=this.children.insert(i,a),this.value===null&&l.isEmpty()?new t(null):new t(this.value,l)}else return this},t.prototype.get=function(n){if(W(n))return this.value;var i=V(n),o=this.children.get(i);return o?o.get(J(n)):null},t.prototype.setTree=function(n,i){if(W(n))return i;var o=V(n),a=this.children.get(o)||new t(null),l=a.setTree(J(n),i),h=void 0;return l.isEmpty()?h=this.children.remove(o):h=this.children.insert(o,l),new t(this.value,h)},t.prototype.fold=function(n){return this.fold_(K(),n)},t.prototype.fold_=function(n,i){var o={};return this.children.inorderTraversal(function(a,l){o[a]=l.fold_(re(n,a),i)}),i(n,this.value,o)},t.prototype.findOnPath=function(n,i){return this.findOnPath_(n,K(),i)},t.prototype.findOnPath_=function(n,i,o){var a=this.value?o(i,this.value):!1;if(a)return a;if(W(n))return null;var l=V(n),h=this.children.get(l);return h?h.findOnPath_(J(n),re(i,l),o):null},t.prototype.foreachOnPath=function(n,i){return this.foreachOnPath_(n,K(),i)},t.prototype.foreachOnPath_=function(n,i,o){if(W(n))return this;this.value&&o(i,this.value);var a=V(n),l=this.children.get(a);return l?l.foreachOnPath_(J(n),re(i,a),o):new t(null)},t.prototype.foreach=function(n){this.foreach_(K(),n)},t.prototype.foreach_=function(n,i){this.children.inorderTraversal(function(o,a){a.foreach_(re(n,o),i)}),this.value&&i(n,this.value)},t.prototype.foreachChild=function(n){this.children.inorderTraversal(function(i,o){o.value&&n(i,o.value)})},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kt=function(){function t(n){this.writeTree_=n}return t.empty=function(){return new t(new We(null))},t}();function pi(t,n,i){if(W(n))return new kt(new We(i));var o=t.writeTree_.findRootMostValueAndPath(n);if(o!=null){var a=o.path,l=o.value,h=Ae(a,n);return l=l.updateChild(h,i),new kt(t.writeTree_.set(a,l))}else{var p=new We(i),f=t.writeTree_.setTree(n,p);return new kt(f)}}function El(t,n,i){var o=t;return ge(i,function(a,l){o=pi(o,re(n,a),l)}),o}function xp(t,n){if(W(n))return kt.empty();var i=t.writeTree_.setTree(n,new We(null));return new kt(i)}function Il(t,n){return Dn(t,n)!=null}function Dn(t,n){var i=t.writeTree_.findRootMostValueAndPath(n);return i!=null?t.writeTree_.get(i.path).getChild(Ae(i.path,n)):null}function Lp(t){var n=[],i=t.writeTree_.value;return i!=null?i.isLeafNode()||i.forEachChild(ee,function(o,a){n.push(new G(o,a))}):t.writeTree_.children.inorderTraversal(function(o,a){a.value!=null&&n.push(new G(o,a.value))}),n}function Gt(t,n){if(W(n))return t;var i=Dn(t,n);return i!=null?new kt(new We(i)):new kt(t.writeTree_.subtree(n))}function Tl(t){return t.writeTree_.isEmpty()}function pr(t,n){return im(K(),t.writeTree_,n)}function im(t,n,i){if(n.value!=null)return i.updateChild(t,n.value);var o=null;return n.children.inorderTraversal(function(a,l){a===".priority"?(A(l.value!==null,"Priority writes must always be leaf nodes"),o=l.value):i=im(re(t,a),l,i)}),!i.getChild(t).isEmpty()&&o!==null&&(i=i.updateChild(re(t,".priority"),o)),i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function us(t,n){return um(n,t)}function _E(t,n,i,o,a){A(o>t.lastWriteId,"Stacking an older write on top of newer ones"),a===void 0&&(a=!0),t.allWrites.push({path:n,snap:i,writeId:o,visible:a}),a&&(t.visibleWrites=pi(t.visibleWrites,n,i)),t.lastWriteId=o}function wE(t,n,i,o){A(o>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:n,children:i,writeId:o,visible:!0}),t.visibleWrites=El(t.visibleWrites,n,i),t.lastWriteId=o}function bE(t,n){for(var i=0;i<t.allWrites.length;i++){var o=t.allWrites[i];if(o.writeId===n)return o}return null}function EE(t,n){var i=t.allWrites.findIndex(function(m){return m.writeId===n});A(i>=0,"removeWrite called with nonexistent writeId.");var o=t.allWrites[i];t.allWrites.splice(i,1);for(var a=o.visible,l=!1,h=t.allWrites.length-1;a&&h>=0;){var p=t.allWrites[h];p.visible&&(h>=i&&IE(p,o.path)?a=!1:Ke(o.path,p.path)&&(l=!0)),h--}if(a){if(l)return TE(t),!0;if(o.snap)t.visibleWrites=xp(t.visibleWrites,o.path);else{var f=o.children;ge(f,function(m){t.visibleWrites=xp(t.visibleWrites,re(o.path,m))})}return!0}else return!1}function IE(t,n){if(t.snap)return Ke(t.path,n);for(var i in t.children)if(t.children.hasOwnProperty(i)&&Ke(re(t.path,i),n))return!0;return!1}function TE(t){t.visibleWrites=om(t.allWrites,SE,K()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function SE(t){return t.visible}function om(t,n,i){for(var o=kt.empty(),a=0;a<t.length;++a){var l=t[a];if(n(l)){var h=l.path,p=void 0;if(l.snap)Ke(i,h)?(p=Ae(i,h),o=pi(o,p,l.snap)):Ke(h,i)&&(p=Ae(h,i),o=pi(o,K(),l.snap.getChild(p)));else if(l.children){if(Ke(i,h))p=Ae(i,h),o=El(o,p,l.children);else if(Ke(h,i))if(p=Ae(h,i),W(p))o=El(o,K(),l.children);else{var f=kn(l.children,V(p));if(f){var m=f.getChild(J(p));o=pi(o,K(),m)}}}else throw mr("WriteRecord should have .snap or .children")}}return o}function sm(t,n,i,o,a){if(!o&&!a){var l=Dn(t.visibleWrites,n);if(l!=null)return l;var h=Gt(t.visibleWrites,n);if(Tl(h))return i;if(i==null&&!Il(h,K()))return null;var p=i||F.EMPTY_NODE;return pr(h,p)}else{var f=Gt(t.visibleWrites,n);if(!a&&Tl(f))return i;if(!a&&i==null&&!Il(f,K()))return null;var m=function(w){return(w.visible||a)&&(!o||!~o.indexOf(w.writeId))&&(Ke(w.path,n)||Ke(n,w.path))},g=om(t.allWrites,m,n),p=i||F.EMPTY_NODE;return pr(g,p)}}function CE(t,n,i){var o=F.EMPTY_NODE,a=Dn(t.visibleWrites,n);if(a)return a.isLeafNode()||a.forEachChild(ee,function(p,f){o=o.updateImmediateChild(p,f)}),o;if(i){var l=Gt(t.visibleWrites,n);return i.forEachChild(ee,function(p,f){var m=pr(Gt(l,new Y(p)),f);o=o.updateImmediateChild(p,m)}),Lp(l).forEach(function(p){o=o.updateImmediateChild(p.name,p.node)}),o}else{var h=Gt(t.visibleWrites,n);return Lp(h).forEach(function(p){o=o.updateImmediateChild(p.name,p.node)}),o}}function AE(t,n,i,o,a){A(o||a,"Either existingEventSnap or existingServerSnap must exist");var l=re(n,i);if(Il(t.visibleWrites,l))return null;var h=Gt(t.visibleWrites,l);return Tl(h)?a.getChild(i):pr(h,a.getChild(i))}function NE(t,n,i,o){var a=re(n,i),l=Dn(t.visibleWrites,a);if(l!=null)return l;if(o.isCompleteForChild(i)){var h=Gt(t.visibleWrites,a);return pr(h,o.getNode().getImmediateChild(i))}else return null}function kE(t,n){return Dn(t.visibleWrites,n)}function RE(t,n,i,o,a,l,h){var p,f=Gt(t.visibleWrites,n),m=Dn(f,K());if(m!=null)p=m;else if(i!=null)p=pr(f,i);else return[];if(p=p.withIndex(h),!p.isEmpty()&&!p.isLeafNode()){for(var g=[],_=h.getCompare(),w=l?p.getReverseIteratorFrom(o,h):p.getIteratorFrom(o,h),E=w.getNext();E&&g.length<a;)_(E,o)!==0&&g.push(E),E=w.getNext();return g}else return[]}function OE(){return{visibleWrites:kt.empty(),allWrites:[],lastWriteId:-1}}function Qo(t,n,i,o){return sm(t.writeTree,t.treePath,n,i,o)}function Zl(t,n){return CE(t.writeTree,t.treePath,n)}function Mp(t,n,i,o){return AE(t.writeTree,t.treePath,n,i,o)}function Xo(t,n){return kE(t.writeTree,re(t.treePath,n))}function PE(t,n,i,o,a,l){return RE(t.writeTree,t.treePath,n,i,o,a,l)}function ec(t,n,i){return NE(t.writeTree,t.treePath,n,i)}function am(t,n){return um(re(t.treePath,n),t.writeTree)}function um(t,n){return{treePath:t,writeTree:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var DE=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(n){var i=n.type,o=n.childName;A(i==="child_added"||i==="child_changed"||i==="child_removed","Only child changes supported for tracking"),A(o!==".priority","Only non-priority child changes can be tracked.");var a=this.changeMap.get(o);if(a){var l=a.type;if(i==="child_added"&&l==="child_removed")this.changeMap.set(o,bi(o,n.snapshotNode,a.snapshotNode));else if(i==="child_removed"&&l==="child_added")this.changeMap.delete(o);else if(i==="child_removed"&&l==="child_changed")this.changeMap.set(o,wi(o,a.oldSnap));else if(i==="child_changed"&&l==="child_added")this.changeMap.set(o,dr(o,n.snapshotNode));else if(i==="child_changed"&&l==="child_changed")this.changeMap.set(o,bi(o,n.snapshotNode,a.oldSnap));else throw mr("Illegal combination of changes: "+n+" occurred after "+a)}else this.changeMap.set(o,n)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xE=function(){function t(){}return t.prototype.getCompleteChild=function(n){return null},t.prototype.getChildAfterChild=function(n,i,o){return null},t}(),lm=new xE,tc=function(){function t(n,i,o){o===void 0&&(o=null),this.writes_=n,this.viewCache_=i,this.optCompleteServerCache_=o}return t.prototype.getCompleteChild=function(n){var i=this.viewCache_.eventCache;if(i.isCompleteForChild(n))return i.getNode().getImmediateChild(n);var o=this.optCompleteServerCache_!=null?new Qt(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ec(this.writes_,n,o)},t.prototype.getChildAfterChild=function(n,i,o){var a=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Rn(this.viewCache_),l=PE(this.writes_,a,i,1,o,n);return l.length===0?null:l[0]},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LE(t){return{filter:t}}function ME(t,n){A(n.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),A(n.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function FE(t,n,i,o,a){var l=new DE,h,p;if(i.type===at.OVERWRITE){var f=i;f.source.fromUser?h=Sl(t,n,f.path,f.snap,o,a,l):(A(f.source.fromServer,"Unknown source."),p=f.source.tagged||n.serverCache.isFiltered()&&!W(f.path),h=$o(t,n,f.path,f.snap,o,a,p,l))}else if(i.type===at.MERGE){var m=i;m.source.fromUser?h=UE(t,n,m.path,m.children,o,a,l):(A(m.source.fromServer,"Unknown source."),p=m.source.tagged||n.serverCache.isFiltered(),h=Cl(t,n,m.path,m.children,o,a,p,l))}else if(i.type===at.ACK_USER_WRITE){var g=i;g.revert?h=BE(t,n,g.path,o,a,l):h=VE(t,n,g.path,g.affectedTree,o,a,l)}else if(i.type===at.LISTEN_COMPLETE)h=WE(t,n,i.path,o,l);else throw mr("Unknown operation type: "+i.type);var _=l.getChanges();return jE(n,h,_),{viewCache:h,changes:_}}function jE(t,n,i){var o=n.eventCache;if(o.isFullyInitialized()){var a=o.getNode().isLeafNode()||o.getNode().isEmpty(),l=Yo(t);(i.length>0||!t.eventCache.isFullyInitialized()||a&&!o.getNode().equals(l)||!o.getNode().getPriority().equals(l.getPriority()))&&i.push(Jv(Yo(n)))}}function cm(t,n,i,o,a,l){var h=n.eventCache;if(Xo(o,i)!=null)return n;var p=void 0,f=void 0;if(W(i))if(A(n.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),n.serverCache.isFiltered()){var m=Rn(n),g=m instanceof F?m:F.EMPTY_NODE,_=Zl(o,g);p=t.filter.updateFullNode(n.eventCache.getNode(),_,l)}else{var w=Qo(o,Rn(n));p=t.filter.updateFullNode(n.eventCache.getNode(),w,l)}else{var E=V(i);if(E===".priority"){A(Yt(i)===1,"Can't have a priority with additional path components");var S=h.getNode();f=n.serverCache.getNode();var N=Mp(o,i,S,f);N!=null?p=t.filter.updatePriority(S,N):p=h.getNode()}else{var C=J(i),P=void 0;if(h.isCompleteForChild(E)){f=n.serverCache.getNode();var q=Mp(o,i,h.getNode(),f);q!=null?P=h.getNode().getImmediateChild(E).updateChild(C,q):P=h.getNode().getImmediateChild(E)}else P=ec(o,E,n.serverCache);P!=null?p=t.filter.updateChild(h.getNode(),E,P,C,a,l):p=h.getNode()}}return di(n,p,h.isFullyInitialized()||W(i),t.filter.filtersNodes())}function $o(t,n,i,o,a,l,h,p){var f=n.serverCache,m,g=h?t.filter:t.filter.getIndexedFilter();if(W(i))m=g.updateFullNode(f.getNode(),o,null);else if(g.filtersNodes()&&!f.isFiltered()){var _=f.getNode().updateChild(i,o);m=g.updateFullNode(f.getNode(),_,null)}else{var w=V(i);if(!f.isCompleteForPath(i)&&Yt(i)>1)return n;var E=J(i),S=f.getNode().getImmediateChild(w),N=S.updateChild(E,o);w===".priority"?m=g.updatePriority(f.getNode(),N):m=g.updateChild(f.getNode(),w,N,E,lm,null)}var C=rm(n,m,f.isFullyInitialized()||W(i),g.filtersNodes()),P=new tc(a,C,l);return cm(t,C,i,a,P,p)}function Sl(t,n,i,o,a,l,h){var p=n.eventCache,f,m,g=new tc(a,n,l);if(W(i))m=t.filter.updateFullNode(n.eventCache.getNode(),o,h),f=di(n,m,!0,t.filter.filtersNodes());else{var _=V(i);if(_===".priority")m=t.filter.updatePriority(n.eventCache.getNode(),o),f=di(n,m,p.isFullyInitialized(),p.isFiltered());else{var w=J(i),E=p.getNode().getImmediateChild(_),S=void 0;if(W(w))S=o;else{var N=g.getCompleteChild(_);N!=null?Hl(w)===".priority"&&N.getChild(Hv(w)).isEmpty()?S=N:S=N.updateChild(w,o):S=F.EMPTY_NODE}if(E.equals(S))f=n;else{var C=t.filter.updateChild(p.getNode(),_,S,w,g,h);f=di(n,C,p.isFullyInitialized(),t.filter.filtersNodes())}}}return f}function Fp(t,n){return t.eventCache.isCompleteForChild(n)}function UE(t,n,i,o,a,l,h){var p=n;return o.foreach(function(f,m){var g=re(i,f);Fp(n,V(g))&&(p=Sl(t,p,g,m,a,l,h))}),o.foreach(function(f,m){var g=re(i,f);Fp(n,V(g))||(p=Sl(t,p,g,m,a,l,h))}),p}function jp(t,n,i){return i.foreach(function(o,a){n=n.updateChild(o,a)}),n}function Cl(t,n,i,o,a,l,h,p){if(n.serverCache.getNode().isEmpty()&&!n.serverCache.isFullyInitialized())return n;var f=n,m;W(i)?m=o:m=new We(null).setTree(i,o);var g=n.serverCache.getNode();return m.children.inorderTraversal(function(_,w){if(g.hasChild(_)){var E=n.serverCache.getNode().getImmediateChild(_),S=jp(t,E,w);f=$o(t,f,new Y(_),S,a,l,h,p)}}),m.children.inorderTraversal(function(_,w){var E=!n.serverCache.isCompleteForChild(_)&&w.value===void 0;if(!g.hasChild(_)&&!E){var S=n.serverCache.getNode().getImmediateChild(_),N=jp(t,S,w);f=$o(t,f,new Y(_),N,a,l,h,p)}}),f}function VE(t,n,i,o,a,l,h){if(Xo(a,i)!=null)return n;var p=n.serverCache.isFiltered(),f=n.serverCache;if(o.value!=null){if(W(i)&&f.isFullyInitialized()||f.isCompleteForPath(i))return $o(t,n,i,f.getNode().getChild(i),a,l,p,h);if(W(i)){var m=new We(null);return f.getNode().forEachChild(gt,function(_,w){m=m.set(new Y(_),w)}),Cl(t,n,i,m,a,l,p,h)}else return n}else{var g=new We(null);return o.foreach(function(_,w){var E=re(i,_);f.isCompleteForPath(E)&&(g=g.set(_,f.getNode().getChild(E)))}),Cl(t,n,i,g,a,l,p,h)}}function WE(t,n,i,o,a){var l=n.serverCache,h=rm(n,l.getNode(),l.isFullyInitialized()||W(i),l.isFiltered());return cm(t,h,i,o,lm,a)}function BE(t,n,i,o,a,l){var h;if(Xo(o,i)!=null)return n;var p=new tc(o,n,a),f=n.eventCache.getNode(),m=void 0;if(W(i)||V(i)===".priority"){var g=void 0;if(n.serverCache.isFullyInitialized())g=Qo(o,Rn(n));else{var _=n.serverCache.getNode();A(_ instanceof F,"serverChildren would be complete if leaf node"),g=Zl(o,_)}g=g,m=t.filter.updateFullNode(f,g,l)}else{var w=V(i),E=ec(o,w,n.serverCache);E==null&&n.serverCache.isCompleteForChild(w)&&(E=f.getImmediateChild(w)),E!=null?m=t.filter.updateChild(f,w,E,J(i),p,l):n.eventCache.getNode().hasChild(w)?m=t.filter.updateChild(f,w,F.EMPTY_NODE,J(i),p,l):m=f,m.isEmpty()&&n.serverCache.isFullyInitialized()&&(h=Qo(o,Rn(n)),h.isLeafNode()&&(m=t.filter.updateFullNode(m,h,l)))}return h=n.serverCache.isFullyInitialized()||Xo(o,K())!=null,di(n,m,h,t.filter.filtersNodes())}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var HE=function(){function t(n,i){this.query_=n,this.eventRegistrations_=[];var o=this.query_._queryParams,a=new Yl(o.getIndex()),l=tE(o);this.processor_=LE(l);var h=i.serverCache,p=i.eventCache,f=a.updateFullNode(F.EMPTY_NODE,h.getNode(),null),m=l.updateFullNode(F.EMPTY_NODE,p.getNode(),null),g=new Qt(f,h.isFullyInitialized(),a.filtersNodes()),_=new Qt(m,p.isFullyInitialized(),l.filtersNodes());this.viewCache_=as(_,g),this.eventGenerator_=new pE(this.query_)}return Object.defineProperty(t.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),t}();function GE(t){return t.viewCache_.serverCache.getNode()}function qE(t){return Yo(t.viewCache_)}function zE(t,n){var i=Rn(t.viewCache_);return i&&(t.query._queryParams.loadsAllData()||!W(n)&&!i.getImmediateChild(V(n)).isEmpty())?i.getChild(n):null}function Up(t){return t.eventRegistrations_.length===0}function KE(t,n){t.eventRegistrations_.push(n)}function Vp(t,n,i){var o=[];if(i){A(n==null,"A cancel should cancel all event registrations.");var a=t.query._path;t.eventRegistrations_.forEach(function(f){var m=f.createCancelEvent(i,a);m&&o.push(m)})}if(n){for(var l=[],h=0;h<t.eventRegistrations_.length;++h){var p=t.eventRegistrations_[h];if(!p.matches(n))l.push(p);else if(n.hasAnyCallback()){l=l.concat(t.eventRegistrations_.slice(h+1));break}}t.eventRegistrations_=l}else t.eventRegistrations_=[];return o}function Wp(t,n,i,o){n.type===at.MERGE&&n.source.queryId!==null&&(A(Rn(t.viewCache_),"We should always have a full cache before handling merges"),A(Yo(t.viewCache_),"Missing event cache, even though we have a server cache"));var a=t.viewCache_,l=FE(t.processor_,a,n,i,o);return ME(t.processor_,l.viewCache),A(l.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=l.viewCache,hm(t,l.changes,l.viewCache.eventCache.getNode(),null)}function YE(t,n){var i=t.viewCache_.eventCache,o=[];if(!i.getNode().isLeafNode()){var a=i.getNode();a.forEachChild(ee,function(l,h){o.push(dr(l,h))})}return i.isFullyInitialized()&&o.push(Jv(i.getNode())),hm(t,o,i.getNode(),n)}function hm(t,n,i,o){var a=o?[o]:t.eventRegistrations_;return vE(t.eventGenerator_,n,i,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jo,fm=function(){function t(){this.views=new Map}return t}();function QE(t){A(!Jo,"__referenceConstructor has already been defined"),Jo=t}function XE(){return A(Jo,"Reference.ts has not been loaded"),Jo}function $E(t){return t.views.size===0}function nc(t,n,i,o){var a,l,h=n.source.queryId;if(h!==null){var p=t.views.get(h);return A(p!=null,"SyncTree gave us an op for an invalid query."),Wp(p,n,i,o)}else{var f=[];try{for(var m=Ue(t.views.values()),g=m.next();!g.done;g=m.next()){var p=g.value;f=f.concat(Wp(p,n,i,o))}}catch(_){a={error:_}}finally{try{g&&!g.done&&(l=m.return)&&l.call(m)}finally{if(a)throw a.error}}return f}}function dm(t,n,i,o,a){var l=n._queryIdentifier,h=t.views.get(l);if(!h){var p=Qo(i,a?o:null),f=!1;p?f=!0:o instanceof F?(p=Zl(i,o),f=!1):(p=F.EMPTY_NODE,f=!1);var m=as(new Qt(p,f,!1),new Qt(o,a,!1));return new HE(n,m)}return h}function JE(t,n,i,o,a,l){var h=dm(t,n,o,a,l);return t.views.has(n._queryIdentifier)||t.views.set(n._queryIdentifier,h),KE(h,i),YE(h,i)}function ZE(t,n,i,o){var a,l,h=n._queryIdentifier,p=[],f=[],m=Xt(t);if(h==="default")try{for(var g=Ue(t.views.entries()),_=g.next();!_.done;_=g.next()){var w=Ce(_.value,2),E=w[0],S=w[1];f=f.concat(Vp(S,i,o)),Up(S)&&(t.views.delete(E),S.query._queryParams.loadsAllData()||p.push(S.query))}}catch(N){a={error:N}}finally{try{_&&!_.done&&(l=g.return)&&l.call(g)}finally{if(a)throw a.error}}else{var S=t.views.get(h);S&&(f=f.concat(Vp(S,i,o)),Up(S)&&(t.views.delete(h),S.query._queryParams.loadsAllData()||p.push(S.query)))}return m&&!Xt(t)&&p.push(new(XE())(n._repo,n._path)),{removed:p,events:f}}function pm(t){var n,i,o=[];try{for(var a=Ue(t.views.values()),l=a.next();!l.done;l=a.next()){var h=l.value;h.query._queryParams.loadsAllData()||o.push(h)}}catch(p){n={error:p}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return o}function qt(t,n){var i,o,a=null;try{for(var l=Ue(t.views.values()),h=l.next();!h.done;h=l.next()){var p=h.value;a=a||zE(p,n)}}catch(f){i={error:f}}finally{try{h&&!h.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}return a}function vm(t,n){var i=n._queryParams;if(i.loadsAllData())return ls(t);var o=n._queryIdentifier;return t.views.get(o)}function mm(t,n){return vm(t,n)!=null}function Xt(t){return ls(t)!=null}function ls(t){var n,i;try{for(var o=Ue(t.views.values()),a=o.next();!a.done;a=o.next()){var l=a.value;if(l.query._queryParams.loadsAllData())return l}}catch(h){n={error:h}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zo;function eI(t){A(!Zo,"__referenceConstructor has already been defined"),Zo=t}function tI(){return A(Zo,"Reference.ts has not been loaded"),Zo}var nI=1,Bp=function(){function t(n){this.listenProvider_=n,this.syncPointTree_=new We(null),this.pendingWriteTree_=OE(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return t}();function rc(t,n,i,o,a){return _E(t.pendingWriteTree_,n,i,o,a),a?_r(t,new ss(Ql(),n,i)):[]}function rI(t,n,i,o){wE(t.pendingWriteTree_,n,i,o);var a=We.fromObject(i);return _r(t,new Jl(Ql(),n,a))}function Ht(t,n,i){i===void 0&&(i=!1);var o=bE(t.pendingWriteTree_,n),a=EE(t.pendingWriteTree_,n);if(a){var l=new We(null);return o.snap!=null?l=l.set(K(),!0):ge(o.children,function(h){l=l.set(new Y(h),!0)}),_r(t,new dE(o.path,l,i))}else return[]}function Ni(t,n,i){return _r(t,new ss(Xl(),n,i))}function iI(t,n,i){var o=We.fromObject(i);return _r(t,new Jl(Xl(),n,o))}function oI(t,n){return _r(t,new nm(Xl(),n))}function sI(t,n,i){var o=ic(t,i);if(o){var a=oc(o),l=a.path,h=a.queryId,p=Ae(l,n),f=new nm($l(h),p);return sc(t,l,f)}else return[]}function Al(t,n,i,o){var a=n._path,l=t.syncPointTree_.get(a),h=[];if(l&&(n._queryIdentifier==="default"||mm(l,n))){var p=ZE(l,n,i,o);$E(l)&&(t.syncPointTree_=t.syncPointTree_.remove(a));var f=p.removed;h=p.events;var m=f.findIndex(function(q){return q._queryParams.loadsAllData()})!==-1,g=t.syncPointTree_.findOnPath(a,function(q,ue){return Xt(ue)});if(m&&!g){var _=t.syncPointTree_.subtree(a);if(!_.isEmpty())for(var w=cI(_),E=0;E<w.length;++E){var S=w[E],N=S.query,C=_m(t,S);t.listenProvider_.startListening(vi(N),es(t,N),C.hashFn,C.onComplete)}}if(!g&&f.length>0&&!o)if(m){var P=null;t.listenProvider_.stopListening(vi(n),P)}else f.forEach(function(q){var ue=t.queryToTagMap.get(hs(q));t.listenProvider_.stopListening(vi(q),ue)});hI(t,f)}return h}function aI(t,n,i,o){var a=ic(t,o);if(a!=null){var l=oc(a),h=l.path,p=l.queryId,f=Ae(h,n),m=new ss($l(p),f,i);return sc(t,h,m)}else return[]}function uI(t,n,i,o){var a=ic(t,o);if(a){var l=oc(a),h=l.path,p=l.queryId,f=Ae(h,n),m=We.fromObject(i),g=new Jl($l(p),f,m);return sc(t,h,g)}else return[]}function Hp(t,n,i){var o=n._path,a=null,l=!1;t.syncPointTree_.foreachOnPath(o,function(N,C){var P=Ae(N,o);a=a||qt(C,P),l=l||Xt(C)});var h=t.syncPointTree_.get(o);h?(l=l||Xt(h),a=a||qt(h,K())):(h=new fm,t.syncPointTree_=t.syncPointTree_.set(o,h));var p;if(a!=null)p=!0;else{p=!1,a=F.EMPTY_NODE;var f=t.syncPointTree_.subtree(o);f.foreachChild(function(N,C){var P=qt(C,K());P&&(a=a.updateImmediateChild(N,P))})}var m=mm(h,n);if(!m&&!n._queryParams.loadsAllData()){var g=hs(n);A(!t.queryToTagMap.has(g),"View does not exist, but we have a tag");var _=fI();t.queryToTagMap.set(g,_),t.tagToQueryMap.set(_,g)}var w=us(t.pendingWriteTree_,o),E=JE(h,n,i,w,a,p);if(!m&&!l){var S=vm(h,n);E=E.concat(dI(t,n,S))}return E}function cs(t,n,i){var o=!0,a=t.pendingWriteTree_,l=t.syncPointTree_.findOnPath(n,function(h,p){var f=Ae(h,n),m=qt(p,f);if(m)return m});return sm(a,n,l,i,o)}function lI(t,n){var i=n._path,o=null;t.syncPointTree_.foreachOnPath(i,function(m,g){var _=Ae(m,i);o=o||qt(g,_)});var a=t.syncPointTree_.get(i);a?o=o||qt(a,K()):(a=new fm,t.syncPointTree_=t.syncPointTree_.set(i,a));var l=o!=null,h=l?new Qt(o,!0,!1):null,p=us(t.pendingWriteTree_,n._path),f=dm(a,n,p,l?h.getNode():F.EMPTY_NODE,l);return qE(f)}function _r(t,n){return gm(n,t.syncPointTree_,null,us(t.pendingWriteTree_,K()))}function gm(t,n,i,o){if(W(t.path))return ym(t,n,i,o);var a=n.get(K());i==null&&a!=null&&(i=qt(a,K()));var l=[],h=V(t.path),p=t.operationForChild(h),f=n.children.get(h);if(f&&p){var m=i?i.getImmediateChild(h):null,g=am(o,h);l=l.concat(gm(p,f,m,g))}return a&&(l=l.concat(nc(a,t,o,i))),l}function ym(t,n,i,o){var a=n.get(K());i==null&&a!=null&&(i=qt(a,K()));var l=[];return n.children.inorderTraversal(function(h,p){var f=i?i.getImmediateChild(h):null,m=am(o,h),g=t.operationForChild(h);g&&(l=l.concat(ym(g,p,f,m)))}),a&&(l=l.concat(nc(a,t,o,i))),l}function _m(t,n){var i=n.query,o=es(t,i);return{hashFn:function(){var a=GE(n)||F.EMPTY_NODE;return a.hash()},onComplete:function(a){if(a==="ok")return o?sI(t,i._path,o):oI(t,i._path);var l=Jb(a,i);return Al(t,i,null,l)}}}function es(t,n){var i=hs(n);return t.queryToTagMap.get(i)}function hs(t){return t._path.toString()+"$"+t._queryIdentifier}function ic(t,n){return t.tagToQueryMap.get(n)}function oc(t){var n=t.indexOf("$");return A(n!==-1&&n<t.length-1,"Bad queryKey."),{queryId:t.substr(n+1),path:new Y(t.substr(0,n))}}function sc(t,n,i){var o=t.syncPointTree_.get(n);A(o,"Missing sync point for query tag that we're tracking");var a=us(t.pendingWriteTree_,n);return nc(o,i,a,null)}function cI(t){return t.fold(function(n,i,o){if(i&&Xt(i)){var a=ls(i);return[a]}else{var l=[];return i&&(l=pm(i)),ge(o,function(h,p){l=l.concat(p)}),l}})}function vi(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(tI())(t._repo,t._path):t}function hI(t,n){for(var i=0;i<n.length;++i){var o=n[i];if(!o._queryParams.loadsAllData()){var a=hs(o),l=t.queryToTagMap.get(a);t.queryToTagMap.delete(a),t.tagToQueryMap.delete(l)}}}function fI(){return nI++}function dI(t,n,i){var o=n._path,a=es(t,n),l=_m(t,i),h=t.listenProvider_.startListening(vi(n),a,l.hashFn,l.onComplete),p=t.syncPointTree_.subtree(o);if(a)A(!Xt(p.value),"If we're adding a query, it shouldn't be shadowed");else for(var f=p.fold(function(_,w,E){if(!W(_)&&w&&Xt(w))return[ls(w).query];var S=[];return w&&(S=S.concat(pm(w).map(function(N){return N.query}))),ge(E,function(N,C){S=S.concat(C)}),S}),m=0;m<f.length;++m){var g=f[m];t.listenProvider_.stopListening(vi(g),es(t,g))}return h}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pI=function(){function t(n){this.node_=n}return t.prototype.getImmediateChild=function(n){var i=this.node_.getImmediateChild(n);return new t(i)},t.prototype.node=function(){return this.node_},t}(),vI=function(){function t(n,i){this.syncTree_=n,this.path_=i}return t.prototype.getImmediateChild=function(n){var i=re(this.path_,n);return new t(this.syncTree_,i)},t.prototype.node=function(){return cs(this.syncTree_,this.path_)},t}(),mI=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Gp=function(t,n,i){if(!t||typeof t!="object")return t;if(A(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return gI(t[".sv"],n,i);if(typeof t[".sv"]=="object")return yI(t[".sv"],n);A(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},gI=function(t,n,i){switch(t){case"timestamp":return i.timestamp;default:A(!1,"Unexpected server value: "+t)}},yI=function(t,n,i){t.hasOwnProperty("increment")||A(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var o=t.increment;typeof o!="number"&&A(!1,"Unexpected increment value: "+o);var a=n.node();if(A(a!==null&&typeof a!="undefined","Expected ChildrenNode.EMPTY_NODE for nulls"),!a.isLeafNode())return o;var l=a,h=l.getValue();return typeof h!="number"?o:h+o},wm=function(t,n,i,o){return uc(n,new vI(i,t),o)},ac=function(t,n,i){return uc(t,new pI(n),i)};function uc(t,n,i){var o=t.getPriority().val(),a=Gp(o,n.getImmediateChild(".priority"),i),l;if(t.isLeafNode()){var h=t,p=Gp(h.getValue(),n,i);return p!==h.getValue()||a!==h.getPriority().val()?new hr(p,se(a)):t}else{var f=t;return l=f,a!==f.getPriority().val()&&(l=l.updatePriority(new hr(a))),f.forEachChild(ee,function(m,g){var _=uc(g,n.getImmediateChild(m),i);_!==g&&(l=l.updateImmediateChild(m,_))}),l}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lc=function(){function t(n,i,o){n===void 0&&(n=""),i===void 0&&(i=null),o===void 0&&(o={children:{},childCount:0}),this.name=n,this.parent=i,this.node=o}return t}();function fs(t,n){for(var i=n instanceof Y?n:new Y(n),o=t,a=V(i);a!==null;){var l=kn(o.node.children,a)||{children:{},childCount:0};o=new lc(a,o,l),i=J(i),a=V(i)}return o}function xn(t){return t.node.value}function cc(t,n){t.node.value=n,Nl(t)}function bm(t){return t.node.childCount>0}function _I(t){return xn(t)===void 0&&!bm(t)}function ds(t,n){ge(t.node.children,function(i,o){n(new lc(i,t,o))})}function Em(t,n,i,o){i&&!o&&n(t),ds(t,function(a){Em(a,n,!0,o)}),i&&o&&n(t)}function wI(t,n,i){for(var o=i?t:t.parent;o!==null;){if(n(o))return!0;o=o.parent}return!1}function ki(t){return new Y(t.parent===null?t.name:ki(t.parent)+"/"+t.name)}function Nl(t){t.parent!==null&&bI(t.parent,t.name,t)}function bI(t,n,i){var o=_I(i),a=Ve(t.node.children,n);o&&a?(delete t.node.children[n],t.node.childCount--,Nl(t)):!o&&!a&&(t.node.children[n]=i.node,t.node.childCount++,Nl(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var EI=/[\[\].#$\/\u0000-\u001F\u007F]/,II=/[\[\].#$\u0000-\u001F\u007F]/,ll=10*1024*1024,ps=function(t){return typeof t=="string"&&t.length!==0&&!EI.test(t)},Im=function(t){return typeof t=="string"&&t.length!==0&&!II.test(t)},TI=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Im(t)},Ei=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!rs(t)||t&&typeof t=="object"&&Ve(t,".sv")},wt=function(t,n,i,o){o&&n===void 0||Ri(xe(t,"value"),n,i)},Ri=function(t,n,i){var o=i instanceof Y?new P0(i,t):i;if(n===void 0)throw new Error(t+"contains undefined "+In(o));if(typeof n=="function")throw new Error(t+"contains a function "+In(o)+" with contents = "+n.toString());if(rs(n))throw new Error(t+"contains "+n.toString()+" "+In(o));if(typeof n=="string"&&n.length>ll/3&&ns(n)>ll)throw new Error(t+"contains a string greater than "+ll+" utf8 bytes "+In(o)+" ('"+n.substring(0,50)+"...')");if(n&&typeof n=="object"){var a=!1,l=!1;if(ge(n,function(h,p){if(h===".value")a=!0;else if(h!==".priority"&&h!==".sv"&&(l=!0,!ps(h)))throw new Error(t+" contains an invalid key ("+h+") "+In(o)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);D0(o,h),Ri(t,p,o),x0(o)}),a&&l)throw new Error(t+' contains ".value" child '+In(o)+" in addition to actual children.")}},SI=function(t,n){var i,o;for(i=0;i<n.length;i++){o=n[i];for(var a=_i(o),l=0;l<a.length;l++)if(!(a[l]===".priority"&&l===a.length-1)){if(!ps(a[l]))throw new Error(t+"contains an invalid key ("+a[l]+") in path "+o.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}n.sort(O0);var h=null;for(i=0;i<n.length;i++){if(o=n[i],h!==null&&Ke(h,o))throw new Error(t+"contains a path "+h.toString()+" that is ancestor of another path "+o.toString());h=o}},Tm=function(t,n,i,o){if(!(o&&n===void 0)){var a=xe(t,"values");if(!(n&&typeof n=="object")||Array.isArray(n))throw new Error(a+" must be an object containing the children to replace.");var l=[];ge(n,function(h,p){var f=new Y(h);if(Ri(a,p,re(i,f)),Hl(f)===".priority"&&!Ei(p))throw new Error(a+"contains an invalid value for '"+f.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");l.push(f)}),SI(a,l)}},hc=function(t,n,i){if(!(i&&n===void 0)){if(rs(n))throw new Error(xe(t,"priority")+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Ei(n))throw new Error(xe(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},CI=function(t,n,i){if(!(i&&n===void 0))switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(xe(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Oi=function(t,n,i,o){if(!(o&&i===void 0)&&!ps(i))throw new Error(xe(t,n)+'was an invalid key = "'+i+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},Ii=function(t,n,i,o){if(!(o&&i===void 0)&&!Im(i))throw new Error(xe(t,n)+'was an invalid path = "'+i+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},AI=function(t,n,i,o){i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),Ii(t,n,i,o)},Ye=function(t,n){if(V(n)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},Sm=function(t,n){var i=n.path.toString();if(typeof n.repoInfo.host!="string"||n.repoInfo.host.length===0||!ps(n.repoInfo.namespace)&&n.repoInfo.host.split(":")[0]!=="localhost"||i.length!==0&&!TI(i))throw new Error(xe(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)},NI=function(t,n,i,o){if(!(o&&i===void 0)&&typeof i!="boolean")throw new Error(xe(t,n)+"must be a boolean.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kI=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t}();function vs(t,n){for(var i=null,o=0;o<n.length;o++){var a=n[o],l=a.getPath();i!==null&&!Gl(l,i.path)&&(t.eventLists_.push(i),i=null),i===null&&(i={events:[],path:l}),i.events.push(a)}i&&t.eventLists_.push(i)}function fc(t,n,i){vs(t,i),Cm(t,function(o){return Gl(o,n)})}function Qe(t,n,i){vs(t,i),Cm(t,function(o){return Ke(o,n)||Ke(n,o)})}function Cm(t,n){t.recursionDepth_++;for(var i=!0,o=0;o<t.eventLists_.length;o++){var a=t.eventLists_[o];if(a){var l=a.path;n(l)?(RI(t.eventLists_[o]),t.eventLists_[o]=null):i=!1}}i&&(t.eventLists_=[]),t.recursionDepth_--}function RI(t){for(var n=0;n<t.events.length;n++){var i=t.events[n];if(i!==null){t.events[n]=null;var o=i.getEventRunner();An&&we("event: "+i.toString()),gr(o)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Am="repo_interrupt",OI=25,PI=function(){function t(n,i,o,a){this.repoInfo_=n,this.forceRestClient_=i,this.authTokenProvider_=o,this.appCheckProvider_=a,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new kI,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ko(),this.transactionQueueTree_=new lc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t}();function DI(t,n,i){if(t.stats_=Wl(t.repoInfo_),t.forceRestClient_||e0())t.server_=new sE(t.repoInfo_,function(o,a,l,h){qp(t,o,a,l,h)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(function(){return zp(t,!0)},0);else{if(typeof i!="undefined"&&i!==null){if(typeof i!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{me(i)}catch(o){throw new Error("Invalid authOverride provided: "+o)}}t.persistentConnection_=new Nn(t.repoInfo_,n,function(o,a,l,h){qp(t,o,a,l,h)},function(o){zp(t,o)},function(o){LI(t,o)},t.authTokenProvider_,t.appCheckProvider_,i),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(function(o){t.server_.refreshAuthToken(o)}),t.appCheckProvider_.addTokenChangeListener(function(o){t.server_.refreshAppCheckToken(o.token)}),t.statsReporter_=s0(t.repoInfo_,function(){return new hE(t.stats_,t.server_)}),t.infoData_=new aE,t.infoSyncTree_=new Bp({startListening:function(o,a,l,h){var p=[],f=t.infoData_.getNode(o._path);return f.isEmpty()||(p=Ni(t.infoSyncTree_,o._path,f),setTimeout(function(){h("ok")},0)),p},stopListening:function(){}}),dc(t,"connected",!1),t.serverSyncTree_=new Bp({startListening:function(o,a,l,h){return t.server_.listen(o,l,a,function(p,f){var m=h(p,f);Qe(t.eventQueue_,o._path,m)}),[]},stopListening:function(o,a){t.server_.unlisten(o,a)}})}function Nm(t){var n=t.infoData_.getNode(new Y(".info/serverTimeOffset")),i=n.val()||0;return new Date().getTime()+i}function Pi(t){return mI({timestamp:Nm(t)})}function qp(t,n,i,o,a){t.dataUpdateCount++;var l=new Y(n);i=t.interceptServerDataCallback_?t.interceptServerDataCallback_(n,i):i;var h=[];if(a)if(o){var p=Wo(i,function(w){return se(w)});h=uI(t.serverSyncTree_,l,p,a)}else{var f=se(i);h=aI(t.serverSyncTree_,l,f,a)}else if(o){var m=Wo(i,function(w){return se(w)});h=iI(t.serverSyncTree_,l,m)}else{var g=se(i);h=Ni(t.serverSyncTree_,l,g)}var _=l;h.length>0&&(_=vr(t,l)),Qe(t.eventQueue_,_,h)}function xI(t,n){t.interceptServerDataCallback_=n}function zp(t,n){dc(t,"connected",n),n===!1&&jI(t)}function LI(t,n){ge(n,function(i,o){dc(t,i,o)})}function dc(t,n,i){var o=new Y("/.info/"+n),a=se(i);t.infoData_.updateSnapshot(o,a);var l=Ni(t.infoSyncTree_,o,a);Qe(t.eventQueue_,o,l)}function ms(t){return t.nextWriteId_++}function MI(t,n){var i=lI(t.serverSyncTree_,n);return i!=null?Promise.resolve(i):t.server_.get(n).then(function(o){var a=se(o).withIndex(n._queryParams.getIndex()),l=Ni(t.serverSyncTree_,n._path,a);return fc(t.eventQueue_,n._path,l),Promise.resolve(a)},function(o){return wr(t,"get for query "+me(n)+" failed: "+o),Promise.reject(new Error(o))})}function pc(t,n,i,o,a){wr(t,"set",{path:n.toString(),value:i,priority:o});var l=Pi(t),h=se(i,o),p=cs(t.serverSyncTree_,n),f=ac(h,p,l),m=ms(t),g=rc(t.serverSyncTree_,n,f,m,!0);vs(t.eventQueue_,g),t.server_.put(n.toString(),h.val(!0),function(w,E){var S=w==="ok";S||Ee("set at "+n+" failed: "+w);var N=Ht(t.serverSyncTree_,m,!S);Qe(t.eventQueue_,n,N),$t(t,a,w,E)});var _=mc(t,n);vr(t,_),Qe(t.eventQueue_,_,[])}function FI(t,n,i,o){wr(t,"update",{path:n.toString(),value:i});var a=!0,l=Pi(t),h={};if(ge(i,function(m,g){a=!1,h[m]=wm(re(n,m),se(g),t.serverSyncTree_,l)}),a)we("update() called with empty data.  Don't do anything."),$t(t,o,"ok",void 0);else{var p=ms(t),f=rI(t.serverSyncTree_,n,h,p);vs(t.eventQueue_,f),t.server_.merge(n.toString(),i,function(m,g){var _=m==="ok";_||Ee("update at "+n+" failed: "+m);var w=Ht(t.serverSyncTree_,p,!_),E=w.length>0?vr(t,n):n;Qe(t.eventQueue_,E,w),$t(t,o,m,g)}),ge(i,function(m){var g=mc(t,re(n,m));vr(t,g)}),Qe(t.eventQueue_,n,[])}}function jI(t){wr(t,"onDisconnectEvents");var n=Pi(t),i=Ko();bl(t.onDisconnect_,K(),function(a,l){var h=wm(a,l,t.serverSyncTree_,n);yr(i,a,h)});var o=[];bl(i,K(),function(a,l){o=o.concat(Ni(t.serverSyncTree_,a,l));var h=mc(t,a);vr(t,h)}),t.onDisconnect_=Ko(),Qe(t.eventQueue_,K(),o)}function UI(t,n,i){t.server_.onDisconnectCancel(n.toString(),function(o,a){o==="ok"&&wl(t.onDisconnect_,n),$t(t,i,o,a)})}function Kp(t,n,i,o){var a=se(i);t.server_.onDisconnectPut(n.toString(),a.val(!0),function(l,h){l==="ok"&&yr(t.onDisconnect_,n,a),$t(t,o,l,h)})}function VI(t,n,i,o,a){var l=se(i,o);t.server_.onDisconnectPut(n.toString(),l.val(!0),function(h,p){h==="ok"&&yr(t.onDisconnect_,n,l),$t(t,a,h,p)})}function WI(t,n,i,o){if(fl(i)){we("onDisconnect().update() called with empty data.  Don't do anything."),$t(t,o,"ok",void 0);return}t.server_.onDisconnectMerge(n.toString(),i,function(a,l){a==="ok"&&ge(i,function(h,p){var f=se(p);yr(t.onDisconnect_,re(n,h),f)}),$t(t,o,a,l)})}function BI(t,n,i){var o;V(n._path)===".info"?o=Hp(t.infoSyncTree_,n,i):o=Hp(t.serverSyncTree_,n,i),fc(t.eventQueue_,n._path,o)}function kl(t,n,i){var o;V(n._path)===".info"?o=Al(t.infoSyncTree_,n,i):o=Al(t.serverSyncTree_,n,i),fc(t.eventQueue_,n._path,o)}function km(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Am)}function HI(t){t.persistentConnection_&&t.persistentConnection_.resume(Am)}function GI(t,n){if(n===void 0&&(n=!1),typeof console!="undefined"){var i;n?(t.statsListener_||(t.statsListener_=new tm(t.stats_)),i=t.statsListener_.get()):i=t.stats_.get();var o=Object.keys(i).reduce(function(a,l){return Math.max(l.length,a)},0);ge(i,function(a,l){for(var h=a,p=a.length;p<o+2;p++)h+=" ";console.log(h+l)})}}function qI(t,n){t.stats_.incrementCounter(n),fE(t.statsReporter_,n)}function wr(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var o="";t.persistentConnection_&&(o=t.persistentConnection_.id+":"),we.apply(void 0,Kt([o],Ce(n)))}function $t(t,n,i,o){n&&gr(function(){if(i==="ok")n(null);else{var a=(i||"error").toUpperCase(),l=a;o&&(l+=": "+o);var h=new Error(l);h.code=a,n(h)}})}function zI(t,n,i,o,a,l){wr(t,"transaction on "+n);var h={path:n,update:i,onComplete:o,status:null,order:wv(),applyLocally:l,retryCount:0,unwatcher:a,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},p=vc(t,n,void 0);h.currentInputSnapshot=p;var f=h.update(p.val());if(f===void 0)h.unwatcher(),h.currentOutputSnapshotRaw=null,h.currentOutputSnapshotResolved=null,h.onComplete&&h.onComplete(null,!1,h.currentInputSnapshot);else{Ri("transaction failed: Data returned ",f,h.path),h.status=0;var m=fs(t.transactionQueueTree_,n),g=xn(m)||[];g.push(h),cc(m,g);var _=void 0;if(typeof f=="object"&&f!==null&&Ve(f,".priority"))_=kn(f,".priority"),A(Ei(_),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else{var w=cs(t.serverSyncTree_,n)||F.EMPTY_NODE;_=w.getPriority().val()}var E=Pi(t),S=se(f,_),N=ac(S,p,E);h.currentOutputSnapshotRaw=S,h.currentOutputSnapshotResolved=N,h.currentWriteId=ms(t);var C=rc(t.serverSyncTree_,n,N,h.currentWriteId,h.applyLocally);Qe(t.eventQueue_,n,C),gs(t,t.transactionQueueTree_)}}function vc(t,n,i){return cs(t.serverSyncTree_,n,i)||F.EMPTY_NODE}function gs(t,n){if(n===void 0&&(n=t.transactionQueueTree_),n||ys(t,n),xn(n)){var i=Om(t,n);A(i.length>0,"Sending zero length transaction queue");var o=i.every(function(a){return a.status===0});o&&KI(t,ki(n),i)}else bm(n)&&ds(n,function(a){gs(t,a)})}function KI(t,n,i){for(var o=i.map(function(w){return w.currentWriteId}),a=vc(t,n,o),l=a,h=a.hash(),p=0;p<i.length;p++){var f=i[p];A(f.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),f.status=1,f.retryCount++;var m=Ae(n,f.path);l=l.updateChild(m,f.currentOutputSnapshotRaw)}var g=l.val(!0),_=n;t.server_.put(_.toString(),g,function(w){wr(t,"transaction put response",{path:_.toString(),status:w});var E=[];if(w==="ok"){for(var S=[],N=function(P){i[P].status=2,E=E.concat(Ht(t.serverSyncTree_,i[P].currentWriteId)),i[P].onComplete&&S.push(function(){return i[P].onComplete(null,!0,i[P].currentOutputSnapshotResolved)}),i[P].unwatcher()},C=0;C<i.length;C++)N(C);ys(t,fs(t.transactionQueueTree_,n)),gs(t,t.transactionQueueTree_),Qe(t.eventQueue_,n,E);for(var C=0;C<S.length;C++)gr(S[C])}else{if(w==="datastale")for(var C=0;C<i.length;C++)i[C].status===3?i[C].status=4:i[C].status=0;else{Ee("transaction at "+_.toString()+" failed: "+w);for(var C=0;C<i.length;C++)i[C].status=4,i[C].abortReason=w}vr(t,n)}},h)}function vr(t,n){var i=Rm(t,n),o=ki(i),a=Om(t,i);return YI(t,a,o),o}function YI(t,n,i){if(n.length!==0){for(var o=[],a=[],l=n.filter(function(m){return m.status===0}),h=l.map(function(m){return m.currentWriteId}),p=function(m){var g=n[m],_=Ae(i,g.path),w=!1,E;if(A(_!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),g.status===4)w=!0,E=g.abortReason,a=a.concat(Ht(t.serverSyncTree_,g.currentWriteId,!0));else if(g.status===0)if(g.retryCount>=OI)w=!0,E="maxretry",a=a.concat(Ht(t.serverSyncTree_,g.currentWriteId,!0));else{var S=vc(t,g.path,h);g.currentInputSnapshot=S;var N=n[m].update(S.val());if(N!==void 0){Ri("transaction failed: Data returned ",N,g.path);var C=se(N),P=typeof N=="object"&&N!=null&&Ve(N,".priority");P||(C=C.updatePriority(S.getPriority()));var q=g.currentWriteId,ue=Pi(t),Ot=ac(C,S,ue);g.currentOutputSnapshotRaw=C,g.currentOutputSnapshotResolved=Ot,g.currentWriteId=ms(t),h.splice(h.indexOf(q),1),a=a.concat(rc(t.serverSyncTree_,g.path,Ot,g.currentWriteId,g.applyLocally)),a=a.concat(Ht(t.serverSyncTree_,q,!0))}else w=!0,E="nodata",a=a.concat(Ht(t.serverSyncTree_,g.currentWriteId,!0))}Qe(t.eventQueue_,i,a),a=[],w&&(n[m].status=2,function(br){setTimeout(br,Math.floor(0))}(n[m].unwatcher),n[m].onComplete&&(E==="nodata"?o.push(function(){return n[m].onComplete(null,!1,n[m].currentInputSnapshot)}):o.push(function(){return n[m].onComplete(new Error(E),!1,null)})))},f=0;f<n.length;f++)p(f);ys(t,t.transactionQueueTree_);for(var f=0;f<o.length;f++)gr(o[f]);gs(t,t.transactionQueueTree_)}}function Rm(t,n){var i,o=t.transactionQueueTree_;for(i=V(n);i!==null&&xn(o)===void 0;)o=fs(o,i),n=J(n),i=V(n);return o}function Om(t,n){var i=[];return Pm(t,n,i),i.sort(function(o,a){return o.order-a.order}),i}function Pm(t,n,i){var o=xn(n);if(o)for(var a=0;a<o.length;a++)i.push(o[a]);ds(n,function(l){Pm(t,l,i)})}function ys(t,n){var i=xn(n);if(i){for(var o=0,a=0;a<i.length;a++)i[a].status!==2&&(i[o]=i[a],o++);i.length=o,cc(n,i.length>0?i:void 0)}ds(n,function(l){ys(t,l)})}function mc(t,n){var i=ki(Rm(t,n)),o=fs(t.transactionQueueTree_,n);return wI(o,function(a){cl(t,a)}),cl(t,o),Em(o,function(a){cl(t,a)}),i}function cl(t,n){var i=xn(n);if(i){for(var o=[],a=[],l=-1,h=0;h<i.length;h++)i[h].status===3||(i[h].status===1?(A(l===h-1,"All SENT items should be at beginning of queue."),l=h,i[h].status=3,i[h].abortReason="set"):(A(i[h].status===0,"Unexpected transaction status in abort"),i[h].unwatcher(),a=a.concat(Ht(t.serverSyncTree_,i[h].currentWriteId,!0)),i[h].onComplete&&o.push(i[h].onComplete.bind(null,new Error("set"),!1,null))));l===-1?cc(n,void 0):i.length=l+1,Qe(t.eventQueue_,ki(n),a);for(var h=0;h<o.length;h++)gr(o[h])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QI(t){for(var n="",i=t.split("/"),o=0;o<i.length;o++)if(i[o].length>0){var a=i[o];try{a=decodeURIComponent(a.replace(/\+/g," "))}catch{}n+="/"+a}return n}function XI(t){var n,i,o={};t.charAt(0)==="?"&&(t=t.substring(1));try{for(var a=Ue(t.split("&")),l=a.next();!l.done;l=a.next()){var h=l.value;if(h.length!==0){var p=h.split("=");p.length===2?o[decodeURIComponent(p[0])]=decodeURIComponent(p[1]):Ee("Invalid query segment '"+h+"' in query '"+t+"'")}}}catch(f){n={error:f}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return o}var Rl=function(t,n){var i=$I(t),o=i.namespace;i.domain==="firebase.com"&&yt(i.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!o||o==="undefined")&&i.domain!=="localhost"&&yt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),i.secure||Kb();var a=i.scheme==="ws"||i.scheme==="wss";return{repoInfo:new Vl(i.host,i.secure,o,n,a,"",o!==i.subdomain),path:new Y(i.pathString)}},$I=function(t){var n="",i="",o="",a="",l="",h=!0,p="https",f=443;if(typeof t=="string"){var m=t.indexOf("//");m>=0&&(p=t.substring(0,m-1),t=t.substring(m+2));var g=t.indexOf("/");g===-1&&(g=t.length);var _=t.indexOf("?");_===-1&&(_=t.length),n=t.substring(0,Math.min(g,_)),g<_&&(a=QI(t.substring(g,_)));var w=XI(t.substring(Math.min(t.length,_)));m=n.indexOf(":"),m>=0?(h=p==="https"||p==="wss",f=parseInt(n.substring(m+1),10)):m=n.length;var E=n.slice(0,m);if(E.toLowerCase()==="localhost")i="localhost";else if(E.split(".").length<=2)i=E;else{var S=n.indexOf(".");o=n.substring(0,S).toLowerCase(),i=n.substring(S+1),l=o}"ns"in w&&(l=w.ns)}return{host:n,port:f,domain:i,subdomain:o,secure:h,scheme:p,pathString:a,namespace:l}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dm=function(){function t(n,i,o,a){this.eventType=n,this.eventRegistration=i,this.snapshot=o,this.prevName=a}return t.prototype.getPath=function(){var n=this.snapshot.ref;return this.eventType==="value"?n._path:n.parent._path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+me(this.snapshot.exportVal())},t}(),xm=function(){function t(n,i,o){this.eventRegistration=n,this.error=i,this.path=o}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lm=function(){function t(n,i){this.snapshotCallback=n,this.cancelCallback=i}return t.prototype.onValue=function(n,i){this.snapshotCallback.call(null,n,i)},t.prototype.onCancel=function(n){return A(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,n)},Object.defineProperty(t.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),t.prototype.matches=function(n){return this.snapshotCallback===n.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===n.snapshotCallback.userCallback&&this.snapshotCallback.context===n.snapshotCallback.context},t}();/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var JI=function(){function t(n,i){this._repo=n,this._path=i}return t.prototype.cancel=function(){var n=new De;return UI(this._repo,this._path,n.wrapCallback(function(){})),n.promise},t.prototype.remove=function(){Ye("OnDisconnect.remove",this._path);var n=new De;return Kp(this._repo,this._path,null,n.wrapCallback(function(){})),n.promise},t.prototype.set=function(n){Ye("OnDisconnect.set",this._path),wt("OnDisconnect.set",n,this._path,!1);var i=new De;return Kp(this._repo,this._path,n,i.wrapCallback(function(){})),i.promise},t.prototype.setWithPriority=function(n,i){Ye("OnDisconnect.setWithPriority",this._path),wt("OnDisconnect.setWithPriority",n,this._path,!1),hc("OnDisconnect.setWithPriority",i,!1);var o=new De;return VI(this._repo,this._path,n,i,o.wrapCallback(function(){})),o.promise},t.prototype.update=function(n){Ye("OnDisconnect.update",this._path),Tm("OnDisconnect.update",n,this._path,!1);var i=new De;return WI(this._repo,this._path,n,i.wrapCallback(function(){})),i.promise},t}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xe=function(){function t(n,i,o,a){this._repo=n,this._path=i,this._queryParams=o,this._orderByCalled=a}return Object.defineProperty(t.prototype,"key",{get:function(){return W(this._path)?null:Hl(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new bt(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryIdentifier",{get:function(){var n=Pp(this._queryParams),i=Fl(n);return i==="{}"?"default":i},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryObject",{get:function(){return Pp(this._queryParams)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(n){if(n=Be(n),!(n instanceof t))return!1;var i=this._repo===n._repo,o=Gl(this._path,n._path),a=this._queryIdentifier===n._queryIdentifier;return i&&o&&a},t.prototype.toJSON=function(){return this.toString()},t.prototype.toString=function(){return this._repo.toString()+R0(this._path)},t}();function _s(t,n){if(t._orderByCalled===!0)throw new Error(n+": You can't combine multiple orderBy calls.")}function Jt(t){var n=null,i=null;if(t.hasStart()&&(n=t.getIndexStartValue()),t.hasEnd()&&(i=t.getIndexEndValue()),t.getIndex()===gt){var o="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",a="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){var l=t.getIndexStartName();if(l!==Rt)throw new Error(o);if(typeof n!="string")throw new Error(a)}if(t.hasEnd()){var h=t.getIndexEndName();if(h!==_t)throw new Error(o);if(typeof i!="string")throw new Error(a)}}else if(t.getIndex()===ee){if(n!=null&&!Ei(n)||i!=null&&!Ei(i))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(A(t.getIndex()instanceof zl||t.getIndex()===Kl,"unknown index type."),n!=null&&typeof n=="object"||i!=null&&typeof i=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function ws(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var bt=function(t){ae(n,t);function n(i,o){return t.call(this,i,o,new em,!1)||this}return Object.defineProperty(n.prototype,"parent",{get:function(){var i=Hv(this._path);return i===null?null:new n(this._repo,i)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"root",{get:function(){for(var i=this;i.parent!==null;)i=i.parent;return i},enumerable:!1,configurable:!0}),n}(Xe),bs=function(){function t(n,i,o){this._node=n,this.ref=i,this._index=o}return Object.defineProperty(t.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),t.prototype.child=function(n){var i=new Y(n),o=On(this.ref,n);return new t(this._node.getChild(i),o,ee)},t.prototype.exists=function(){return!this._node.isEmpty()},t.prototype.exportVal=function(){return this._node.val(!0)},t.prototype.forEach=function(n){var i=this;if(this._node.isLeafNode())return!1;var o=this._node;return!!o.forEachChild(this._index,function(a,l){return n(new t(l,On(i.ref,a),ee))})},t.prototype.hasChild=function(n){var i=new Y(n);return!this._node.getChild(i).isEmpty()},t.prototype.hasChildren=function(){return this._node.isLeafNode()?!1:!this._node.isEmpty()},t.prototype.toJSON=function(){return this.exportVal()},t.prototype.val=function(){return this._node.val()},t}();function Mm(t,n){return t=Be(t),t._checkNotDeleted("ref"),n!==void 0?On(t._root,n):t._root}function Yp(t,n){t=Be(t),t._checkNotDeleted("refFromURL");var i=Rl(n,t._repo.repoInfo_.nodeAdmin);Sm("refFromURL",i);var o=i.repoInfo;return!t._repo.repoInfo_.isCustomHost()&&o.host!==t._repo.repoInfo_.host&&yt("refFromURL: Host name does not match the current database: (found "+o.host+" but expected "+t._repo.repoInfo_.host+")"),Mm(t,i.path.toString())}function On(t,n){return t=Be(t),V(t._path)===null?AI("child","path",n,!1):Ii("child","path",n,!1),new bt(t._repo,re(t._path,n))}function ZI(t,n){t=Be(t),Ye("push",t._path),wt("push",n,t._path,!0);var i=Nm(t._repo),o=J0(i),a=On(t,o),l=On(t,o),h;return n!=null?h=gc(l,n).then(function(){return l}):h=Promise.resolve(l),a.then=h.then.bind(h),a.catch=h.then.bind(h,void 0),a}function eT(t){return Ye("remove",t._path),gc(t,null)}function gc(t,n){t=Be(t),Ye("set",t._path),wt("set",n,t._path,!1);var i=new De;return pc(t._repo,t._path,n,null,i.wrapCallback(function(){})),i.promise}function tT(t,n){t=Be(t),Ye("setPriority",t._path),hc("setPriority",n,!1);var i=new De;return pc(t._repo,re(t._path,".priority"),n,null,i.wrapCallback(function(){})),i.promise}function nT(t,n,i){if(Ye("setWithPriority",t._path),wt("setWithPriority",n,t._path,!1),hc("setWithPriority",i,!1),t.key===".length"||t.key===".keys")throw"setWithPriority failed: "+t.key+" is a read-only object.";var o=new De;return pc(t._repo,t._path,n,i,o.wrapCallback(function(){})),o.promise}function rT(t,n){Tm("update",n,t._path,!1);var i=new De;return FI(t._repo,t._path,n,i.wrapCallback(function(){})),i.promise}function iT(t){return t=Be(t),MI(t._repo,t).then(function(n){return new bs(n,new bt(t._repo,t._path),t._queryParams.getIndex())})}var Fm=function(){function t(n){this.callbackContext=n}return t.prototype.respondsTo=function(n){return n==="value"},t.prototype.createEvent=function(n,i){var o=i._queryParams.getIndex();return new Dm("value",this,new bs(n.snapshotNode,new bt(i._repo,i._path),o))},t.prototype.getEventRunner=function(n){var i=this;return n.getEventType()==="cancel"?function(){return i.callbackContext.onCancel(n.error)}:function(){return i.callbackContext.onValue(n.snapshot,null)}},t.prototype.createCancelEvent=function(n,i){return this.callbackContext.hasCancelCallback?new xm(this,n,i):null},t.prototype.matches=function(n){return n instanceof t?!n.callbackContext||!this.callbackContext?!0:n.callbackContext.matches(this.callbackContext):!1},t.prototype.hasAnyCallback=function(){return this.callbackContext!==null},t}(),jm=function(){function t(n,i){this.eventType=n,this.callbackContext=i}return t.prototype.respondsTo=function(n){var i=n==="children_added"?"child_added":n;return i=i==="children_removed"?"child_removed":i,this.eventType===i},t.prototype.createCancelEvent=function(n,i){return this.callbackContext.hasCancelCallback?new xm(this,n,i):null},t.prototype.createEvent=function(n,i){A(n.childName!=null,"Child events should have a childName.");var o=On(new bt(i._repo,i._path),n.childName),a=i._queryParams.getIndex();return new Dm(n.type,this,new bs(n.snapshotNode,o,a),n.prevName)},t.prototype.getEventRunner=function(n){var i=this;return n.getEventType()==="cancel"?function(){return i.callbackContext.onCancel(n.error)}:function(){return i.callbackContext.onValue(n.snapshot,n.prevName)}},t.prototype.matches=function(n){return n instanceof t?this.eventType===n.eventType&&(!this.callbackContext||!n.callbackContext||this.callbackContext.matches(n.callbackContext)):!1},t.prototype.hasAnyCallback=function(){return!!this.callbackContext},t}();function Di(t,n,i,o,a){var l;if(typeof o=="object"&&(l=void 0,a=o),typeof o=="function"&&(l=o),a&&a.onlyOnce){var h=i,p=function(g,_){kl(t._repo,t,m),h(g,_)};p.userCallback=i.userCallback,p.context=i.context,i=p}var f=new Lm(i,l||void 0),m=n==="value"?new Fm(f):new jm(n,f);return BI(t._repo,t,m),function(){return kl(t._repo,t,m)}}function Ol(t,n,i,o){return Di(t,"value",n,i,o)}function Qp(t,n,i,o){return Di(t,"child_added",n,i,o)}function Xp(t,n,i,o){return Di(t,"child_changed",n,i,o)}function $p(t,n,i,o){return Di(t,"child_moved",n,i,o)}function Jp(t,n,i,o){return Di(t,"child_removed",n,i,o)}function Zp(t,n,i){var o=null,a=i?new Lm(i):null;n==="value"?o=new Fm(a):n&&(o=new jm(n,a)),kl(t._repo,t,o)}var ut=function(){function t(){}return t}(),Um=function(t){ae(n,t);function n(i,o){var a=t.call(this)||this;return a._value=i,a._key=o,a}return n.prototype._apply=function(i){wt("endAt",this._value,i._path,!0);var o=_l(i._queryParams,this._value,this._key);if(ws(o),Jt(o),i._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Xe(i._repo,i._path,o,i._orderByCalled)},n}(ut);function oT(t,n){return Oi("endAt","key",n,!0),new Um(t,n)}var sT=function(t){ae(n,t);function n(i,o){var a=t.call(this)||this;return a._value=i,a._key=o,a}return n.prototype._apply=function(i){wt("endBefore",this._value,i._path,!1);var o=oE(i._queryParams,this._value,this._key);if(ws(o),Jt(o),i._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Xe(i._repo,i._path,o,i._orderByCalled)},n}(ut);function aT(t,n){return Oi("endBefore","key",n,!0),new sT(t,n)}var Vm=function(t){ae(n,t);function n(i,o){var a=t.call(this)||this;return a._value=i,a._key=o,a}return n.prototype._apply=function(i){wt("startAt",this._value,i._path,!0);var o=yl(i._queryParams,this._value,this._key);if(ws(o),Jt(o),i._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Xe(i._repo,i._path,o,i._orderByCalled)},n}(ut);function uT(t,n){return t===void 0&&(t=null),Oi("startAt","key",n,!0),new Vm(t,n)}var lT=function(t){ae(n,t);function n(i,o){var a=t.call(this)||this;return a._value=i,a._key=o,a}return n.prototype._apply=function(i){wt("startAfter",this._value,i._path,!1);var o=iE(i._queryParams,this._value,this._key);if(ws(o),Jt(o),i._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Xe(i._repo,i._path,o,i._orderByCalled)},n}(ut);function cT(t,n){return Oi("startAfter","key",n,!0),new lT(t,n)}var hT=function(t){ae(n,t);function n(i){var o=t.call(this)||this;return o._limit=i,o}return n.prototype._apply=function(i){if(i._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Xe(i._repo,i._path,nE(i._queryParams,this._limit),i._orderByCalled)},n}(ut);function fT(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new hT(t)}var dT=function(t){ae(n,t);function n(i){var o=t.call(this)||this;return o._limit=i,o}return n.prototype._apply=function(i){if(i._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Xe(i._repo,i._path,rE(i._queryParams,this._limit),i._orderByCalled)},n}(ut);function pT(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new dT(t)}var vT=function(t){ae(n,t);function n(i){var o=t.call(this)||this;return o._path=i,o}return n.prototype._apply=function(i){_s(i,"orderByChild");var o=new Y(this._path);if(W(o))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var a=new zl(o),l=os(i._queryParams,a);return Jt(l),new Xe(i._repo,i._path,l,!0)},n}(ut);function mT(t){if(t==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(t==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(t==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Ii("orderByChild","path",t,!1),new vT(t)}var gT=function(t){ae(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype._apply=function(i){_s(i,"orderByKey");var o=os(i._queryParams,gt);return Jt(o),new Xe(i._repo,i._path,o,!0)},n}(ut);function yT(){return new gT}var _T=function(t){ae(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype._apply=function(i){_s(i,"orderByPriority");var o=os(i._queryParams,ee);return Jt(o),new Xe(i._repo,i._path,o,!0)},n}(ut);function wT(){return new _T}var bT=function(t){ae(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype._apply=function(i){_s(i,"orderByValue");var o=os(i._queryParams,Kl);return Jt(o),new Xe(i._repo,i._path,o,!0)},n}(ut);function ET(){return new bT}var IT=function(t){ae(n,t);function n(i,o){var a=t.call(this)||this;return a._value=i,a._key=o,a}return n.prototype._apply=function(i){if(wt("equalTo",this._value,i._path,!1),i._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(i._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Um(this._value,this._key)._apply(new Vm(this._value,this._key)._apply(i))},n}(ut);function TT(t,n){return Oi("equalTo","key",n,!0),new IT(t,n)}function it(t){for(var n,i,o=[],a=1;a<arguments.length;a++)o[a-1]=arguments[a];var l=Be(t);try{for(var h=Ue(o),p=h.next();!p.done;p=h.next()){var f=p.value;l=f._apply(l)}}catch(m){n={error:m}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(n)throw n.error}}return l}QE(bt);eI(bt);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ST="FIREBASE_DATABASE_EMULATOR_HOST",Pl={},Wm=!1;function CT(t,n,i,o){t.repoInfo_=new Vl(n+":"+i,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),o&&(t.authTokenProvider_=o)}function Bm(t,n,i,o,a){var l=o||t.options.databaseURL;l===void 0&&(t.options.projectId||yt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),we("Using default host for project ",t.options.projectId),l=t.options.projectId+"-default-rtdb.firebaseio.com");var h=Rl(l,a),p=h.repoInfo,f,m=void 0;typeof process!="undefined"&&(m=process.env[ST]),m?(f=!0,l="http://"+m+"?ns="+p.namespace,h=Rl(l,a),p=h.repoInfo):f=!h.repoInfo.secure;var g=a&&f?new fi(fi.OWNER):new n0(t.name,t.options,n);Sm("Invalid Firebase Database URL",h),W(h.path)||yt("Database URL must point to the root of a Firebase Database (not including a child path).");var _=NT(p,t,g,new t0(t.name,i));return new RT(_,t)}function AT(t,n){var i=Pl[n];(!i||i[t.key]!==t)&&yt("Database "+n+"("+t.repoInfo_+") has already been deleted."),km(t),delete i[t.key]}function NT(t,n,i,o){var a=Pl[n.name];a||(a={},Pl[n.name]=a);var l=a[t.toURLString()];return l&&yt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),l=new PI(t,Wm,i,o),a[t.toURLString()]=l,l}function kT(t){Wm=t}var RT=function(){function t(n,i){this._repoInternal=n,this.app=i,this.type="database",this._instanceStarted=!1}return Object.defineProperty(t.prototype,"_repo",{get:function(){return this._instanceStarted||(DI(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new bt(this._repo,K())),this._rootInternal},enumerable:!1,configurable:!0}),t.prototype._delete=function(){return this._rootInternal!==null&&(AT(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()},t.prototype._checkNotDeleted=function(n){this._rootInternal===null&&yt("Cannot call "+n+" on a deleted database.")},t}();function OT(t,n,i,o){o===void 0&&(o={}),t=Be(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&yt("Cannot call useEmulator() after instance has already been initialized.");var a=t._repoInternal,l=void 0;if(a.repoInfo_.nodeAdmin)o.mockUserToken&&yt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),l=new fi(fi.OWNER);else if(o.mockUserToken){var h=typeof o.mockUserToken=="string"?o.mockUserToken:$w(o.mockUserToken,t.app.options.projectId);l=new fi(h)}CT(a,n,i,l)}function PT(t){t=Be(t),t._checkNotDeleted("goOffline"),km(t._repo)}function DT(t){t=Be(t),t._checkNotDeleted("goOnline"),HI(t._repo)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xT={".sv":"timestamp"};function LT(){return xT}function MT(t){return{".sv":{increment:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var FT=function(){function t(n,i){this.committed=n,this.snapshot=i}return t.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}();function jT(t,n,i){var o;if(t=Be(t),Ye("Reference.transaction",t._path),t.key===".length"||t.key===".keys")throw"Reference.transaction failed: "+t.key+" is a read-only object.";var a=(o=i==null?void 0:i.applyLocally)!==null&&o!==void 0?o:!0,l=new De,h=function(f,m,g){var _=null;f?l.reject(f):(_=new bs(g,new bt(t._repo,t._path),ee),l.resolve(new FT(m,_)))},p=Ol(t,function(){});return zI(t._repo,t._path,n,h,p,a),l.promise}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var UT=function(){function t(n){this._delegate=n}return t.prototype.cancel=function(n){L("OnDisconnect.cancel",0,1,arguments.length),_e("OnDisconnect.cancel","onComplete",n,!0);var i=this._delegate.cancel();return n&&i.then(function(){return n(null)},function(o){return n(o)}),i},t.prototype.remove=function(n){L("OnDisconnect.remove",0,1,arguments.length),_e("OnDisconnect.remove","onComplete",n,!0);var i=this._delegate.remove();return n&&i.then(function(){return n(null)},function(o){return n(o)}),i},t.prototype.set=function(n,i){L("OnDisconnect.set",1,2,arguments.length),_e("OnDisconnect.set","onComplete",i,!0);var o=this._delegate.set(n);return i&&o.then(function(){return i(null)},function(a){return i(a)}),o},t.prototype.setWithPriority=function(n,i,o){L("OnDisconnect.setWithPriority",2,3,arguments.length),_e("OnDisconnect.setWithPriority","onComplete",o,!0);var a=this._delegate.setWithPriority(n,i);return o&&a.then(function(){return o(null)},function(l){return o(l)}),a},t.prototype.update=function(n,i){if(L("OnDisconnect.update",1,2,arguments.length),Array.isArray(n)){for(var o={},a=0;a<n.length;++a)o[""+a]=n[a];n=o,Ee("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}_e("OnDisconnect.update","onComplete",i,!0);var l=this._delegate.update(n);return i&&l.then(function(){return i(null)},function(h){return i(h)}),l},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var VT=function(){function t(n,i){this.committed=n,this.snapshot=i}return t.prototype.toJSON=function(){return L("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mi=function(){function t(n,i){this._database=n,this._delegate=i}return t.prototype.val=function(){return L("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},t.prototype.exportVal=function(){return L("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},t.prototype.toJSON=function(){return L("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.exists=function(){return L("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},t.prototype.child=function(n){return L("DataSnapshot.child",0,1,arguments.length),n=String(n),Ii("DataSnapshot.child","path",n,!1),new t(this._database,this._delegate.child(n))},t.prototype.hasChild=function(n){return L("DataSnapshot.hasChild",1,1,arguments.length),Ii("DataSnapshot.hasChild","path",n,!1),this._delegate.hasChild(n)},t.prototype.getPriority=function(){return L("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},t.prototype.forEach=function(n){var i=this;return L("DataSnapshot.forEach",1,1,arguments.length),_e("DataSnapshot.forEach","action",n,!1),this._delegate.forEach(function(o){return n(new t(i._database,o))})},t.prototype.hasChildren=function(){return L("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(t.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return L("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},t.prototype.getRef=function(){return L("DataSnapshot.ref",0,0,arguments.length),new Cn(this._database,this._delegate.ref)},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Hm=function(){function t(n,i){this.database=n,this._delegate=i}return t.prototype.on=function(n,i,o,a){var l=this,h;L("Query.on",2,4,arguments.length),_e("Query.on","callback",i,!1);var p=t.getCancelAndContextArgs_("Query.on",o,a),f=function(g,_){i.call(p.context,new mi(l.database,g),_)};f.userCallback=i,f.context=p.context;var m=(h=p.cancel)===null||h===void 0?void 0:h.bind(p.context);switch(n){case"value":return Ol(this._delegate,f,m),i;case"child_added":return Qp(this._delegate,f,m),i;case"child_removed":return Jp(this._delegate,f,m),i;case"child_changed":return Xp(this._delegate,f,m),i;case"child_moved":return $p(this._delegate,f,m),i;default:throw new Error(xe("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},t.prototype.off=function(n,i,o){if(L("Query.off",0,3,arguments.length),CI("Query.off",n,!0),_e("Query.off","callback",i,!0),dp("Query.off","context",o,!0),i){var a=function(){};a.userCallback=i,a.context=o,Zp(this._delegate,n,a)}else Zp(this._delegate,n)},t.prototype.get=function(){var n=this;return iT(this._delegate).then(function(i){return new mi(n.database,i)})},t.prototype.once=function(n,i,o,a){var l=this;L("Query.once",1,4,arguments.length),_e("Query.once","callback",i,!0);var h=t.getCancelAndContextArgs_("Query.once",o,a),p=new De,f=function(g,_){var w=new mi(l.database,g);i&&i.call(h.context,w,_),p.resolve(w)};f.userCallback=i,f.context=h.context;var m=function(g){h.cancel&&h.cancel.call(h.context,g),p.reject(g)};switch(n){case"value":Ol(this._delegate,f,m,{onlyOnce:!0});break;case"child_added":Qp(this._delegate,f,m,{onlyOnce:!0});break;case"child_removed":Jp(this._delegate,f,m,{onlyOnce:!0});break;case"child_changed":Xp(this._delegate,f,m,{onlyOnce:!0});break;case"child_moved":$p(this._delegate,f,m,{onlyOnce:!0});break;default:throw new Error(xe("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return p.promise},t.prototype.limitToFirst=function(n){return L("Query.limitToFirst",1,1,arguments.length),new t(this.database,it(this._delegate,fT(n)))},t.prototype.limitToLast=function(n){return L("Query.limitToLast",1,1,arguments.length),new t(this.database,it(this._delegate,pT(n)))},t.prototype.orderByChild=function(n){return L("Query.orderByChild",1,1,arguments.length),new t(this.database,it(this._delegate,mT(n)))},t.prototype.orderByKey=function(){return L("Query.orderByKey",0,0,arguments.length),new t(this.database,it(this._delegate,yT()))},t.prototype.orderByPriority=function(){return L("Query.orderByPriority",0,0,arguments.length),new t(this.database,it(this._delegate,wT()))},t.prototype.orderByValue=function(){return L("Query.orderByValue",0,0,arguments.length),new t(this.database,it(this._delegate,ET()))},t.prototype.startAt=function(n,i){return n===void 0&&(n=null),L("Query.startAt",0,2,arguments.length),new t(this.database,it(this._delegate,uT(n,i)))},t.prototype.startAfter=function(n,i){return n===void 0&&(n=null),L("Query.startAfter",0,2,arguments.length),new t(this.database,it(this._delegate,cT(n,i)))},t.prototype.endAt=function(n,i){return n===void 0&&(n=null),L("Query.endAt",0,2,arguments.length),new t(this.database,it(this._delegate,oT(n,i)))},t.prototype.endBefore=function(n,i){return n===void 0&&(n=null),L("Query.endBefore",0,2,arguments.length),new t(this.database,it(this._delegate,aT(n,i)))},t.prototype.equalTo=function(n,i){return L("Query.equalTo",1,2,arguments.length),new t(this.database,it(this._delegate,TT(n,i)))},t.prototype.toString=function(){return L("Query.toString",0,0,arguments.length),this._delegate.toString()},t.prototype.toJSON=function(){return L("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.isEqual=function(n){if(L("Query.isEqual",1,1,arguments.length),!(n instanceof t)){var i="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(i)}return this._delegate.isEqual(n._delegate)},t.getCancelAndContextArgs_=function(n,i,o){var a={cancel:void 0,context:void 0};if(i&&o)a.cancel=i,_e(n,"cancel",a.cancel,!0),a.context=o,dp(n,"context",a.context,!0);else if(i)if(typeof i=="object"&&i!==null)a.context=i;else if(typeof i=="function")a.cancel=i;else throw new Error(xe(n,"cancelOrContext")+" must either be a cancel callback or a context object.");return a},Object.defineProperty(t.prototype,"ref",{get:function(){return new Cn(this.database,new bt(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),t}(),Cn=function(t){ae(n,t);function n(i,o){var a=t.call(this,i,new Xe(o._repo,o._path,new em,!1))||this;return a.database=i,a._delegate=o,a}return n.prototype.getKey=function(){return L("Reference.key",0,0,arguments.length),this._delegate.key},n.prototype.child=function(i){return L("Reference.child",1,1,arguments.length),typeof i=="number"&&(i=String(i)),new n(this.database,On(this._delegate,i))},n.prototype.getParent=function(){L("Reference.parent",0,0,arguments.length);var i=this._delegate.parent;return i?new n(this.database,i):null},n.prototype.getRoot=function(){return L("Reference.root",0,0,arguments.length),new n(this.database,this._delegate.root)},n.prototype.set=function(i,o){L("Reference.set",1,2,arguments.length),_e("Reference.set","onComplete",o,!0);var a=gc(this._delegate,i);return o&&a.then(function(){return o(null)},function(l){return o(l)}),a},n.prototype.update=function(i,o){if(L("Reference.update",1,2,arguments.length),Array.isArray(i)){for(var a={},l=0;l<i.length;++l)a[""+l]=i[l];i=a,Ee("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ye("Reference.update",this._delegate._path),_e("Reference.update","onComplete",o,!0);var h=rT(this._delegate,i);return o&&h.then(function(){return o(null)},function(p){return o(p)}),h},n.prototype.setWithPriority=function(i,o,a){L("Reference.setWithPriority",2,3,arguments.length),_e("Reference.setWithPriority","onComplete",a,!0);var l=nT(this._delegate,i,o);return a&&l.then(function(){return a(null)},function(h){return a(h)}),l},n.prototype.remove=function(i){L("Reference.remove",0,1,arguments.length),_e("Reference.remove","onComplete",i,!0);var o=eT(this._delegate);return i&&o.then(function(){return i(null)},function(a){return i(a)}),o},n.prototype.transaction=function(i,o,a){var l=this;L("Reference.transaction",1,3,arguments.length),_e("Reference.transaction","transactionUpdate",i,!1),_e("Reference.transaction","onComplete",o,!0),NI("Reference.transaction","applyLocally",a,!0);var h=jT(this._delegate,i,{applyLocally:a}).then(function(p){return new VT(p.committed,new mi(l.database,p.snapshot))});return o&&h.then(function(p){return o(null,p.committed,p.snapshot)},function(p){return o(p,!1,null)}),h},n.prototype.setPriority=function(i,o){L("Reference.setPriority",1,2,arguments.length),_e("Reference.setPriority","onComplete",o,!0);var a=tT(this._delegate,i);return o&&a.then(function(){return o(null)},function(l){return o(l)}),a},n.prototype.push=function(i,o){var a=this;L("Reference.push",0,2,arguments.length),_e("Reference.push","onComplete",o,!0);var l=ZI(this._delegate,i),h=l.then(function(f){return new n(a.database,f)});o&&h.then(function(){return o(null)},function(f){return o(f)});var p=new n(this.database,l);return p.then=h.then.bind(h),p.catch=h.catch.bind(h,void 0),p},n.prototype.onDisconnect=function(){return Ye("Reference.onDisconnect",this._delegate._path),new UT(new JI(this._delegate._repo,this._delegate._path))},Object.defineProperty(n.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),n}(Hm);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ts=function(){function t(n,i){var o=this;this._delegate=n,this.app=i,this.INTERNAL={delete:function(){return o._delegate._delete()}}}return t.prototype.useEmulator=function(n,i,o){o===void 0&&(o={}),OT(this._delegate,n,i,o)},t.prototype.ref=function(n){if(L("database.ref",0,1,arguments.length),n instanceof Cn){var i=Yp(this._delegate,n.toString());return new Cn(this,i)}else{var i=Mm(this._delegate,n);return new Cn(this,i)}},t.prototype.refFromURL=function(n){var i="database.refFromURL";L(i,1,1,arguments.length);var o=Yp(this._delegate,n);return new Cn(this,o)},t.prototype.goOffline=function(){return L("database.goOffline",0,0,arguments.length),PT(this._delegate)},t.prototype.goOnline=function(){return L("database.goOnline",0,0,arguments.length),DT(this._delegate)},t.ServerValue={TIMESTAMP:LT(),increment:function(n){return MT(n)}},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var WT=function(){Tn.forceDisallow(),Bl.forceAllow()},BT=function(){Bl.forceDisallow()},HT=function(){return Tn.isAvailable()},GT=function(t,n){var i=t._delegate._repo.persistentConnection_;i.securityDebugCallback_=n},qT=function(t,n){GI(t._delegate._repo,n)},zT=function(t,n){qI(t._delegate._repo,n)},KT=function(t){return t._delegate._repo.dataUpdateCount},YT=function(t,n){return xI(t._delegate._repo,n)};function QT(t){var n=t.app,i=t.url,o=t.version,a=t.customAuthImpl,l=t.namespace,h=t.nodeAdmin,p=h===void 0?!1:h;yv(o);var f=new cv("auth-internal",new hv("database-standalone"));return f.setComponent(new Ti("auth-internal",function(){return a},"PRIVATE")),{instance:new ts(Bm(n,f,void 0,i,p),n),namespace:l}}var XT=Object.freeze({__proto__:null,forceLongPolling:WT,forceWebSockets:BT,isWebSocketsAvailable:HT,setSecurityDebugCallback:GT,stats:qT,statsIncrementCounter:zT,dataUpdateCount:KT,interceptServerData:YT,initStandalone:QT});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $T=Nn;Nn.prototype.simpleListen=function(t,n){this.sendRequest("q",{p:t},n)};Nn.prototype.echo=function(t,n){this.sendRequest("echo",{d:t},n)};var JT=Vv,ZT=function(t){var n=Nn.prototype.put;return Nn.prototype.put=function(i,o,a,l){l!==void 0&&(l=t()),n.call(this,i,o,a,l)},function(){Nn.prototype.put=n}},eS=Vl,tS=function(t){return t._delegate._queryIdentifier},nS=function(t){kT(t)},rS=Object.freeze({__proto__:null,DataConnection:$T,RealTimeConnection:JT,hijackHash:ZT,ConnectionTarget:eS,queryIdentifier:tS,forceRestClient:nS});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var iS=ts.ServerValue;function oS(t){yv(t.SDK_VERSION),t.INTERNAL.registerComponent(new Ti("database",function(n,i){var o=i.instanceIdentifier,a=n.getProvider("app").getImmediate(),l=n.getProvider("auth-internal"),h=n.getProvider("app-check-internal");return new ts(Bm(a,l,h,o),a)},"PUBLIC").setServiceProps({Reference:Cn,Query:Hm,Database:ts,DataSnapshot:mi,enableLogging:Ev,INTERNAL:XT,ServerValue:iS,TEST_ACCESS:rS}).setMultipleInstances(!0)),t.registerVersion(Hb,Gb)}oS(x);(function(){var t,n=typeof Object.defineProperties=="function"?Object.defineProperty:function(e,r,s){e!=Array.prototype&&e!=Object.prototype&&(e[r]=s.value)};function i(e){e=[typeof window=="object"&&window,typeof self=="object"&&self,typeof global=="object"&&global,e];for(var r=0;r<e.length;++r){var s=e[r];if(s&&s.Math==Math)return s}return globalThis}var o=i(this);function a(e,r){if(r){var s=o;e=e.split(".");for(var u=0;u<e.length-1;u++){var c=e[u];c in s||(s[c]={}),s=s[c]}e=e[e.length-1],u=s[e],r=r(u),r!=u&&r!=null&&n(s,e,{configurable:!0,writable:!0,value:r})}}function l(e){var r=0;return function(){return r<e.length?{done:!1,value:e[r++]}:{done:!0}}}function h(e){var r=typeof Symbol!="undefined"&&Symbol.iterator&&e[Symbol.iterator];return r?r.call(e):{next:l(e)}}a("Promise",function(e){function r(v){this.b=0,this.c=void 0,this.a=[];var y=this.f();try{v(y.resolve,y.reject)}catch(I){y.reject(I)}}function s(){this.a=null}function u(v){return v instanceof r?v:new r(function(y){y(v)})}if(e)return e;s.prototype.b=function(v){if(this.a==null){this.a=[];var y=this;this.c(function(){y.g()})}this.a.push(v)};var c=o.setTimeout;s.prototype.c=function(v){c(v,0)},s.prototype.g=function(){for(;this.a&&this.a.length;){var v=this.a;this.a=[];for(var y=0;y<v.length;++y){var I=v[y];v[y]=null;try{I()}catch(T){this.f(T)}}}this.a=null},s.prototype.f=function(v){this.c(function(){throw v})},r.prototype.f=function(){function v(T){return function(M){I||(I=!0,T.call(y,M))}}var y=this,I=!1;return{resolve:v(this.m),reject:v(this.g)}},r.prototype.m=function(v){if(v===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(v instanceof r)this.s(v);else{e:switch(typeof v){case"object":var y=v!=null;break e;case"function":y=!0;break e;default:y=!1}y?this.v(v):this.h(v)}},r.prototype.v=function(v){var y=void 0;try{y=v.then}catch(I){this.g(I);return}typeof y=="function"?this.u(y,v):this.h(v)},r.prototype.g=function(v){this.i(2,v)},r.prototype.h=function(v){this.i(1,v)},r.prototype.i=function(v,y){if(this.b!=0)throw Error("Cannot settle("+v+", "+y+"): Promise already settled in state"+this.b);this.b=v,this.c=y,this.l()},r.prototype.l=function(){if(this.a!=null){for(var v=0;v<this.a.length;++v)d.b(this.a[v]);this.a=null}};var d=new s;return r.prototype.s=function(v){var y=this.f();v.Ra(y.resolve,y.reject)},r.prototype.u=function(v,y){var I=this.f();try{v.call(y,I.resolve,I.reject)}catch(T){I.reject(T)}},r.prototype.then=function(v,y){function I(z,ye){return typeof z=="function"?function(At){try{T(z(At))}catch(nl){M(nl)}}:ye}var T,M,Q=new r(function(z,ye){T=z,M=ye});return this.Ra(I(v,T),I(y,M)),Q},r.prototype.catch=function(v){return this.then(void 0,v)},r.prototype.Ra=function(v,y){function I(){switch(T.b){case 1:v(T.c);break;case 2:y(T.c);break;default:throw Error("Unexpected state: "+T.b)}}var T=this;this.a==null?d.b(I):this.a.push(I)},r.resolve=u,r.reject=function(v){return new r(function(y,I){I(v)})},r.race=function(v){return new r(function(y,I){for(var T=h(v),M=T.next();!M.done;M=T.next())u(M.value).Ra(y,I)})},r.all=function(v){var y=h(v),I=y.next();return I.done?u([]):new r(function(T,M){function Q(At){return function(nl){z[At]=nl,ye--,ye==0&&T(z)}}var z=[],ye=0;do z.push(void 0),ye++,u(I.value).Ra(Q(z.length-1),M),I=y.next();while(!I.done)})},r});var p=p||{},f=this||self,m=/^[\w+/_-]+[=]{0,2}$/,g=null;function _(e){return(e=e.querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&m.test(e)?e:""}function w(){}function E(e){var r=typeof e;return r!="object"?r:e?Array.isArray(e)?"array":r:"null"}function S(e){var r=E(e);return r=="array"||r=="object"&&typeof e.length=="number"}function N(e){return E(e)=="function"}function C(e){var r=typeof e;return r=="object"&&e!=null||r=="function"}function P(e){return Object.prototype.hasOwnProperty.call(e,q)&&e[q]||(e[q]=++ue)}var q="closure_uid_"+(1e9*Math.random()>>>0),ue=0;function Ot(e,r,s){return e.call.apply(e.bind,arguments)}function br(e,r,s){if(!e)throw Error();if(2<arguments.length){var u=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(c,u),e.apply(r,c)}}return function(){return e.apply(r,arguments)}}function D(e,r,s){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?D=Ot:D=br,D.apply(null,arguments)}function Pt(e,r){var s=Array.prototype.slice.call(arguments,1);return function(){var u=s.slice();return u.push.apply(u,arguments),e.apply(this,u)}}function j(e,r){function s(){}s.prototype=r.prototype,e.bb=r.prototype,e.prototype=new s,e.prototype.constructor=e}function Es(e){return e}function b(e,r,s){this.code=Er+e,this.message=r||Gm[e]||"",this.a=s||null}j(b,Error),b.prototype.w=function(){var e={code:this.code,message:this.message};return this.a&&(e.serverResponse=this.a),e},b.prototype.toJSON=function(){return this.w()};function yc(e){var r=e&&e.code;return r?new b(r.substring(Er.length),e.message,e.serverResponse):null}var Er="auth/",Gm={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},Is={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function Ir(e){for(var r in Is)if(Is[r].id===e)return e=Is[r],{firebaseEndpoint:e.Ua,secureTokenEndpoint:e.$a,identityPlatformEndpoint:e.Xa};return null}var Tr;Tr=Ir("__EID__")?"__EID__":void 0;function _c(e){if(!e)return!1;try{return!!e.$goog_Thenable}catch{return!1}}function Le(e){if(Error.captureStackTrace)Error.captureStackTrace(this,Le);else{var r=Error().stack;r&&(this.stack=r)}e&&(this.message=String(e))}j(Le,Error),Le.prototype.name="CustomError";function Ts(e,r){e=e.split("%s");for(var s="",u=e.length-1,c=0;c<u;c++)s+=e[c]+(c<r.length?r[c]:"%s");Le.call(this,s+e[u])}j(Ts,Le),Ts.prototype.name="AssertionError";function Ln(e,r){throw new Ts("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))}function Ss(e,r){this.c=e,this.f=r,this.b=0,this.a=null}Ss.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};function wc(e,r){e.f(r),100>e.b&&(e.b++,r.next=e.a,e.a=r)}function bc(){this.b=this.a=null}var Ec=new Ss(function(){return new Cs},function(e){e.reset()});bc.prototype.add=function(e,r){var s=Ec.get();s.set(e,r),this.b?this.b.next=s:this.a=s,this.b=s};function qm(){var e=Qc,r=null;return e.a&&(r=e.a,e.a=e.a.next,e.a||(e.b=null),r.next=null),r}function Cs(){this.next=this.b=this.a=null}Cs.prototype.set=function(e,r){this.a=e,this.b=r,this.next=null},Cs.prototype.reset=function(){this.next=this.b=this.a=null};var Ic=Array.prototype.indexOf?function(e,r){return Array.prototype.indexOf.call(e,r,void 0)}:function(e,r){if(typeof e=="string")return typeof r!="string"||r.length!=1?-1:e.indexOf(r,0);for(var s=0;s<e.length;s++)if(s in e&&e[s]===r)return s;return-1},ie=Array.prototype.forEach?function(e,r,s){Array.prototype.forEach.call(e,r,s)}:function(e,r,s){for(var u=e.length,c=typeof e=="string"?e.split(""):e,d=0;d<u;d++)d in c&&r.call(s,c[d],d,e)};function zm(e,r){for(var s=typeof e=="string"?e.split(""):e,u=e.length-1;0<=u;--u)u in s&&r.call(void 0,s[u],u,e)}var Km=Array.prototype.filter?function(e,r){return Array.prototype.filter.call(e,r,void 0)}:function(e,r){for(var s=e.length,u=[],c=0,d=typeof e=="string"?e.split(""):e,v=0;v<s;v++)if(v in d){var y=d[v];r.call(void 0,y,v,e)&&(u[c++]=y)}return u},xi=Array.prototype.map?function(e,r){return Array.prototype.map.call(e,r,void 0)}:function(e,r){for(var s=e.length,u=Array(s),c=typeof e=="string"?e.split(""):e,d=0;d<s;d++)d in c&&(u[d]=r.call(void 0,c[d],d,e));return u},Ym=Array.prototype.some?function(e,r){return Array.prototype.some.call(e,r,void 0)}:function(e,r){for(var s=e.length,u=typeof e=="string"?e.split(""):e,c=0;c<s;c++)if(c in u&&r.call(void 0,u[c],c,e))return!0;return!1};function Qm(e){e:{for(var r=Ny,s=e.length,u=typeof e=="string"?e.split(""):e,c=0;c<s;c++)if(c in u&&r.call(void 0,u[c],c,e)){r=c;break e}r=-1}return 0>r?null:typeof e=="string"?e.charAt(r):e[r]}function Et(e,r){return 0<=Ic(e,r)}function Li(e,r){r=Ic(e,r);var s;return(s=0<=r)&&Array.prototype.splice.call(e,r,1),s}function $e(e,r){var s=0;zm(e,function(u,c){r.call(void 0,u,c,e)&&Array.prototype.splice.call(e,c,1).length==1&&s++})}function As(e){return Array.prototype.concat.apply([],arguments)}function Zt(e){var r=e.length;if(0<r){for(var s=Array(r),u=0;u<r;u++)s[u]=e[u];return s}return[]}var Tc=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},Xm=/&/g,$m=/</g,Jm=/>/g,Zm=/"/g,eg=/'/g,tg=/\x00/g,ng=/[\x00&<>"']/;function Z(e,r){return e.indexOf(r)!=-1}function Ns(e,r){return e<r?-1:e>r?1:0}var Mn;e:{var Sc=f.navigator;if(Sc){var Cc=Sc.userAgent;if(Cc){Mn=Cc;break e}}Mn=""}function pe(e){return Z(Mn,e)}function Ac(e,r){for(var s in e)r.call(void 0,e[s],s,e)}function en(e){for(var r in e)return!1;return!0}function Dt(e){var r={},s;for(s in e)r[s]=e[s];return r}var Nc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ne(e,r){for(var s,u,c=1;c<arguments.length;c++){u=arguments[c];for(s in u)e[s]=u[s];for(var d=0;d<Nc.length;d++)s=Nc[d],Object.prototype.hasOwnProperty.call(u,s)&&(e[s]=u[s])}}function kc(e,r){e:{try{var s=e&&e.ownerDocument,u=s&&(s.defaultView||s.parentWindow);if(u=u||f,u.Element&&u.Location){var c=u;break e}}catch{}c=null}if(c&&typeof c[r]!="undefined"&&(!e||!(e instanceof c[r])&&(e instanceof c.Location||e instanceof c.Element))){if(C(e))try{var d=e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e)}catch{d="<object could not be stringified>"}else d=e===void 0?"undefined":e===null?"null":typeof e;Ln("Argument is not a %s (or a non-Element, non-Location mock); got: %s",r,d)}}function lt(e,r){this.a=e===Mi&&r||"",this.b=Rc}lt.prototype.ta=!0,lt.prototype.sa=function(){return this.a},lt.prototype.toString=function(){return"Const{"+this.a+"}"};function ks(e){return e instanceof lt&&e.constructor===lt&&e.b===Rc?e.a:(Ln("expected object of type Const, got '"+e+"'"),"type_error:Const")}var Rc={},Mi={},Fi;function Oc(){if(Fi===void 0){var e=null,r=f.trustedTypes;if(r&&r.createPolicy){try{e=r.createPolicy("goog#html",{createHTML:Es,createScript:Es,createScriptURL:Es})}catch(s){f.console&&f.console.error(s.message)}Fi=e}else Fi=e}return Fi}function Fn(e,r){this.a=r===Dc?e:""}Fn.prototype.ta=!0,Fn.prototype.sa=function(){return this.a.toString()},Fn.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};function Pc(e){return e instanceof Fn&&e.constructor===Fn?e.a:(Ln("expected object of type TrustedResourceUrl, got '"+e+"' of type "+E(e)),"type_error:TrustedResourceUrl")}function Rs(e,r){var s=ks(e);if(!ig.test(s))throw Error("Invalid TrustedResourceUrl format: "+s);return e=s.replace(rg,function(u,c){if(!Object.prototype.hasOwnProperty.call(r,c))throw Error('Found marker, "'+c+'", in format string, "'+s+'", but no valid label mapping found in args: '+JSON.stringify(r));return u=r[c],u instanceof lt?ks(u):encodeURIComponent(String(u))}),og(e)}var rg=/%{(\w+)}/g,ig=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Dc={};function og(e){var r=Oc();return e=r?r.createScriptURL(e):e,new Fn(e,Dc)}function ke(e,r){this.a=r===Sr?e:""}ke.prototype.ta=!0,ke.prototype.sa=function(){return this.a.toString()},ke.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};function ji(e){return e instanceof ke&&e.constructor===ke?e.a:(Ln("expected object of type SafeUrl, got '"+e+"' of type "+E(e)),"type_error:SafeUrl")}var sg=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,ag=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,xc=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Lc(e){if(e instanceof ke)return e;if(e=typeof e=="object"&&e.ta?e.sa():String(e),xc.test(e))e=new ke(e,Sr);else{e=String(e),e=e.replace(/(%0A|%0D)/g,"");var r=e.match(ag);e=r&&sg.test(r[1])?new ke(e,Sr):null}return e}function Mc(e){return e instanceof ke?e:(e=typeof e=="object"&&e.ta?e.sa():String(e),xc.test(e)||(e="about:invalid#zClosurez"),new ke(e,Sr))}var Sr={},Fc=new ke("about:invalid#zClosurez",Sr);function jn(e,r,s){this.a=s===jc?e:""}jn.prototype.ta=!0,jn.prototype.sa=function(){return this.a.toString()},jn.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};function ug(e){return e instanceof jn&&e.constructor===jn?e.a:(Ln("expected object of type SafeHtml, got '"+e+"' of type "+E(e)),"type_error:SafeHtml")}var jc={};function lg(e,r){kc(e,"HTMLScriptElement"),e.src=Pc(r),(r=e.ownerDocument&&e.ownerDocument.defaultView)&&r!=f?r=_(r.document):(g===null&&(g=_(f.document)),r=g),r&&e.setAttribute("nonce",r)}function Uc(e,r,s,u){return e=e instanceof ke?e:Mc(e),r=r||f,s=s instanceof lt?ks(s):s||"",r.open(ji(e),s,u,void 0)}function Vc(e,r){for(var s=e.split("%s"),u="",c=Array.prototype.slice.call(arguments,1);c.length&&1<s.length;)u+=s.shift()+c.shift();return u+s.join("%s")}function Os(e){return ng.test(e)&&(e.indexOf("&")!=-1&&(e=e.replace(Xm,"&amp;")),e.indexOf("<")!=-1&&(e=e.replace($m,"&lt;")),e.indexOf(">")!=-1&&(e=e.replace(Jm,"&gt;")),e.indexOf('"')!=-1&&(e=e.replace(Zm,"&quot;")),e.indexOf("'")!=-1&&(e=e.replace(eg,"&#39;")),e.indexOf("\0")!=-1&&(e=e.replace(tg,"&#0;"))),e}function Ps(e){return Ps[" "](e),e}Ps[" "]=w;function cg(e,r){var s=pg;return Object.prototype.hasOwnProperty.call(s,e)?s[e]:s[e]=r(e)}var hg=pe("Opera"),Je=pe("Trident")||pe("MSIE"),Wc=pe("Edge"),fg=Wc||Je,Bc=pe("Gecko")&&!(Z(Mn.toLowerCase(),"webkit")&&!pe("Edge"))&&!(pe("Trident")||pe("MSIE"))&&!pe("Edge"),dg=Z(Mn.toLowerCase(),"webkit")&&!pe("Edge");function Hc(){var e=f.document;return e?e.documentMode:void 0}var Ui;e:{var Ds="",xs=function(){var e=Mn;if(Bc)return/rv:([^\);]+)(\)|;)/.exec(e);if(Wc)return/Edge\/([\d\.]+)/.exec(e);if(Je)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e);if(dg)return/WebKit\/(\S+)/.exec(e);if(hg)return/(?:Version)[ \/]?(\S+)/.exec(e)}();if(xs&&(Ds=xs?xs[1]:""),Je){var Ls=Hc();if(Ls!=null&&Ls>parseFloat(Ds)){Ui=String(Ls);break e}}Ui=Ds}var pg={};function Gc(e){return cg(e,function(){for(var r=0,s=Tc(String(Ui)).split("."),u=Tc(String(e)).split("."),c=Math.max(s.length,u.length),d=0;r==0&&d<c;d++){var v=s[d]||"",y=u[d]||"";do{if(v=/(\d*)(\D*)(.*)/.exec(v)||["","","",""],y=/(\d*)(\D*)(.*)/.exec(y)||["","","",""],v[0].length==0&&y[0].length==0)break;r=Ns(v[1].length==0?0:parseInt(v[1],10),y[1].length==0?0:parseInt(y[1],10))||Ns(v[2].length==0,y[2].length==0)||Ns(v[2],y[2]),v=v[3],y=y[3]}while(r==0)}return 0<=r})}var Ms;if(f.document&&Je){var qc=Hc();Ms=qc||parseInt(Ui,10)||void 0}else Ms=void 0;var xt=Ms;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch{}var vg=!Je||9<=Number(xt);function Cr(e){var r=document;return typeof e=="string"?r.getElementById(e):e}function zc(e,r){Ac(r,function(s,u){s&&typeof s=="object"&&s.ta&&(s=s.sa()),u=="style"?e.style.cssText=s:u=="class"?e.className=s:u=="for"?e.htmlFor=s:Kc.hasOwnProperty(u)?e.setAttribute(Kc[u],s):u.lastIndexOf("aria-",0)==0||u.lastIndexOf("data-",0)==0?e.setAttribute(u,s):e[u]=s})}var Kc={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function mg(e,r,s){var u=arguments,c=document,d=String(u[0]),v=u[1];if(!vg&&v&&(v.name||v.type)){if(d=["<",d],v.name&&d.push(' name="',Os(v.name),'"'),v.type){d.push(' type="',Os(v.type),'"');var y={};Ne(y,v),delete y.type,v=y}d.push(">"),d=d.join("")}return d=Vi(c,d),v&&(typeof v=="string"?d.className=v:Array.isArray(v)?d.className=v.join(" "):zc(d,v)),2<u.length&&gg(c,d,u),d}function gg(e,r,s){function u(y){y&&r.appendChild(typeof y=="string"?e.createTextNode(y):y)}for(var c=2;c<s.length;c++){var d=s[c];if(!S(d)||C(d)&&0<d.nodeType)u(d);else{e:{if(d&&typeof d.length=="number"){if(C(d)){var v=typeof d.item=="function"||typeof d.item=="string";break e}if(N(d)){v=typeof d.item=="function";break e}}v=!1}ie(v?Zt(d):d,u)}}}function Vi(e,r){return r=String(r),e.contentType==="application/xhtml+xml"&&(r=r.toLowerCase()),e.createElement(r)}function Yc(e){f.setTimeout(function(){throw e},0)}var Fs;function yg(){var e=f.MessageChannel;if(typeof e=="undefined"&&typeof window!="undefined"&&window.postMessage&&window.addEventListener&&!pe("Presto")&&(e=function(){var c=Vi(document,"IFRAME");c.style.display="none",document.documentElement.appendChild(c);var d=c.contentWindow;c=d.document,c.open(),c.close();var v="callImmediate"+Math.random(),y=d.location.protocol=="file:"?"*":d.location.protocol+"//"+d.location.host;c=D(function(I){(y=="*"||I.origin==y)&&I.data==v&&this.port1.onmessage()},this),d.addEventListener("message",c,!1),this.port1={},this.port2={postMessage:function(){d.postMessage(v,y)}}}),typeof e!="undefined"&&!pe("Trident")&&!pe("MSIE")){var r=new e,s={},u=s;return r.port1.onmessage=function(){if(s.next!==void 0){s=s.next;var c=s.Hb;s.Hb=null,c()}},function(c){u.next={Hb:c},u=u.next,r.port2.postMessage(0)}}return function(c){f.setTimeout(c,0)}}function Wi(e,r){Bi||_g(),js||(Bi(),js=!0),Qc.add(e,r)}var Bi;function _g(){if(f.Promise&&f.Promise.resolve){var e=f.Promise.resolve(void 0);Bi=function(){e.then(Xc)}}else Bi=function(){var r=Xc;!N(f.setImmediate)||f.Window&&f.Window.prototype&&!pe("Edge")&&f.Window.prototype.setImmediate==f.setImmediate?(Fs||(Fs=yg()),Fs(r)):f.setImmediate(r)}}var js=!1,Qc=new bc;function Xc(){for(var e;e=qm();){try{e.a.call(e.b)}catch(r){Yc(r)}wc(Ec,e)}js=!1}function B(e,r){if(this.a=tn,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,e!=w)try{var s=this;e.call(r,function(u){nn(s,Ar,u)},function(u){if(!(u instanceof Un))try{throw u instanceof Error?u:Error("Promise rejected.")}catch{}nn(s,It,u)})}catch(u){nn(this,It,u)}}var tn=0,Ar=2,It=3;function $c(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}$c.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Jc=new Ss(function(){return new $c},function(e){e.reset()});function Us(e,r,s){var u=Jc.get();return u.g=e,u.b=r,u.f=s,u}function O(e){if(e instanceof B)return e;var r=new B(w);return nn(r,Ar,e),r}function te(e){return new B(function(r,s){s(e)})}function Zc(e,r,s){rh(e,r,s,null)||Wi(Pt(r,e))}function wg(e){return new B(function(r,s){var u=e.length,c=[];if(u)for(var d=function(T,M){u--,c[T]=M,u==0&&r(c)},v=function(T){s(T)},y=0,I;y<e.length;y++)I=e[y],Zc(I,Pt(d,y),v);else r(c)})}function eh(e){return new B(function(r){var s=e.length,u=[];if(s)for(var c=function(y,I,T){s--,u[y]=I?{Qb:!0,value:T}:{Qb:!1,reason:T},s==0&&r(u)},d=0,v;d<e.length;d++)v=e[d],Zc(v,Pt(c,d,!0),Pt(c,d,!1));else r(u)})}B.prototype.then=function(e,r,s){return nh(this,N(e)?e:null,N(r)?r:null,s)},B.prototype.$goog_Thenable=!0,t=B.prototype,t.oa=function(e,r){return e=Us(e,e,r),e.c=!0,Vs(this,e),this},t.o=function(e,r){return nh(this,null,e,r)},t.cancel=function(e){if(this.a==tn){var r=new Un(e);Wi(function(){th(this,r)},this)}};function th(e,r){if(e.a==tn)if(e.c){var s=e.c;if(s.b){for(var u=0,c=null,d=null,v=s.b;v&&(v.c||(u++,v.a==e&&(c=v),!(c&&1<u)));v=v.next)c||(d=v);c&&(s.a==tn&&u==1?th(s,r):(d?(u=d,u.next==s.f&&(s.f=u),u.next=u.next.next):oh(s),sh(s,c,It,r)))}e.c=null}else nn(e,It,r)}function Vs(e,r){e.b||e.a!=Ar&&e.a!=It||ih(e),e.f?e.f.next=r:e.b=r,e.f=r}function nh(e,r,s,u){var c=Us(null,null,null);return c.a=new B(function(d,v){c.g=r?function(y){try{var I=r.call(u,y);d(I)}catch(T){v(T)}}:d,c.b=s?function(y){try{var I=s.call(u,y);I===void 0&&y instanceof Un?v(y):d(I)}catch(T){v(T)}}:v}),c.a.c=e,Vs(e,c),c.a}t.$c=function(e){this.a=tn,nn(this,Ar,e)},t.ad=function(e){this.a=tn,nn(this,It,e)};function nn(e,r,s){e.a==tn&&(e===s&&(r=It,s=new TypeError("Promise cannot resolve to itself")),e.a=1,rh(s,e.$c,e.ad,e)||(e.i=s,e.a=r,e.c=null,ih(e),r!=It||s instanceof Un||Eg(e,s)))}function rh(e,r,s,u){if(e instanceof B)return Vs(e,Us(r||w,s||null,u)),!0;if(_c(e))return e.then(r,s,u),!0;if(C(e))try{var c=e.then;if(N(c))return bg(e,c,r,s,u),!0}catch(d){return s.call(u,d),!0}return!1}function bg(e,r,s,u,c){function d(I){y||(y=!0,u.call(c,I))}function v(I){y||(y=!0,s.call(c,I))}var y=!1;try{r.call(e,v,d)}catch(I){d(I)}}function ih(e){e.h||(e.h=!0,Wi(e.gc,e))}function oh(e){var r=null;return e.b&&(r=e.b,e.b=r.next,r.next=null),e.b||(e.f=null),r}t.gc=function(){for(var e;e=oh(this);)sh(this,e,this.a,this.i);this.h=!1};function sh(e,r,s,u){if(s==It&&r.b&&!r.c)for(;e&&e.g;e=e.c)e.g=!1;if(r.a)r.a.c=null,ah(r,s,u);else try{r.c?r.g.call(r.f):ah(r,s,u)}catch(c){uh.call(null,c)}wc(Jc,r)}function ah(e,r,s){r==Ar?e.g.call(e.f,s):e.b&&e.b.call(e.f,s)}function Eg(e,r){e.g=!0,Wi(function(){e.g&&uh.call(null,r)})}var uh=Yc;function Un(e){Le.call(this,e)}j(Un,Le),Un.prototype.name="cancel";function Hi(){this.ya=this.ya,this.pa=this.pa}var Ig=0;Hi.prototype.ya=!1;function lh(e){!e.ya&&(e.ya=!0,e.Da(),Ig!=0)&&P(e)}Hi.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var Tg=Object.freeze||function(e){return e},ch=!Je||9<=Number(xt),Sg=Je&&!Gc("9"),Cg=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var e=!1,r=Object.defineProperty({},"passive",{get:function(){e=!0}});try{f.addEventListener("test",w,r),f.removeEventListener("test",w,r)}catch{}return e}();function Re(e,r){this.type=e,this.b=this.target=r,this.defaultPrevented=!1}Re.prototype.preventDefault=function(){this.defaultPrevented=!0};function rn(e,r){if(Re.call(this,e?e.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,e){var s=this.type=e.type,u=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.b=r,r=e.relatedTarget){if(Bc){e:{try{Ps(r.nodeName);var c=!0;break e}catch{}c=!1}c||(r=null)}}else s=="mouseover"?r=e.fromElement:s=="mouseout"&&(r=e.toElement);this.relatedTarget=r,u?(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0):(this.clientX=e.clientX!==void 0?e.clientX:e.pageX,this.clientY=e.clientY!==void 0?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=typeof e.pointerType=="string"?e.pointerType:Ag[e.pointerType]||"",this.a=e,e.defaultPrevented&&this.preventDefault()}}j(rn,Re);var Ag=Tg({2:"touch",3:"pen",4:"mouse"});rn.prototype.preventDefault=function(){rn.bb.preventDefault.call(this);var e=this.a;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,Sg)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch{}},rn.prototype.g=function(){return this.a};var Nr="closure_listenable_"+(1e6*Math.random()|0),Ng=0;function kg(e,r,s,u,c){this.listener=e,this.proxy=null,this.src=r,this.type=s,this.capture=!!u,this.Wa=c,this.key=++Ng,this.wa=this.Qa=!1}function Gi(e){e.wa=!0,e.listener=null,e.proxy=null,e.src=null,e.Wa=null}function qi(e){this.src=e,this.a={},this.b=0}qi.prototype.add=function(e,r,s,u,c){var d=e.toString();e=this.a[d],e||(e=this.a[d]=[],this.b++);var v=Bs(e,r,u,c);return-1<v?(r=e[v],s||(r.Qa=!1)):(r=new kg(r,this.src,d,!!u,c),r.Qa=s,e.push(r)),r};function Ws(e,r){var s=r.type;s in e.a&&Li(e.a[s],r)&&(Gi(r),e.a[s].length==0&&(delete e.a[s],e.b--))}function Bs(e,r,s,u){for(var c=0;c<e.length;++c){var d=e[c];if(!d.wa&&d.listener==r&&d.capture==!!s&&d.Wa==u)return c}return-1}var Hs="closure_lm_"+(1e6*Math.random()|0),Gs={};function He(e,r,s,u,c){if(u&&u.once)qs(e,r,s,u,c);else if(Array.isArray(r))for(var d=0;d<r.length;d++)He(e,r[d],s,u,c);else s=Ks(s),e&&e[Nr]?mh(e,r,s,C(u)?!!u.capture:!!u,c):hh(e,r,s,!1,u,c)}function hh(e,r,s,u,c,d){if(!r)throw Error("Invalid event type");var v=C(c)?!!c.capture:!!c,y=zi(e);if(y||(e[Hs]=y=new qi(e)),s=y.add(r,s,u,v,d),!s.proxy)if(u=Rg(),s.proxy=u,u.src=e,u.listener=s,e.addEventListener)Cg||(c=v),c===void 0&&(c=!1),e.addEventListener(r.toString(),u,c);else if(e.attachEvent)e.attachEvent(dh(r.toString()),u);else if(e.addListener&&e.removeListener)e.addListener(u);else throw Error("addEventListener and attachEvent are unavailable.")}function Rg(){var e=Og,r=ch?function(s){return e.call(r.src,r.listener,s)}:function(s){if(s=e.call(r.src,r.listener,s),!s)return s};return r}function qs(e,r,s,u,c){if(Array.isArray(r))for(var d=0;d<r.length;d++)qs(e,r[d],s,u,c);else s=Ks(s),e&&e[Nr]?Ys(e,r,s,C(u)?!!u.capture:!!u,c):hh(e,r,s,!0,u,c)}function Me(e,r,s,u,c){if(Array.isArray(r))for(var d=0;d<r.length;d++)Me(e,r[d],s,u,c);else u=C(u)?!!u.capture:!!u,s=Ks(s),e&&e[Nr]?(e=e.v,r=String(r).toString(),r in e.a&&(d=e.a[r],s=Bs(d,s,u,c),-1<s&&(Gi(d[s]),Array.prototype.splice.call(d,s,1),d.length==0&&(delete e.a[r],e.b--)))):e&&(e=zi(e))&&(r=e.a[r.toString()],e=-1,r&&(e=Bs(r,s,u,c)),(s=-1<e?r[e]:null)&&fh(s))}function fh(e){if(typeof e!="number"&&e&&!e.wa){var r=e.src;if(r&&r[Nr])Ws(r.v,e);else{var s=e.type,u=e.proxy;r.removeEventListener?r.removeEventListener(s,u,e.capture):r.detachEvent?r.detachEvent(dh(s),u):r.addListener&&r.removeListener&&r.removeListener(u),(s=zi(r))?(Ws(s,e),s.b==0&&(s.src=null,r[Hs]=null)):Gi(e)}}}function dh(e){return e in Gs?Gs[e]:Gs[e]="on"+e}function ph(e,r,s,u){var c=!0;if((e=zi(e))&&(r=e.a[r.toString()]))for(r=r.concat(),e=0;e<r.length;e++){var d=r[e];d&&d.capture==s&&!d.wa&&(d=vh(d,u),c=c&&d!==!1)}return c}function vh(e,r){var s=e.listener,u=e.Wa||e.src;return e.Qa&&fh(e),s.call(u,r)}function Og(e,r){if(e.wa)return!0;if(!ch){if(!r)e:{r=["window","event"];for(var s=f,u=0;u<r.length;u++)if(s=s[r[u]],s==null){r=null;break e}r=s}if(u=r,r=new rn(u,this),s=!0,!(0>u.keyCode||u.returnValue!=null)){e:{var c=!1;if(u.keyCode==0)try{u.keyCode=-1;break e}catch{c=!0}(c||u.returnValue==null)&&(u.returnValue=!0)}for(u=[],c=r.b;c;c=c.parentNode)u.push(c);for(e=e.type,c=u.length-1;0<=c;c--){r.b=u[c];var d=ph(u[c],e,!0,r);s=s&&d}for(c=0;c<u.length;c++)r.b=u[c],d=ph(u[c],e,!1,r),s=s&&d}return s}return vh(e,new rn(r,this))}function zi(e){return e=e[Hs],e instanceof qi?e:null}var zs="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ks(e){return N(e)?e:(e[zs]||(e[zs]=function(r){return e.handleEvent(r)}),e[zs])}function Te(){Hi.call(this),this.v=new qi(this),this.bc=this,this.hb=null}j(Te,Hi),Te.prototype[Nr]=!0,Te.prototype.addEventListener=function(e,r,s,u){He(this,e,r,s,u)},Te.prototype.removeEventListener=function(e,r,s,u){Me(this,e,r,s,u)},Te.prototype.dispatchEvent=function(e){var r,s=this.hb;if(s)for(r=[];s;s=s.hb)r.push(s);s=this.bc;var u=e.type||e;if(typeof e=="string")e=new Re(e,s);else if(e instanceof Re)e.target=e.target||s;else{var c=e;e=new Re(u,s),Ne(e,c)}if(c=!0,r)for(var d=r.length-1;0<=d;d--){var v=e.b=r[d];c=Ki(v,u,!0,e)&&c}if(v=e.b=s,c=Ki(v,u,!0,e)&&c,c=Ki(v,u,!1,e)&&c,r)for(d=0;d<r.length;d++)v=e.b=r[d],c=Ki(v,u,!1,e)&&c;return c},Te.prototype.Da=function(){if(Te.bb.Da.call(this),this.v){var e=this.v,r;for(r in e.a){for(var s=e.a[r],u=0;u<s.length;u++)Gi(s[u]);delete e.a[r],e.b--}}this.hb=null};function mh(e,r,s,u,c){e.v.add(String(r),s,!1,u,c)}function Ys(e,r,s,u,c){e.v.add(String(r),s,!0,u,c)}function Ki(e,r,s,u){if(r=e.v.a[String(r)],!r)return!0;r=r.concat();for(var c=!0,d=0;d<r.length;++d){var v=r[d];if(v&&!v.wa&&v.capture==s){var y=v.listener,I=v.Wa||v.src;v.Qa&&Ws(e.v,v),c=y.call(I,u)!==!1&&c}}return c&&!u.defaultPrevented}function Qs(e,r,s){if(N(e))s&&(e=D(e,s));else if(e&&typeof e.handleEvent=="function")e=D(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(r)?-1:f.setTimeout(e,r||0)}function Vn(e){var r=null;return new B(function(s,u){r=Qs(function(){s(void 0)},e),r==-1&&u(Error("Failed to schedule timer."))}).o(function(s){throw f.clearTimeout(r),s})}function gh(e){if(e.X&&typeof e.X=="function")return e.X();if(typeof e=="string")return e.split("");if(S(e)){for(var r=[],s=e.length,u=0;u<s;u++)r.push(e[u]);return r}r=[],s=0;for(u in e)r[s++]=e[u];return r}function yh(e){if(e.Y&&typeof e.Y=="function")return e.Y();if(!e.X||typeof e.X!="function"){if(S(e)||typeof e=="string"){var r=[];e=e.length;for(var s=0;s<e;s++)r.push(s);return r}r=[],s=0;for(var u in e)r[s++]=u;return r}}function Pg(e,r){if(e.forEach&&typeof e.forEach=="function")e.forEach(r,void 0);else if(S(e)||typeof e=="string")ie(e,r,void 0);else for(var s=yh(e),u=gh(e),c=u.length,d=0;d<c;d++)r.call(void 0,u[d],s&&s[d],e)}function Wn(e,r){this.b={},this.a=[],this.c=0;var s=arguments.length;if(1<s){if(s%2)throw Error("Uneven number of arguments");for(var u=0;u<s;u+=2)this.set(arguments[u],arguments[u+1])}else if(e)if(e instanceof Wn)for(s=e.Y(),u=0;u<s.length;u++)this.set(s[u],e.get(s[u]));else for(u in e)this.set(u,e[u])}t=Wn.prototype,t.X=function(){Xs(this);for(var e=[],r=0;r<this.a.length;r++)e.push(this.b[this.a[r]]);return e},t.Y=function(){return Xs(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0};function Xs(e){if(e.c!=e.a.length){for(var r=0,s=0;r<e.a.length;){var u=e.a[r];on(e.b,u)&&(e.a[s++]=u),r++}e.a.length=s}if(e.c!=e.a.length){var c={};for(s=r=0;r<e.a.length;)u=e.a[r],on(c,u)||(e.a[s++]=u,c[u]=1),r++;e.a.length=s}}t.get=function(e,r){return on(this.b,e)?this.b[e]:r},t.set=function(e,r){on(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=r},t.forEach=function(e,r){for(var s=this.Y(),u=0;u<s.length;u++){var c=s[u],d=this.get(c);e.call(r,d,c,this)}};function on(e,r){return Object.prototype.hasOwnProperty.call(e,r)}var _h=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Dg(e,r){if(e){e=e.split("&");for(var s=0;s<e.length;s++){var u=e[s].indexOf("="),c=null;if(0<=u){var d=e[s].substring(0,u);c=e[s].substring(u+1)}else d=e[s];r(d,c?decodeURIComponent(c.replace(/\+/g," ")):"")}}}function Lt(e,r){this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1;var s;e instanceof Lt?(this.i=r!==void 0?r:e.i,kr(this,e.c),this.l=e.l,this.a=e.a,Rr(this,e.g),this.f=e.f,$s(this,Ih(e.b)),this.h=e.h):e&&(s=String(e).match(_h))?(this.i=!!r,kr(this,s[1]||"",!0),this.l=Or(s[2]||""),this.a=Or(s[3]||"",!0),Rr(this,s[4]),this.f=Or(s[5]||"",!0),$s(this,s[6]||"",!0),this.h=Or(s[7]||"")):(this.i=!!r,this.b=new sn(null,this.i))}Lt.prototype.toString=function(){var e=[],r=this.c;r&&e.push(Pr(r,wh,!0),":");var s=this.a;return(s||r=="file")&&(e.push("//"),(r=this.l)&&e.push(Pr(r,wh,!0),"@"),e.push(encodeURIComponent(String(s)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),s=this.g,s!=null&&e.push(":",String(s))),(s=this.f)&&(this.a&&s.charAt(0)!="/"&&e.push("/"),e.push(Pr(s,s.charAt(0)=="/"?Mg:Lg,!0))),(s=this.b.toString())&&e.push("?",s),(s=this.h)&&e.push("#",Pr(s,jg)),e.join("")},Lt.prototype.resolve=function(e){var r=new Lt(this),s=!!e.c;s?kr(r,e.c):s=!!e.l,s?r.l=e.l:s=!!e.a,s?r.a=e.a:s=e.g!=null;var u=e.f;if(s)Rr(r,e.g);else if(s=!!e.f){if(u.charAt(0)!="/")if(this.a&&!this.f)u="/"+u;else{var c=r.f.lastIndexOf("/");c!=-1&&(u=r.f.substr(0,c+1)+u)}if(c=u,c==".."||c==".")u="";else if(Z(c,"./")||Z(c,"/.")){u=c.lastIndexOf("/",0)==0,c=c.split("/");for(var d=[],v=0;v<c.length;){var y=c[v++];y=="."?u&&v==c.length&&d.push(""):y==".."?((1<d.length||d.length==1&&d[0]!="")&&d.pop(),u&&v==c.length&&d.push("")):(d.push(y),u=!0)}u=d.join("/")}else u=c}return s?r.f=u:s=e.b.toString()!=="",s?$s(r,Ih(e.b)):s=!!e.h,s&&(r.h=e.h),r};function kr(e,r,s){e.c=s?Or(r,!0):r,e.c&&(e.c=e.c.replace(/:$/,""))}function Rr(e,r){if(r){if(r=Number(r),isNaN(r)||0>r)throw Error("Bad port number "+r);e.g=r}else e.g=null}function $s(e,r,s){r instanceof sn?(e.b=r,Ug(e.b,e.i)):(s||(r=Pr(r,Fg)),e.b=new sn(r,e.i))}function ce(e,r,s){e.b.set(r,s)}function Ge(e,r){return e.b.get(r)}function Oe(e){return e instanceof Lt?new Lt(e):new Lt(e,void 0)}function Yi(e,r,s,u){var c=new Lt(null,void 0);return e&&kr(c,e),r&&(c.a=r),s&&Rr(c,s),u&&(c.f=u),c}function Or(e,r){return e?r?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Pr(e,r,s){return typeof e=="string"?(e=encodeURI(e).replace(r,xg),s&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function xg(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var wh=/[#\/\?@]/g,Lg=/[#\?:]/g,Mg=/[#\?]/g,Fg=/[#\?@]/g,jg=/#/g;function sn(e,r){this.b=this.a=null,this.c=e||null,this.f=!!r}function Mt(e){e.a||(e.a=new Wn,e.b=0,e.c&&Dg(e.c,function(r,s){e.add(decodeURIComponent(r.replace(/\+/g," ")),s)}))}function bh(e){var r=yh(e);if(typeof r=="undefined")throw Error("Keys are undefined");var s=new sn(null,void 0);e=gh(e);for(var u=0;u<r.length;u++){var c=r[u],d=e[u];Array.isArray(d)?Eh(s,c,d):s.add(c,d)}return s}t=sn.prototype,t.add=function(e,r){Mt(this),this.c=null,e=Bn(this,e);var s=this.a.get(e);return s||this.a.set(e,s=[]),s.push(r),this.b+=1,this};function ct(e,r){Mt(e),r=Bn(e,r),on(e.a.b,r)&&(e.c=null,e.b-=e.a.get(r).length,e=e.a,on(e.b,r)&&(delete e.b[r],e.c--,e.a.length>2*e.c&&Xs(e)))}t.clear=function(){this.a=this.c=null,this.b=0};function Js(e,r){return Mt(e),r=Bn(e,r),on(e.a.b,r)}t.forEach=function(e,r){Mt(this),this.a.forEach(function(s,u){ie(s,function(c){e.call(r,c,u,this)},this)},this)},t.Y=function(){Mt(this);for(var e=this.a.X(),r=this.a.Y(),s=[],u=0;u<r.length;u++)for(var c=e[u],d=0;d<c.length;d++)s.push(r[u]);return s},t.X=function(e){Mt(this);var r=[];if(typeof e=="string")Js(this,e)&&(r=As(r,this.a.get(Bn(this,e))));else{e=this.a.X();for(var s=0;s<e.length;s++)r=As(r,e[s])}return r},t.set=function(e,r){return Mt(this),this.c=null,e=Bn(this,e),Js(this,e)&&(this.b-=this.a.get(e).length),this.a.set(e,[r]),this.b+=1,this},t.get=function(e,r){return e?(e=this.X(e),0<e.length?String(e[0]):r):r};function Eh(e,r,s){ct(e,r),0<s.length&&(e.c=null,e.a.set(Bn(e,r),Zt(s)),e.b+=s.length)}t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],r=this.a.Y(),s=0;s<r.length;s++){var u=r[s],c=encodeURIComponent(String(u));u=this.X(u);for(var d=0;d<u.length;d++){var v=c;u[d]!==""&&(v+="="+encodeURIComponent(String(u[d]))),e.push(v)}}return this.c=e.join("&")};function Ih(e){var r=new sn;return r.c=e.c,e.a&&(r.a=new Wn(e.a),r.b=e.b),r}function Bn(e,r){return r=String(r),e.f&&(r=r.toLowerCase()),r}function Ug(e,r){r&&!e.f&&(Mt(e),e.c=null,e.a.forEach(function(s,u){var c=u.toLowerCase();u!=c&&(ct(this,u),Eh(this,c,s))},e)),e.f=r}function Th(e){var r=[];return Zs(new Vg,e,r),r.join("")}function Vg(){}function Zs(e,r,s){if(r==null)s.push("null");else{if(typeof r=="object"){if(Array.isArray(r)){var u=r;r=u.length,s.push("[");for(var c="",d=0;d<r;d++)s.push(c),Zs(e,u[d],s),c=",";s.push("]");return}if(r instanceof String||r instanceof Number||r instanceof Boolean)r=r.valueOf();else{s.push("{"),c="";for(u in r)Object.prototype.hasOwnProperty.call(r,u)&&(d=r[u],typeof d!="function"&&(s.push(c),Ch(u,s),s.push(":"),Zs(e,d,s),c=","));s.push("}");return}}switch(typeof r){case"string":Ch(r,s);break;case"number":s.push(isFinite(r)&&!isNaN(r)?String(r):"null");break;case"boolean":s.push(String(r));break;case"function":s.push("null");break;default:throw Error("Unknown type: "+typeof r)}}}var Sh={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\u000b"},Wg=/\uffff/.test("\uFFFF")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Ch(e,r){r.push('"',e.replace(Wg,function(s){var u=Sh[s];return u||(u="\\u"+(s.charCodeAt(0)|65536).toString(16).substr(1),Sh[s]=u),u}),'"')}function ea(){var e=be();return Je&&!!xt&&xt==11||/Edge\/\d+/.test(e)}function Dr(){return f.window&&f.window.location.href||self&&self.location&&self.location.href||""}function Ah(e,r){r=r||f.window;var s="about:blank";e&&(s=ji(Lc(e)||Fc)),r.location.href=s}function Nh(e,r){var s=[],u;for(u in e)u in r?typeof e[u]!=typeof r[u]?s.push(u):typeof e[u]=="object"&&e[u]!=null&&r[u]!=null?0<Nh(e[u],r[u]).length&&s.push(u):e[u]!==r[u]&&s.push(u):s.push(u);for(u in r)u in e||s.push(u);return s}function Bg(){var e=be();return e=Hn(e)!=Ph?null:(e=e.match(/\sChrome\/(\d+)/i))&&e.length==2?parseInt(e[1],10):null,e&&30>e?!1:!Je||!xt||9<xt}function kh(e){return e=(e||be()).toLowerCase(),!!(e.match(/android/)||e.match(/webos/)||e.match(/iphone|ipad|ipod/)||e.match(/blackberry/)||e.match(/windows phone/)||e.match(/iemobile/))}function an(e){e=e||f.window;try{e.close()}catch{}}function Rh(e,r,s){var u=Math.floor(1e9*Math.random()).toString();r=r||500,s=s||600;var c=(window.screen.availHeight-s)/2,d=(window.screen.availWidth-r)/2;r={width:r,height:s,top:0<c?c:0,left:0<d?d:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},s=be().toLowerCase(),u&&(r.target=u,Z(s,"crios/")&&(r.target="_blank")),Hn(be())==ra&&(e=e||"http://localhost",r.scrollbars=!0),s=e||"",(e=r)||(e={}),u=window,r=s instanceof ke?s:Lc(typeof s.href!="undefined"?s.href:String(s))||Fc,s=e.target||s.target,c=[];for(v in e)switch(v){case"width":case"height":case"top":case"left":c.push(v+"="+e[v]);break;case"target":case"noopener":case"noreferrer":break;default:c.push(v+"="+(e[v]?1:0))}var v=c.join(",");if((pe("iPhone")&&!pe("iPod")&&!pe("iPad")||pe("iPad")||pe("iPod"))&&u.navigator&&u.navigator.standalone&&s&&s!="_self"?(v=Vi(document,"A"),kc(v,"HTMLAnchorElement"),r=r instanceof ke?r:Mc(r),v.href=ji(r),v.setAttribute("target",s),e.noreferrer&&v.setAttribute("rel","noreferrer"),e=document.createEvent("MouseEvent"),e.initMouseEvent("click",!0,!0,u,1),v.dispatchEvent(e),v={}):e.noreferrer?(v=Uc("",u,s,v),e=ji(r),v&&(fg&&Z(e,";")&&(e="'"+e.replace(/'/g,"%27")+"'"),v.opener=null,e='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Os(e)+'">',e=(u=Oc())?u.createHTML(e):e,e=new jn(e,null,jc),u=v.document)&&(u.write(ug(e)),u.close())):(v=Uc(r,u,s,v))&&e.noopener&&(v.opener=null),v)try{v.focus()}catch{}return v}function Hg(e){return new B(function(r){function s(){Vn(2e3).then(function(){if(!e||e.closed)r();else return s()})}return s()})}var Gg=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qg=/^[^@]+@[^@]+$/;function Qi(){var e=null;return new B(function(r){f.document.readyState=="complete"?r():(e=function(){r()},qs(window,"load",e))}).o(function(r){throw Me(window,"load",e),r})}function zg(){return ta(void 0)?Qi().then(function(){return new B(function(e,r){var s=f.document,u=setTimeout(function(){r(Error("Cordova framework is not ready."))},1e3);s.addEventListener("deviceready",function(){clearTimeout(u),e()},!1)})}):te(Error("Cordova must run in an Android or iOS file scheme."))}function ta(e){return e=e||be(),!(qn()!=="file:"&&qn()!=="ionic:"||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function na(){var e=f.window;try{return!(!e||e==e.top)}catch{return!1}}function Ze(){return typeof f.WorkerGlobalScope!="undefined"&&typeof f.importScripts=="function"}function ht(){return x.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":x.INTERNAL.hasOwnProperty("node")?"Node":Ze()?"Worker":"Browser"}function Oh(){var e=ht();return e==="ReactNative"||e==="Node"}function Kg(){for(var e=50,r=[];0<e;)r.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return r.join("")}var ra="Firefox",Ph="Chrome";function Hn(e){var r=e.toLowerCase();if(Z(r,"opera/")||Z(r,"opr/")||Z(r,"opios/"))return"Opera";if(Z(r,"iemobile"))return"IEMobile";if(Z(r,"msie")||Z(r,"trident/"))return"IE";if(Z(r,"edge/"))return"Edge";if(Z(r,"firefox/"))return ra;if(Z(r,"silk/"))return"Silk";if(Z(r,"blackberry"))return"Blackberry";if(Z(r,"webos"))return"Webos";if(!Z(r,"safari/")||Z(r,"chrome/")||Z(r,"crios/")||Z(r,"android"))if(!Z(r,"chrome/")&&!Z(r,"crios/")||Z(r,"edge/")){if(Z(r,"android"))return"Android";if((e=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&e.length==2)return e[1]}else return Ph;else return"Safari";return"Other"}var Dh={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Gn(e,r){r=r||[];var s=[],u={},c;for(c in Dh)u[Dh[c]]=!0;for(c=0;c<r.length;c++)typeof u[r[c]]!="undefined"&&(delete u[r[c]],s.push(r[c]));return s.sort(),r=s,r.length||(r=["FirebaseCore-web"]),s=ht(),s==="Browser"?(u=be(),s=Hn(u)):s==="Worker"&&(u=be(),s=Hn(u)+"-"+s),s+"/JsCore/"+e+"/"+r.join(",")}function be(){return f.navigator&&f.navigator.userAgent||""}function ne(e,r){e=e.split("."),r=r||f;for(var s=0;s<e.length&&typeof r=="object"&&r!=null;s++)r=r[e[s]];return s!=e.length&&(r=void 0),r}function ia(){try{var e=f.localStorage,r=ln();if(e)return e.setItem(r,"1"),e.removeItem(r),ea()?!!f.indexedDB:!0}catch{return Ze()&&!!f.indexedDB}return!1}function un(){return(Xi()||qn()==="chrome-extension:"||ta())&&!Oh()&&ia()&&!Ze()}function Xi(){return qn()==="http:"||qn()==="https:"}function qn(){return f.location&&f.location.protocol||null}function xr(e){return e=e||be(),!(kh(e)||Hn(e)==ra)}function Lr(e){return typeof e=="undefined"?null:Th(e)}function xh(e){var r={},s;for(s in e)e.hasOwnProperty(s)&&e[s]!==null&&e[s]!==void 0&&(r[s]=e[s]);return r}function zn(e){if(e!==null)return JSON.parse(e)}function ln(e){return e||Math.floor(1e9*Math.random()).toString()}function Lh(e){return e=e||be(),!(Hn(e)=="Safari"||e.toLowerCase().match(/iphone|ipad|ipod/))}function Mh(){var e=f.___jsl;if(e&&e.H){for(var r in e.H)if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=e.H[r].L.concat(),e.CP)for(var s=0;s<e.CP.length;s++)e.CP[s]=null}}function Ft(e,r){if(e>r)throw Error("Short delay should be less than long delay!");this.a=e,this.c=r,e=be(),r=ht(),this.b=kh(e)||r==="ReactNative"}Ft.prototype.get=function(){var e=f.navigator;return!(e&&typeof e.onLine=="boolean"&&(Xi()||qn()==="chrome-extension:"||typeof e.connection!="undefined"))||e.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};function oa(){var e=f.document;return e&&typeof e.visibilityState!="undefined"?e.visibilityState=="visible":!0}function Yg(){var e=f.document,r=null;return oa()||!e?O():new B(function(s){r=function(){oa()&&(e.removeEventListener("visibilitychange",r,!1),s())},e.addEventListener("visibilitychange",r,!1)}).o(function(s){throw e.removeEventListener("visibilitychange",r,!1),s})}function Mr(e){try{var r=new Date(parseInt(e,10));if(!isNaN(r.getTime())&&!/[^0-9]/.test(e))return r.toUTCString()}catch{}return null}function Fh(){return!(!ne("fireauth.oauthhelper",f)&&!ne("fireauth.iframe",f))}function Qg(){var e=f.navigator;return e&&e.serviceWorker&&e.serviceWorker.controller||null}function Xg(){var e=f.navigator;return e&&e.serviceWorker?O().then(function(){return e.serviceWorker.ready}).then(function(r){return r.active||null}).o(function(){return null}):O(null)}var jh={};function sa(e){jh[e]||(jh[e]=!0,typeof console!="undefined"&&typeof console.warn=="function"&&console.warn(e))}var aa;try{var ua={};Object.defineProperty(ua,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(ua,"abcd",{configurable:!0,enumerable:!0,value:2}),aa=ua.abcd==2}catch{aa=!1}function R(e,r,s){aa?Object.defineProperty(e,r,{configurable:!0,enumerable:!0,value:s}):e[r]=s}function Se(e,r){if(r)for(var s in r)r.hasOwnProperty(s)&&R(e,s,r[s])}function ft(e){var r={};return Se(r,e),r}function $g(e){var r={},s;for(s in e)e.hasOwnProperty(s)&&(r[s]=e[s]);return r}function Jg(e,r){if(!r||!r.length)return!0;if(!e)return!1;for(var s=0;s<r.length;s++){var u=e[r[s]];if(u==null||u==="")return!1}return!0}function la(e){var r=e;if(typeof e=="object"&&e!=null){r="length"in e?[]:{};for(var s in e)R(r,s,la(e[s]))}return r}function ca(e){var r=e&&(e[pa]?"phone":null);if(r&&e&&e[da]){R(this,"uid",e[da]),R(this,"displayName",e[Uh]||null);var s=null;e[fa]&&(s=new Date(e[fa]).toUTCString()),R(this,"enrollmentTime",s),R(this,"factorId",r)}else throw new b("internal-error","Internal assert: invalid MultiFactorInfo object")}ca.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};function ha(e){try{var r=new Fr(e)}catch{r=null}return r}var Uh="displayName",fa="enrolledAt",da="mfaEnrollmentId",pa="phoneInfo";function Fr(e){ca.call(this,e),R(this,"phoneNumber",e[pa])}j(Fr,ca),Fr.prototype.w=function(){var e=Fr.bb.w.call(this);return e.phoneNumber=this.phoneNumber,e};function Zg(e){var r={},s=e[ey],u=e[ny],c=e[ry];if(e=ha(e[ty]),!c||c!=$i&&c!=jr&&!s||c==jr&&!u||c==va&&!e)throw Error("Invalid checkActionCode response!");c==jr?(r[Wh]=s||null,r[Bh]=s||null,r[Vh]=u):(r[Wh]=u||null,r[Bh]=u||null,r[Vh]=s||null),r[iy]=e||null,R(this,sy,c),R(this,oy,la(r))}var va="REVERT_SECOND_FACTOR_ADDITION",$i="EMAIL_SIGNIN",jr="VERIFY_AND_CHANGE_EMAIL",ey="email",ty="mfaInfo",ny="newEmail",ry="requestType",Vh="email",Wh="fromEmail",iy="multiFactorInfo",Bh="previousEmail",oy="data",sy="operation";function ma(e){e=Oe(e);var r=Ge(e,Hh)||null,s=Ge(e,Gh)||null,u=Ge(e,qh)||null;if(u=u&&cy[u]||null,!r||!s||!u)throw new b("argument-error",Hh+", "+Gh+"and "+qh+" are required in a valid action code URL.");Se(this,{apiKey:r,operation:u,code:s,continueUrl:Ge(e,ay)||null,languageCode:Ge(e,uy)||null,tenantId:Ge(e,ly)||null})}var Hh="apiKey",Gh="oobCode",ay="continueUrl",uy="languageCode",qh="mode",ly="tenantId",cy={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:va,signIn:$i,verifyAndChangeEmail:jr,verifyEmail:"VERIFY_EMAIL"};function zh(e){try{return new ma(e)}catch{return null}}function Ji(e){var r=e[hy];if(typeof r=="undefined")throw new b("missing-continue-uri");if(typeof r!="string"||typeof r=="string"&&!r.length)throw new b("invalid-continue-uri");this.h=r,this.b=this.a=null,this.g=!1;var s=e[Kh];if(s&&typeof s=="object"){r=s[Jh];var u=s[Xh];if(s=s[$h],typeof r=="string"&&r.length){if(this.a=r,typeof u!="undefined"&&typeof u!="boolean")throw new b("argument-error",Xh+" property must be a boolean when specified.");if(this.g=!!u,typeof s!="undefined"&&(typeof s!="string"||typeof s=="string"&&!s.length))throw new b("argument-error",$h+" property must be a non empty string when specified.");this.b=s||null}else{if(typeof r!="undefined")throw new b("argument-error",Jh+" property must be a non empty string when specified.");if(typeof u!="undefined"||typeof s!="undefined")throw new b("missing-android-pkg-name")}}else if(typeof s!="undefined")throw new b("argument-error",Kh+" property must be a non null object when specified.");if(this.f=null,(r=e[Qh])&&typeof r=="object"){if(r=r[Zh],typeof r=="string"&&r.length)this.f=r;else if(typeof r!="undefined")throw new b("argument-error",Zh+" property must be a non empty string when specified.")}else if(typeof r!="undefined")throw new b("argument-error",Qh+" property must be a non null object when specified.");if(r=e[ga],typeof r!="undefined"&&typeof r!="boolean")throw new b("argument-error",ga+" property must be a boolean when specified.");if(this.c=!!r,e=e[Yh],typeof e!="undefined"&&(typeof e!="string"||typeof e=="string"&&!e.length))throw new b("argument-error",Yh+" property must be a non empty string when specified.");this.i=e||null}var Kh="android",Yh="dynamicLinkDomain",ga="handleCodeInApp",Qh="iOS",hy="url",Xh="installApp",$h="minimumVersion",Jh="packageName",Zh="bundleId";function Zi(e){var r={};r.continueUrl=e.h,r.canHandleCodeInApp=e.c,(r.androidPackageName=e.a)&&(r.androidMinimumVersion=e.b,r.androidInstallApp=e.g),r.iOSBundleId=e.f,r.dynamicLinkDomain=e.i;for(var s in r)r[s]===null&&delete r[s];return r}function fy(e){return xi(e,function(r){return r=r.toString(16),1<r.length?r:"0"+r}).join("")}var Ur=null;function dy(e){var r=[];return py(e,function(s){r.push(s)}),r}function py(e,r){function s(I){for(;u<e.length;){var T=e.charAt(u++),M=Ur[T];if(M!=null)return M;if(!/^[\s\xa0]*$/.test(T))throw Error("Unknown base64 encoding at char: "+T)}return I}vy();for(var u=0;;){var c=s(-1),d=s(0),v=s(64),y=s(64);if(y===64&&c===-1)break;r(c<<2|d>>4),v!=64&&(r(d<<4&240|v>>2),y!=64&&r(v<<6&192|y))}}function vy(){if(!Ur){Ur={};for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),r=["+/=","+/","-_=","-_.","-_"],s=0;5>s;s++)for(var u=e.concat(r[s].split("")),c=0;c<u.length;c++){var d=u[c];Ur[d]===void 0&&(Ur[d]=c)}}}function eo(e){var r=ef(e);if(!(r&&r.sub&&r.iss&&r.aud&&r.exp))throw Error("Invalid JWT");this.h=e,this.a=r.exp,this.i=r.sub,e=Date.now()/1e3,this.g=r.iat||(e>this.a?this.a:e),this.b=r.provider_id||r.firebase&&r.firebase.sign_in_provider||null,this.f=r.firebase&&r.firebase.tenant||null,this.c=!!r.is_anonymous||this.b=="anonymous"}eo.prototype.T=function(){return this.f},eo.prototype.l=function(){return this.c},eo.prototype.toString=function(){return this.h};function to(e){try{return new eo(e)}catch{return null}}function ef(e){if(!e||(e=e.split("."),e.length!=3))return null;e=e[1];for(var r=(4-e.length%4)%4,s=0;s<r;s++)e+=".";try{var u=dy(e);for(e=[],s=r=0;r<u.length;){var c=u[r++];if(128>c)e[s++]=String.fromCharCode(c);else if(191<c&&224>c){var d=u[r++];e[s++]=String.fromCharCode((c&31)<<6|d&63)}else if(239<c&&365>c){d=u[r++];var v=u[r++],y=u[r++],I=((c&7)<<18|(d&63)<<12|(v&63)<<6|y&63)-65536;e[s++]=String.fromCharCode(55296+(I>>10)),e[s++]=String.fromCharCode(56320+(I&1023))}else d=u[r++],v=u[r++],e[s++]=String.fromCharCode((c&15)<<12|(d&63)<<6|v&63)}return JSON.parse(e.join(""))}catch{}return null}var tf="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),no=["client_id","response_type","scope","redirect_uri","state"],ya={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:no},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:no},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:no},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:tf},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function _a(e){for(var r in ya)if(ya[r].fa==e)return ya[r];return null}function nf(e){var r={};r["facebook.com"]=of,r["google.com"]=af,r["github.com"]=sf,r["twitter.com"]=uf;var s=e&&e[rf];try{if(s)return r[s]?new r[s](e):new dt(e);if(typeof e[wa]!="undefined")return new ba(e)}catch{}return null}var wa="idToken",rf="providerId";function ba(e){var r=e[rf];if(!r&&e[wa]){var s=to(e[wa]);s&&s.b&&(r=s.b)}if(!r)throw Error("Invalid additional user info!");(r=="anonymous"||r=="custom")&&(r=null),s=!1,typeof e.isNewUser!="undefined"?s=!!e.isNewUser:e.kind==="identitytoolkit#SignupNewUserResponse"&&(s=!0),R(this,"providerId",r),R(this,"isNewUser",s)}function dt(e){ba.call(this,e),e=zn(e.rawUserInfo||"{}"),R(this,"profile",la(e||{}))}j(dt,ba);function of(e){if(dt.call(this,e),this.providerId!="facebook.com")throw Error("Invalid provider ID!")}j(of,dt);function sf(e){if(dt.call(this,e),this.providerId!="github.com")throw Error("Invalid provider ID!");R(this,"username",this.profile&&this.profile.login||null)}j(sf,dt);function af(e){if(dt.call(this,e),this.providerId!="google.com")throw Error("Invalid provider ID!")}j(af,dt);function uf(e){if(dt.call(this,e),this.providerId!="twitter.com")throw Error("Invalid provider ID!");R(this,"username",e.screenName||null)}j(uf,dt);function lf(e){var r=Oe(e),s=Ge(r,"link"),u=Ge(Oe(s),"link");return r=Ge(r,"deep_link_id"),Ge(Oe(r),"link")||r||u||s||e}function ro(e,r){if(!e&&!r)throw new b("internal-error","Internal assert: no raw session string available");if(e&&r)throw new b("internal-error","Internal assert: unable to determine the session type");this.a=e||null,this.b=r||null,this.type=this.a?Vr:io}var Vr="enroll",io="signin";ro.prototype.Ha=function(){return this.a?O(this.a):O(this.b)},ro.prototype.w=function(){return this.type==Vr?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}};function Kn(){}Kn.prototype.ka=function(){},Kn.prototype.b=function(){},Kn.prototype.c=function(){},Kn.prototype.w=function(){};function Yn(e,r){return e.then(function(s){if(s[nt]){var u=to(s[nt]);if(!u||r!=u.i)throw new b("user-mismatch");return s}throw new b("user-mismatch")}).o(function(s){throw s&&s.code&&s.code==Er+"user-not-found"?new b("user-mismatch"):s})}function cn(e,r){if(r)this.a=r;else throw new b("internal-error","failed to construct a credential");R(this,"providerId",e),R(this,"signInMethod",e)}cn.prototype.ka=function(e){return qa(e,Ea(this))},cn.prototype.b=function(e,r){var s=Ea(this);return s.idToken=r,za(e,s)},cn.prototype.c=function(e,r){return Yn(Ka(e,Ea(this)),r)};function Ea(e){return{pendingToken:e.a,requestUri:"http://localhost"}}cn.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}};function my(e){if(e&&e.providerId&&e.signInMethod&&e.providerId.indexOf("saml.")==0&&e.pendingToken)try{return new cn(e.providerId,e.pendingToken)}catch{}return null}function Tt(e,r,s){if(this.a=null,r.idToken||r.accessToken)r.idToken&&R(this,"idToken",r.idToken),r.accessToken&&R(this,"accessToken",r.accessToken),r.nonce&&!r.pendingToken&&R(this,"nonce",r.nonce),r.pendingToken&&(this.a=r.pendingToken);else if(r.oauthToken&&r.oauthTokenSecret)R(this,"accessToken",r.oauthToken),R(this,"secret",r.oauthTokenSecret);else throw new b("internal-error","failed to construct a credential");R(this,"providerId",e),R(this,"signInMethod",s)}Tt.prototype.ka=function(e){return qa(e,Ia(this))},Tt.prototype.b=function(e,r){var s=Ia(this);return s.idToken=r,za(e,s)},Tt.prototype.c=function(e,r){var s=Ia(this);return Yn(Ka(e,s),r)};function Ia(e){var r={};return e.idToken&&(r.id_token=e.idToken),e.accessToken&&(r.access_token=e.accessToken),e.secret&&(r.oauth_token_secret=e.secret),r.providerId=e.providerId,e.nonce&&!e.a&&(r.nonce=e.nonce),r={postBody:bh(r).toString(),requestUri:"http://localhost"},e.a&&(delete r.postBody,r.pendingToken=e.a),r}Tt.prototype.w=function(){var e={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(e.oauthIdToken=this.idToken),this.accessToken&&(e.oauthAccessToken=this.accessToken),this.secret&&(e.oauthTokenSecret=this.secret),this.nonce&&(e.nonce=this.nonce),this.a&&(e.pendingToken=this.a),e};function gy(e){if(e&&e.providerId&&e.signInMethod){var r={idToken:e.oauthIdToken,accessToken:e.oauthTokenSecret?null:e.oauthAccessToken,oauthTokenSecret:e.oauthTokenSecret,oauthToken:e.oauthTokenSecret&&e.oauthAccessToken,nonce:e.nonce,pendingToken:e.pendingToken};try{return new Tt(e.providerId,r,e.signInMethod)}catch{}}return null}function hn(e,r){this.Qc=r||[],Se(this,{providerId:e,isOAuthProvider:!0}),this.Jb={},this.qb=(_a(e)||{}).Ja||null,this.pb=null}hn.prototype.Ka=function(e){return this.Jb=Dt(e),this};function cf(e){if(typeof e!="string"||e.indexOf("saml.")!=0)throw new b("argument-error",'SAML provider IDs must be prefixed with "saml."');hn.call(this,e,[])}j(cf,hn);function Fe(e){hn.call(this,e,no),this.a=[]}j(Fe,hn),Fe.prototype.Ca=function(e){return Et(this.a,e)||this.a.push(e),this},Fe.prototype.Rb=function(){return Zt(this.a)},Fe.prototype.credential=function(e,r){var s;if(C(e)?s={idToken:e.idToken||null,accessToken:e.accessToken||null,nonce:e.rawNonce||null}:s={idToken:e||null,accessToken:r||null},!s.idToken&&!s.accessToken)throw new b("argument-error","credential failed: must provide the ID token and/or the access token.");return new Tt(this.providerId,s,this.providerId)};function fn(){Fe.call(this,"facebook.com")}j(fn,Fe),R(fn,"PROVIDER_ID","facebook.com"),R(fn,"FACEBOOK_SIGN_IN_METHOD","facebook.com");function hf(e){if(!e)throw new b("argument-error","credential failed: expected 1 argument (the OAuth access token).");var r=e;return C(e)&&(r=e.accessToken),new fn().credential({accessToken:r})}function dn(){Fe.call(this,"github.com")}j(dn,Fe),R(dn,"PROVIDER_ID","github.com"),R(dn,"GITHUB_SIGN_IN_METHOD","github.com");function ff(e){if(!e)throw new b("argument-error","credential failed: expected 1 argument (the OAuth access token).");var r=e;return C(e)&&(r=e.accessToken),new dn().credential({accessToken:r})}function pn(){Fe.call(this,"google.com"),this.Ca("profile")}j(pn,Fe),R(pn,"PROVIDER_ID","google.com"),R(pn,"GOOGLE_SIGN_IN_METHOD","google.com");function df(e,r){var s=e;return C(e)&&(s=e.idToken,r=e.accessToken),new pn().credential({idToken:s,accessToken:r})}function Qn(){hn.call(this,"twitter.com",tf)}j(Qn,hn),R(Qn,"PROVIDER_ID","twitter.com"),R(Qn,"TWITTER_SIGN_IN_METHOD","twitter.com");function pf(e,r){var s=e;if(C(s)||(s={oauthToken:e,oauthTokenSecret:r}),!s.oauthToken||!s.oauthTokenSecret)throw new b("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new Tt("twitter.com",s,"twitter.com")}function jt(e,r,s){this.a=e,this.f=r,R(this,"providerId","password"),R(this,"signInMethod",s===qe.EMAIL_LINK_SIGN_IN_METHOD?qe.EMAIL_LINK_SIGN_IN_METHOD:qe.EMAIL_PASSWORD_SIGN_IN_METHOD)}jt.prototype.ka=function(e){return this.signInMethod==qe.EMAIL_LINK_SIGN_IN_METHOD?H(e,t_,{email:this.a,oobCode:this.f}):H(e,Bf,{email:this.a,password:this.f})},jt.prototype.b=function(e,r){return this.signInMethod==qe.EMAIL_LINK_SIGN_IN_METHOD?H(e,n_,{idToken:r,email:this.a,oobCode:this.f}):H(e,Wf,{idToken:r,email:this.a,password:this.f})},jt.prototype.c=function(e,r){return Yn(this.ka(e),r)},jt.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}};function yy(e){return e&&e.email&&e.password?new jt(e.email,e.password,e.signInMethod):null}function qe(){Se(this,{providerId:"password",isOAuthProvider:!1})}function vf(e,r){if(r=Ta(r),!r)throw new b("argument-error","Invalid email link!");return new jt(e,r.code,qe.EMAIL_LINK_SIGN_IN_METHOD)}function Ta(e){return e=lf(e),(e=zh(e))&&e.operation===$i?e:null}Se(qe,{PROVIDER_ID:"password"}),Se(qe,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Se(qe,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"});function Ut(e){if(!(e.fb&&e.eb||e.La&&e.ea))throw new b("internal-error");this.a=e,R(this,"providerId","phone"),this.fa="phone",R(this,"signInMethod","phone")}Ut.prototype.ka=function(e){return e.gb(Wr(this))},Ut.prototype.b=function(e,r){var s=Wr(this);return s.idToken=r,H(e,E_,s)},Ut.prototype.c=function(e,r){var s=Wr(this);return s.operation="REAUTH",e=H(e,I_,s),Yn(e,r)},Ut.prototype.w=function(){var e={providerId:"phone"};return this.a.fb&&(e.verificationId=this.a.fb),this.a.eb&&(e.verificationCode=this.a.eb),this.a.La&&(e.temporaryProof=this.a.La),this.a.ea&&(e.phoneNumber=this.a.ea),e};function _y(e){if(e&&e.providerId==="phone"&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var r={};return ie(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(s){e[s]&&(r[s]=e[s])}),new Ut(r)}return null}function Wr(e){return e.a.La&&e.a.ea?{temporaryProof:e.a.La,phoneNumber:e.a.ea}:{sessionInfo:e.a.fb,code:e.a.eb}}function St(e){try{this.a=e||x.auth()}catch{throw new b("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Se(this,{providerId:"phone",isOAuthProvider:!1})}St.prototype.gb=function(e,r){var s=this.a.a;return O(r.verify()).then(function(u){if(typeof u!="string")throw new b("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(r.type){case"recaptcha":var c=C(e)?e.session:null,d=C(e)?e.phoneNumber:e,v;return c&&c.type==Vr?v=c.Ha().then(function(y){return zy(s,{idToken:y,phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:u}})}):c&&c.type==io?v=c.Ha().then(function(y){return Ky(s,{mfaPendingCredential:y,mfaEnrollmentId:e.multiFactorHint&&e.multiFactorHint.uid||e.multiFactorUid,phoneSignInInfo:{recaptchaToken:u}})}):v=qy(s,{phoneNumber:d,recaptchaToken:u}),v.then(function(y){return typeof r.reset=="function"&&r.reset(),y},function(y){throw typeof r.reset=="function"&&r.reset(),y});default:throw new b("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})};function mf(e,r){if(!e)throw new b("missing-verification-id");if(!r)throw new b("missing-verification-code");return new Ut({fb:e,eb:r})}Se(St,{PROVIDER_ID:"phone"}),Se(St,{PHONE_SIGN_IN_METHOD:"phone"});function Sa(e){if(e.temporaryProof&&e.phoneNumber)return new Ut({La:e.temporaryProof,ea:e.phoneNumber});var r=e&&e.providerId;if(!r||r==="password")return null;var s=e&&e.oauthAccessToken,u=e&&e.oauthTokenSecret,c=e&&e.nonce,d=e&&e.oauthIdToken,v=e&&e.pendingToken;try{switch(r){case"google.com":return df(d,s);case"facebook.com":return hf(s);case"github.com":return ff(s);case"twitter.com":return pf(s,u);default:return s||u||d||v?v?r.indexOf("saml.")==0?new cn(r,v):new Tt(r,{pendingToken:v,idToken:e.oauthIdToken,accessToken:e.oauthAccessToken},r):new Fe(r).credential({idToken:d,accessToken:s,rawNonce:c}):null}}catch{return null}}function Ca(e){if(!e.isOAuthProvider)throw new b("invalid-oauth-provider")}function et(e,r,s,u,c,d,v){if(this.c=e,this.b=r||null,this.g=s||null,this.f=u||null,this.i=d||null,this.h=v||null,this.a=c||null,this.g||this.a){if(this.g&&this.a)throw new b("invalid-auth-event");if(this.g&&!this.f)throw new b("invalid-auth-event")}else throw new b("invalid-auth-event")}et.prototype.getUid=function(){var e=[];return e.push(this.c),this.b&&e.push(this.b),this.f&&e.push(this.f),this.h&&e.push(this.h),e.join("-")},et.prototype.T=function(){return this.h},et.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};function gf(e){return e=e||{},e.type?new et(e.type,e.eventId,e.urlResponse,e.sessionId,e.error&&yc(e.error),e.postBody,e.tenantId):null}function wy(){this.b=null,this.a=[]}var Aa=null;function by(e){var r=Aa;r.a.push(e),r.b||(r.b=function(s){for(var u=0;u<r.a.length;u++)r.a[u](s)},e=ne("universalLinks.subscribe",f),typeof e=="function"&&e(null,r.b))}function Na(e){var r="unauthorized-domain",s=void 0,u=Oe(e);e=u.a,u=u.c,u=="chrome-extension"?s=Vc("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):u=="http"||u=="https"?s=Vc("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):r="operation-not-supported-in-this-environment",b.call(this,r,s)}j(Na,b);function Br(e,r,s){b.call(this,e,s),e=r||{},e.Kb&&R(this,"email",e.Kb),e.ea&&R(this,"phoneNumber",e.ea),e.credential&&R(this,"credential",e.credential),e.$b&&R(this,"tenantId",e.$b)}j(Br,b),Br.prototype.w=function(){var e={code:this.code,message:this.message};this.email&&(e.email=this.email),this.phoneNumber&&(e.phoneNumber=this.phoneNumber),this.tenantId&&(e.tenantId=this.tenantId);var r=this.credential&&this.credential.w();return r&&Ne(e,r),e},Br.prototype.toJSON=function(){return this.w()};function oo(e){if(e.code){var r=e.code||"";r.indexOf(Er)==0&&(r=r.substring(Er.length));var s={credential:Sa(e),$b:e.tenantId};if(e.email)s.Kb=e.email;else if(e.phoneNumber)s.ea=e.phoneNumber;else if(!s.credential)return new b(r,e.message||void 0);return new Br(r,s,e.message)}return null}function Hr(){}Hr.prototype.c=null;function yf(e){return e.c||(e.c=e.b())}var ka;function so(){}j(so,Hr),so.prototype.a=function(){var e=_f(this);return e?new ActiveXObject(e):new XMLHttpRequest},so.prototype.b=function(){var e={};return _f(this)&&(e[0]=!0,e[1]=!0),e};function _f(e){if(!e.f&&typeof XMLHttpRequest=="undefined"&&typeof ActiveXObject!="undefined"){for(var r=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],s=0;s<r.length;s++){var u=r[s];try{return new ActiveXObject(u),e.f=u}catch{}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return e.f}ka=new so;function ao(){}j(ao,Hr),ao.prototype.a=function(){var e=new XMLHttpRequest;if("withCredentials"in e)return e;if(typeof XDomainRequest!="undefined")return new wf;throw Error("Unsupported browser")},ao.prototype.b=function(){return{}};function wf(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=D(this.qc,this),this.a.onerror=D(this.Tb,this),this.a.onprogress=D(this.rc,this),this.a.ontimeout=D(this.vc,this)}t=wf.prototype,t.open=function(e,r,s){if(s!=null&&!s)throw Error("Only async requests are supported.");this.a.open(e,r)},t.send=function(e){if(e)if(typeof e=="string")this.a.send(e);else throw Error("Only string data is supported");else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(e){return e.toLowerCase()=="content-type"?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Ra(this,4)},t.Tb=function(){this.status=500,this.response=this.responseText="",Ra(this,4)},t.vc=function(){this.Tb()},t.rc=function(){this.status=200,Ra(this,1)};function Ra(e,r){e.readyState=r,e.onreadystatechange&&e.onreadystatechange()}t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType};function Oa(e,r,s){this.reset(e,r,s,void 0,void 0)}Oa.prototype.a=null,Oa.prototype.reset=function(e,r,s,u,c){delete this.a};function Pa(e){this.f=e,this.b=this.c=this.a=null}function Gr(e,r){this.name=e,this.value=r}Gr.prototype.toString=function(){return this.name};var bf=new Gr("SEVERE",1e3),Da=new Gr("WARNING",900),Ey=new Gr("CONFIG",700),Iy=new Gr("FINE",500);function Ef(e){return e.c?e.c:e.a?Ef(e.a):(Ln("Root logger has no level set."),null)}Pa.prototype.log=function(e,r,s){if(e.value>=Ef(this).value)for(N(r)&&(r=r()),e=new Oa(e,String(r),this.f),s&&(e.a=s),s=this;s;)s=s.a};var xa={},uo=null;function La(e){uo||(uo=new Pa(""),xa[""]=uo,uo.c=Ey);var r;if(!(r=xa[e])){r=new Pa(e);var s=e.lastIndexOf("."),u=e.substr(s+1);s=La(e.substr(0,s)),s.b||(s.b={}),s.b[u]=r,r.a=s,xa[e]=r}return r}function ze(e,r){e&&e.log(Iy,r,void 0)}function lo(e){this.f=e}j(lo,Hr),lo.prototype.a=function(){return new co(this.f)},lo.prototype.b=function(e){return function(){return e}}({});function co(e){Te.call(this),this.u=e,this.h=void 0,this.readyState=Ma,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=La("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}j(co,Te);var Ma=0;t=co.prototype,t.open=function(e,r){if(this.readyState!=Ma)throw this.abort(),Error("Error reopening a connection");this.s=e,this.f=r,this.readyState=1,zr(this)},t.send=function(e){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.a=!0;var r={headers:this.l,method:this.s,credentials:this.h,cache:void 0};e&&(r.body=e),this.u.fetch(new Request(this.f,r)).then(this.uc.bind(this),this.Va.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&this.readyState!=4&&(this.a=!1,qr(this)),this.readyState=Ma},t.uc=function(e){this.a&&(this.g=e,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=e.headers,this.readyState=2,zr(this)),this.a&&(this.readyState=3,zr(this),this.a&&(this.responseType==="arraybuffer"?e.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):typeof f.ReadableStream!="undefined"&&"body"in e?(this.response=this.responseText="",this.c=e.body.getReader(),this.m=new TextDecoder,If(this)):e.text().then(this.tc.bind(this),this.Va.bind(this)))))};function If(e){e.c.read().then(e.pc.bind(e)).catch(e.Va.bind(e))}t.pc=function(e){if(this.a){var r=this.m.decode(e.value?e.value:new Uint8Array(0),{stream:!e.done});r&&(this.response=this.responseText+=r),e.done?qr(this):zr(this),this.readyState==3&&If(this)}},t.tc=function(e){this.a&&(this.response=this.responseText=e,qr(this))},t.sc=function(e){this.a&&(this.response=e,qr(this))},t.Va=function(e){var r=this.i;r&&r.log(Da,"Failed to fetch url "+this.f,e instanceof Error?e:Error(e)),this.a&&qr(this)};function qr(e){e.readyState=4,e.g=null,e.c=null,e.m=null,zr(e)}t.setRequestHeader=function(e,r){this.l.append(e,r)},t.getResponseHeader=function(e){return this.b?this.b.get(e.toLowerCase())||"":((e=this.i)&&e.log(Da,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var e=this.i;return e&&e.log(Da,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}e=[];for(var r=this.b.entries(),s=r.next();!s.done;)s=s.value,e.push(s[0]+": "+s[1]),s=r.next();return e.join(`\r
`)};function zr(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(co.prototype,"withCredentials",{get:function(){return this.h==="include"},set:function(e){this.h=e?"include":"same-origin"}});function Kr(e){Te.call(this),this.headers=new Wn,this.D=e||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=Tf,this.u=this.S=!1}j(Kr,Te);var Tf="";Kr.prototype.b=La("goog.net.XhrIo");var Ty=/^https?$/i,Sy=["POST","PUT"];function Cy(e,r,s,u,c){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.l+"; newUri="+r);s=s?s.toUpperCase():"GET",e.l=r,e.h="",e.P=s,e.J=!1,e.c=!0,e.a=e.D?e.D.a():ka.a(),e.C=e.D?yf(e.D):yf(ka),e.a.onreadystatechange=D(e.Wb,e);try{ze(e.b,Ct(e,"Opening Xhr")),e.N=!0,e.a.open(s,String(r),!0),e.N=!1}catch(v){ze(e.b,Ct(e,"Error opening Xhr: "+v.message)),Sf(e,v);return}r=u||"";var d=new Wn(e.headers);c&&Pg(c,function(v,y){d.set(y,v)}),c=Qm(d.Y()),u=f.FormData&&r instanceof f.FormData,!Et(Sy,s)||c||u||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),d.forEach(function(v,y){this.a.setRequestHeader(y,v)},e),e.m&&(e.a.responseType=e.m),"withCredentials"in e.a&&e.a.withCredentials!==e.S&&(e.a.withCredentials=e.S);try{Nf(e),0<e.g&&(e.u=Ay(e.a),ze(e.b,Ct(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.u)),e.u?(e.a.timeout=e.g,e.a.ontimeout=D(e.Ma,e)):e.s=Qs(e.Ma,e.g,e)),ze(e.b,Ct(e,"Sending request")),e.i=!0,e.a.send(r),e.i=!1}catch(v){ze(e.b,Ct(e,"Send error: "+v.message)),Sf(e,v)}}function Ay(e){return Je&&Gc(9)&&typeof e.timeout=="number"&&e.ontimeout!==void 0}function Ny(e){return e.toLowerCase()=="content-type"}t=Kr.prototype,t.Ma=function(){typeof p!="undefined"&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",ze(this.b,Ct(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))};function Sf(e,r){e.c=!1,e.a&&(e.f=!0,e.a.abort(),e.f=!1),e.h=r,Cf(e),ho(e)}function Cf(e){e.J||(e.J=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}t.abort=function(){this.a&&this.c&&(ze(this.b,Ct(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),ho(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),ho(this,!0)),Kr.bb.Da.call(this)},t.Wb=function(){this.ya||(this.N||this.i||this.f?Af(this):this.Jc())},t.Jc=function(){Af(this)};function Af(e){if(e.c&&typeof p!="undefined"){if(e.C[1]&&Yr(e)==4&&fo(e)==2)ze(e.b,Ct(e,"Local request error detected and ignored"));else if(e.i&&Yr(e)==4)Qs(e.Wb,0,e);else if(e.dispatchEvent("readystatechange"),Yr(e)==4){ze(e.b,Ct(e,"Request complete")),e.c=!1;try{var r=fo(e);e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var s=!0;break e;default:s=!1}var u;if(!(u=s)){var c;if(c=r===0){var d=String(e.l).match(_h)[1]||null;if(!d&&f.self&&f.self.location){var v=f.self.location.protocol;d=v.substr(0,v.length-1)}c=!Ty.test(d?d.toLowerCase():"")}u=c}if(u)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var y=2<Yr(e)?e.a.statusText:""}catch(I){ze(e.b,"Can not get status: "+I.message),y=""}e.h=y+" ["+fo(e)+"]",Cf(e)}}finally{ho(e)}}}}function ho(e,r){if(e.a){Nf(e);var s=e.a,u=e.C[0]?w:null;e.a=null,e.C=null,r||e.dispatchEvent("ready");try{s.onreadystatechange=u}catch(c){(e=e.b)&&e.log(bf,"Problem encountered resetting onreadystatechange: "+c.message,void 0)}}}function Nf(e){e.a&&e.u&&(e.a.ontimeout=null),e.s&&(f.clearTimeout(e.s),e.s=null)}function Yr(e){return e.a?e.a.readyState:0}function fo(e){try{return 2<Yr(e)?e.a.status:-1}catch{return-1}}function ky(e){try{return e.a?e.a.responseText:""}catch(r){return ze(e.b,"Can not get responseText: "+r.message),""}}t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case Tf:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var e=this.b;return e&&e.log(bf,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(r){return ze(this.b,"Can not get response: "+r.message),null}};function Ct(e,r){return r+" ["+e.P+" "+e.l+" "+fo(e)+"]"}function vn(e){var r=Py;this.g=[],this.u=r,this.s=e||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}vn.prototype.cancel=function(e){if(this.a)this.c instanceof vn&&this.c.cancel();else{if(this.b){var r=this.b;delete this.b,e?r.cancel(e):(r.l--,0>=r.l&&r.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(e=new Xr,po(this),Qr(this,!1,e))}},vn.prototype.m=function(e,r){this.i=!1,Qr(this,e,r)};function Qr(e,r,s){e.a=!0,e.c=s,e.f=!r,Rf(e)}function po(e){if(e.a){if(!e.v)throw new vo;e.v=!1}}function Ry(e,r){Fa(e,null,r,void 0)}function Fa(e,r,s,u){e.g.push([r,s,u]),e.a&&Rf(e)}vn.prototype.then=function(e,r,s){var u,c,d=new B(function(v,y){u=v,c=y});return Fa(this,u,function(v){v instanceof Xr?d.cancel():c(v)}),d.then(e,r,s)},vn.prototype.$goog_Thenable=!0;function kf(e){return Ym(e.g,function(r){return N(r[1])})}function Rf(e){if(e.h&&e.a&&kf(e)){var r=e.h,s=mo[r];s&&(f.clearTimeout(s.a),delete mo[r]),e.h=0}e.b&&(e.b.l--,delete e.b),r=e.c;for(var u=s=!1;e.g.length&&!e.i;){var c=e.g.shift(),d=c[0],v=c[1];if(c=c[2],d=e.f?v:d)try{var y=d.call(c||e.s,r);y!==void 0&&(e.f=e.f&&(y==r||y instanceof Error),e.c=r=y),(_c(r)||typeof f.Promise=="function"&&r instanceof f.Promise)&&(u=!0,e.i=!0)}catch(I){r=I,e.f=!0,kf(e)||(s=!0)}}e.c=r,u&&(y=D(e.m,e,!0),u=D(e.m,e,!1),r instanceof vn?(Fa(r,y,u),r.C=!0):r.then(y,u)),s&&(r=new Of(r),mo[r.a]=r,e.h=r.a)}function vo(){Le.call(this)}j(vo,Le),vo.prototype.message="Deferred has already fired",vo.prototype.name="AlreadyCalledError";function Xr(){Le.call(this)}j(Xr,Le),Xr.prototype.message="Deferred was canceled",Xr.prototype.name="CanceledError";function Of(e){this.a=f.setTimeout(D(this.c,this),0),this.b=e}Of.prototype.c=function(){throw delete mo[this.a],this.b};var mo={};function ja(e){var r={},s=r.document||document,u=Pc(e).toString(),c=Vi(document,"SCRIPT"),d={Xb:c,Ma:void 0},v=new vn(d),y=null,I=r.timeout!=null?r.timeout:5e3;return 0<I&&(y=window.setTimeout(function(){go(c,!0);var T=new Ua(xy,"Timeout reached for loading script "+u);po(v),Qr(v,!1,T)},I),d.Ma=y),c.onload=c.onreadystatechange=function(){c.readyState&&c.readyState!="loaded"&&c.readyState!="complete"||(go(c,r.xd||!1,y),po(v),Qr(v,!0,null))},c.onerror=function(){go(c,!0,y);var T=new Ua(Dy,"Error while loading script "+u);po(v),Qr(v,!1,T)},d=r.attributes||{},Ne(d,{type:"text/javascript",charset:"UTF-8"}),zc(c,d),lg(c,e),Oy(s).appendChild(c),v}function Oy(e){var r;return(r=(e||document).getElementsByTagName("HEAD"))&&r.length!=0?r[0]:e.documentElement}function Py(){if(this&&this.Xb){var e=this.Xb;e&&e.tagName=="SCRIPT"&&go(e,!0,this.Ma)}}function go(e,r,s){s!=null&&f.clearTimeout(s),e.onload=w,e.onerror=w,e.onreadystatechange=w,r&&window.setTimeout(function(){e&&e.parentNode&&e.parentNode.removeChild(e)},0)}var Dy=0,xy=1;function Ua(e,r){var s="Jsloader error (code #"+e+")";r&&(s+=": "+r),Le.call(this,s),this.code=e}j(Ua,Le);function yo(e){this.f=e}j(yo,Hr),yo.prototype.a=function(){return new this.f},yo.prototype.b=function(){return{}};function tt(e,r,s){if(this.c=e,e=r||{},this.l=e.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=e.secureTokenTimeout||Ly,this.g=Dt(e.secureTokenHeaders||My),this.h=e.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=e.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=e.firebaseTimeout||Fy,this.a=Dt(e.firebaseHeaders||jy),s&&(this.a["X-Client-Version"]=s,this.g["X-Client-Version"]=s),s=ht()=="Node",s=f.XMLHttpRequest||s&&x.INTERNAL.node&&x.INTERNAL.node.XMLHttpRequest,!s&&!Ze())throw new b("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,Ze()?this.f=new lo(self):Oh()?this.f=new yo(s):this.f=new ao,this.b=null}var Va,nt="idToken",Ly=new Ft(3e4,6e4),My={"Content-Type":"application/x-www-form-urlencoded"},Fy=new Ft(3e4,6e4),jy={"Content-Type":"application/json"};function Pf(e,r){r?e.a["X-Firebase-Locale"]=r:delete e.a["X-Firebase-Locale"]}function _o(e,r){r&&(e.l=Wa("https://securetoken.googleapis.com/v1/token",r),e.h=Wa("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",r),e.i=Wa("https://identitytoolkit.googleapis.com/v2/",r))}function Wa(e,r){return e=Oe(e),r=Oe(r.url),e.f=e.a+e.f,kr(e,r.c),e.a=r.a,Rr(e,r.g),e.toString()}function Df(e,r){r?(e.a["X-Client-Version"]=r,e.g["X-Client-Version"]=r):(delete e.a["X-Client-Version"],delete e.g["X-Client-Version"])}tt.prototype.T=function(){return this.b};function xf(e,r,s,u,c,d,v){Bg()||Ze()?e=D(e.u,e):(Va||(Va=new B(function(y,I){Vy(y,I)})),e=D(e.s,e)),e(r,s,u,c,d,v)}tt.prototype.u=function(e,r,s,u,c,d){if(Ze()&&(typeof f.fetch=="undefined"||typeof f.Headers=="undefined"||typeof f.Request=="undefined"))throw new b("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var v=new Kr(this.f);if(d){v.g=Math.max(0,d);var y=setTimeout(function(){v.dispatchEvent("timeout")},d)}mh(v,"complete",function(){y&&clearTimeout(y);var I=null;try{I=JSON.parse(ky(this))||null}catch{I=null}r&&r(I)}),Ys(v,"ready",function(){y&&clearTimeout(y),lh(this)}),Ys(v,"timeout",function(){y&&clearTimeout(y),lh(this),r&&r(null)}),Cy(v,e,s,u,c)};var Uy=new lt(Mi,"https://apis.google.com/js/client.js?onload=%{onload}"),Lf="__fcb"+Math.floor(1e6*Math.random()).toString();function Vy(e,r){if(((window.gapi||{}).client||{}).request)e();else{f[Lf]=function(){((window.gapi||{}).client||{}).request?e():r(Error("CORS_UNSUPPORTED"))};var s=Rs(Uy,{onload:Lf});Ry(ja(s),function(){r(Error("CORS_UNSUPPORTED"))})}}tt.prototype.s=function(e,r,s,u,c){var d=this;Va.then(function(){window.gapi.client.setApiKey(d.c);var v=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:e,method:s,body:u,headers:c,authType:"none",callback:function(y){window.gapi.auth.setToken(v),r&&r(y)}})}).o(function(v){r&&r({error:{message:v&&v.message||"CORS_UNSUPPORTED"}})})};function Wy(e,r){return new B(function(s,u){r.grant_type=="refresh_token"&&r.refresh_token||r.grant_type=="authorization_code"&&r.code?xf(e,e.l+"?key="+encodeURIComponent(e.c),function(c){c?c.error?u(Qa(c)):c.access_token&&c.refresh_token?s(c):u(new b("internal-error")):u(new b("network-request-failed"))},"POST",bh(r).toString(),e.g,e.m.get()):u(new b("internal-error"))})}function Mf(e,r,s,u,c,d,v){var y=Oe(r+s);ce(y,"key",e.c),v&&ce(y,"cb",Date.now().toString());var I=u=="GET";if(I)for(var T in c)c.hasOwnProperty(T)&&ce(y,T,c[T]);return new B(function(M,Q){xf(e,y.toString(),function(z){z?z.error?Q(Qa(z,d||{})):M(z):Q(new b("network-request-failed"))},u,I?void 0:Th(xh(c)),e.a,e.v.get())})}function mn(e){if(e=e.email,typeof e!="string"||!qg.test(e))throw new b("invalid-email")}function Ff(e){"email"in e&&mn(e)}function By(e,r){return H(e,Jy,{identifier:r,continueUri:Xi()?Dr():"http://localhost"}).then(function(s){return s.signinMethods||[]})}function Hy(e){return H(e,c_,{}).then(function(r){return r.authorizedDomains||[]})}function Pe(e){if(!e[nt])throw e.mfaPendingCredential?new b("multi-factor-auth-required",null,Dt(e)):new b("internal-error")}function Ba(e){if(e.phoneNumber||e.temporaryProof){if(!e.phoneNumber||!e.temporaryProof)throw new b("internal-error")}else{if(!e.sessionInfo)throw new b("missing-verification-id");if(!e.code)throw new b("missing-verification-code")}}tt.prototype.Ab=function(){return H(this,p_,{})},tt.prototype.Cb=function(e,r){return H(this,Vf,{idToken:e,email:r})},tt.prototype.Db=function(e,r){return H(this,Wf,{idToken:e,password:r})};var Gy={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};t=tt.prototype,t.Eb=function(e,r){var s={idToken:e},u=[];return Ac(Gy,function(c,d){var v=r[d];v===null?u.push(c):d in r&&(s[d]=v)}),u.length&&(s.deleteAttribute=u),H(this,Vf,s)},t.wb=function(e,r){return e={requestType:"PASSWORD_RESET",email:e},Ne(e,r),H(this,l_,e)},t.xb=function(e,r){return e={requestType:"EMAIL_SIGNIN",email:e},Ne(e,r),H(this,s_,e)},t.vb=function(e,r){return e={requestType:"VERIFY_EMAIL",idToken:e},Ne(e,r),H(this,a_,e)},t.Fb=function(e,r,s){return e={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:e,newEmail:r},Ne(e,s),H(this,u_,e)};function qy(e,r){return H(e,d_,r)}t.gb=function(e){return H(this,b_,e)};function zy(e,r){return H(e,v_,r).then(function(s){return s.phoneSessionInfo.sessionInfo})}function jf(e){if(!e.phoneVerificationInfo)throw new b("internal-error");if(!e.phoneVerificationInfo.sessionInfo)throw new b("missing-verification-id");if(!e.phoneVerificationInfo.code)throw new b("missing-verification-code")}function Ky(e,r){return H(e,m_,r).then(function(s){return s.phoneResponseInfo.sessionInfo})}function Yy(e,r,s){return H(e,e_,{idToken:r,deleteProvider:s})}function Ha(e){if(!e.requestUri||!e.sessionId&&!e.postBody&&!e.pendingToken)throw new b("internal-error")}function Ga(e,r){return r.oauthIdToken&&r.providerId&&r.providerId.indexOf("oidc.")==0&&!r.pendingToken&&(e.sessionId?r.nonce=e.sessionId:e.postBody&&(e=new sn(e.postBody),Js(e,"nonce")&&(r.nonce=e.get("nonce")))),r}function Uf(e){var r=null;if(e.needConfirmation?(e.code="account-exists-with-different-credential",r=oo(e)):e.errorMessage=="FEDERATED_USER_ID_ALREADY_LINKED"?(e.code="credential-already-in-use",r=oo(e)):e.errorMessage=="EMAIL_EXISTS"?(e.code="email-already-in-use",r=oo(e)):e.errorMessage&&(r=Hf(e.errorMessage)),r)throw r;Pe(e)}function qa(e,r){return r.returnIdpCredential=!0,H(e,g_,r)}function za(e,r){return r.returnIdpCredential=!0,H(e,__,r)}function Ka(e,r){return r.returnIdpCredential=!0,r.autoCreate=!1,H(e,y_,r)}function Ya(e){if(!e.oobCode)throw new b("invalid-action-code")}t.ob=function(e,r){return H(this,f_,{oobCode:e,newPassword:r})},t.Sa=function(e){return H(this,Xy,{oobCode:e})},t.kb=function(e){return H(this,Qy,{oobCode:e})};var Qy={endpoint:"setAccountInfo",A:Ya,Z:"email",B:!0},Xy={endpoint:"resetPassword",A:Ya,G:function(e){var r=e.requestType;if(!r||!e.email&&r!="EMAIL_SIGNIN"&&r!="VERIFY_AND_CHANGE_EMAIL")throw new b("internal-error")},B:!0},$y={endpoint:"signupNewUser",A:function(e){if(mn(e),!e.password)throw new b("weak-password")},G:Pe,V:!0,B:!0},Jy={endpoint:"createAuthUri",B:!0},Zy={endpoint:"deleteAccount",O:["idToken"]},e_={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(e){if(!Array.isArray(e.deleteProvider))throw new b("internal-error")}},t_={endpoint:"emailLinkSignin",O:["email","oobCode"],A:mn,G:Pe,V:!0,B:!0},n_={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:mn,G:Pe,V:!0},r_={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:jf,G:Pe,B:!0,Na:!0},i_={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:jf,G:Pe,B:!0,Na:!0},o_={endpoint:"getAccountInfo"},s_={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(e){if(e.requestType!="EMAIL_SIGNIN")throw new b("internal-error");mn(e)},Z:"email",B:!0},a_={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(e){if(e.requestType!="VERIFY_EMAIL")throw new b("internal-error")},Z:"email",B:!0},u_={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(e){if(e.requestType!="VERIFY_AND_CHANGE_EMAIL")throw new b("internal-error")},Z:"email",B:!0},l_={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(e){if(e.requestType!="PASSWORD_RESET")throw new b("internal-error");mn(e)},Z:"email",B:!0},c_={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},h_={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(e){if(!e.recaptchaSiteKey)throw new b("internal-error")}},f_={endpoint:"resetPassword",A:Ya,Z:"email",B:!0},d_={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Vf={endpoint:"setAccountInfo",O:["idToken"],A:Ff,V:!0},Wf={endpoint:"setAccountInfo",O:["idToken"],A:function(e){if(Ff(e),!e.password)throw new b("weak-password")},G:Pe,V:!0},p_={endpoint:"signupNewUser",G:Pe,V:!0,B:!0},v_={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(e){if(!e.phoneEnrollmentInfo)throw new b("internal-error");if(!e.phoneEnrollmentInfo.phoneNumber)throw new b("missing-phone-number");if(!e.phoneEnrollmentInfo.recaptchaToken)throw new b("missing-app-credential")},G:function(e){if(!e.phoneSessionInfo||!e.phoneSessionInfo.sessionInfo)throw new b("internal-error")},B:!0,Na:!0},m_={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(e){if(!e.phoneSignInInfo||!e.phoneSignInInfo.recaptchaToken)throw new b("missing-app-credential")},G:function(e){if(!e.phoneResponseInfo||!e.phoneResponseInfo.sessionInfo)throw new b("internal-error")},B:!0,Na:!0},g_={endpoint:"verifyAssertion",A:Ha,Za:Ga,G:Uf,V:!0,B:!0},y_={endpoint:"verifyAssertion",A:Ha,Za:Ga,G:function(e){if(e.errorMessage&&e.errorMessage=="USER_NOT_FOUND")throw new b("user-not-found");if(e.errorMessage)throw Hf(e.errorMessage);Pe(e)},V:!0,B:!0},__={endpoint:"verifyAssertion",A:function(e){if(Ha(e),!e.idToken)throw new b("internal-error")},Za:Ga,G:Uf,V:!0},w_={endpoint:"verifyCustomToken",A:function(e){if(!e.token)throw new b("invalid-custom-token")},G:Pe,V:!0,B:!0},Bf={endpoint:"verifyPassword",A:function(e){if(mn(e),!e.password)throw new b("wrong-password")},G:Pe,V:!0,B:!0},b_={endpoint:"verifyPhoneNumber",A:Ba,G:Pe,B:!0},E_={endpoint:"verifyPhoneNumber",A:function(e){if(!e.idToken)throw new b("internal-error");Ba(e)},G:function(e){if(e.temporaryProof)throw e.code="credential-already-in-use",oo(e);Pe(e)}},I_={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:Ba,G:Pe,B:!0},T_={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(e){if(!!e[nt]^!!e.refreshToken)throw new b("internal-error")},B:!0,Na:!0};function H(e,r,s){if(!Jg(s,r.O))return te(new b("internal-error"));var u=!!r.Na,c=r.Vb||"POST",d;return O(s).then(r.A).then(function(){return r.V&&(s.returnSecureToken=!0),r.B&&e.b&&typeof s.tenantId=="undefined"&&(s.tenantId=e.b),u?Mf(e,e.i,r.endpoint,c,s,r.Ib,r.mb||!1):Mf(e,e.h,r.endpoint,c,s,r.Ib,r.mb||!1)}).then(function(v){return d=v,r.Za?r.Za(s,d):d}).then(r.G).then(function(){if(!r.Z)return d;if(!(r.Z in d))throw new b("internal-error");return d[r.Z]})}function Hf(e){return Qa({error:{errors:[{message:e}],code:400,message:e}})}function Qa(e,r){var s=(e.error&&e.error.errors&&e.error.errors[0]||{}).reason||"",u={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(s=u[s]?new b(u[s]):null)return s;s=e.error&&e.error.message||"",u={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},Ne(u,r||{}),r=(r=s.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<r.length?r[1]:void 0;for(var c in u)if(s.indexOf(c)===0)return new b(u[c],r);return!r&&e&&(r=Lr(e)),new b("internal-error",r)}function S_(e){this.b=e,this.a=null,this.sb=C_(this)}function C_(e){return P_().then(function(){return new B(function(r,s){ne("gapi.iframes.getContext")().open({where:document.body,url:e.b,messageHandlersFilter:ne("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(u){function c(){clearTimeout(d),r()}e.a=u,e.a.restyle({setHideOnLeave:!1});var d=setTimeout(function(){s(Error("Network Error"))},O_.get());u.ping(c).then(c,function(){s(Error("Network Error"))})})})})}function A_(e,r){return e.sb.then(function(){return new B(function(s){e.a.send(r.type,r,s,ne("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}function N_(e,r){e.sb.then(function(){e.a.register("authEvent",r,ne("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}var k_=new lt(Mi,"https://apis.google.com/js/api.js?onload=%{onload}"),R_=new Ft(3e4,6e4),O_=new Ft(5e3,15e3),wo=null;function P_(){return wo||(wo=new B(function(e,r){function s(){Mh(),ne("gapi.load")("gapi.iframes",{callback:e,ontimeout:function(){Mh(),r(Error("Network Error"))},timeout:R_.get()})}if(ne("gapi.iframes.Iframe"))e();else if(ne("gapi.load"))s();else{var u="__iframefcb"+Math.floor(1e6*Math.random()).toString();f[u]=function(){ne("gapi.load")?s():r(Error("Network Error"))},u=Rs(k_,{onload:u}),O(ja(u)).o(function(){r(Error("Network Error"))})}}).o(function(e){throw wo=null,e}))}function Gf(e,r,s,u){this.l=e,this.h=r,this.i=s,this.g=u,this.f=null,this.g?(e=Oe(this.g.url),e=Yi(e.c,e.a,e.g,"/emulator/auth/iframe")):e=Yi("https",this.l,null,"/__/auth/iframe"),this.a=e,ce(this.a,"apiKey",this.h),ce(this.a,"appName",this.i),this.b=null,this.c=[]}Gf.prototype.toString=function(){return this.f?ce(this.a,"v",this.f):ct(this.a.b,"v"),this.b?ce(this.a,"eid",this.b):ct(this.a.b,"eid"),this.c.length?ce(this.a,"fw",this.c.join(",")):ct(this.a.b,"fw"),this.a.toString()};function Xa(e,r,s,u,c,d){this.u=e,this.s=r,this.c=s,this.m=u,this.v=d,this.i=this.g=this.l=null,this.a=c,this.h=this.f=null}Xa.prototype.zb=function(e){return this.h=e,this},Xa.prototype.toString=function(){if(this.v){var e=Oe(this.v.url);e=Yi(e.c,e.a,e.g,"/emulator/auth/handler")}else e=Yi("https",this.u,null,"/__/auth/handler");if(ce(e,"apiKey",this.s),ce(e,"appName",this.c),ce(e,"authType",this.m),this.a.isOAuthProvider){var r=this.a;try{var s=x.app(this.c).auth().la()}catch{s=null}r.pb=s,ce(e,"providerId",this.a.providerId),s=this.a,r=xh(s.Jb);for(var u in r)r[u]=r[u].toString();u=s.Qc,r=Dt(r);for(var c=0;c<u.length;c++){var d=u[c];d in r&&delete r[d]}s.qb&&s.pb&&!r[s.qb]&&(r[s.qb]=s.pb),en(r)||ce(e,"customParameters",Lr(r))}if(typeof this.a.Rb=="function"&&(s=this.a.Rb(),s.length&&ce(e,"scopes",s.join(","))),this.l?ce(e,"redirectUrl",this.l):ct(e.b,"redirectUrl"),this.g?ce(e,"eventId",this.g):ct(e.b,"eventId"),this.i?ce(e,"v",this.i):ct(e.b,"v"),this.b)for(var v in this.b)this.b.hasOwnProperty(v)&&!Ge(e,v)&&ce(e,v,this.b[v]);return this.h?ce(e,"tid",this.h):ct(e.b,"tid"),this.f?ce(e,"eid",this.f):ct(e.b,"eid"),v=$a(this.c),v.length&&ce(e,"fw",v.join(",")),e.toString()};function $a(e){try{return x.app(e).auth().Ga()}catch{return[]}}function qf(e,r,s,u,c,d){this.s=e,this.g=r,this.b=s,this.f=d,this.c=u||null,this.i=c||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function zf(e){var r=Dr();return Hy(e).then(function(s){e:{var u=Oe(r),c=u.c;u=u.a;for(var d=0;d<s.length;d++){var v=s[d],y=u,I=c;if(v.indexOf("chrome-extension://")==0?y=Oe(v).a==y&&I=="chrome-extension":I!="http"&&I!="https"?y=!1:Gg.test(v)?y=y==v:(v=v.split(".").join("\\."),y=new RegExp("^(.+\\."+v+"|"+v+")$","i").test(y)),y){s=!0;break e}}s=!1}if(!s)throw new Na(Dr())})}function Kf(e){return e.m||(e.m=Qi().then(function(){if(!e.u){var r=e.c,s=e.i,u=$a(e.b),c=new Gf(e.s,e.g,e.b,e.f);c.f=r,c.b=s,c.c=Zt(u||[]),e.u=c.toString()}e.v=new S_(e.u),D_(e)})),e.m}t=qf.prototype,t.Pb=function(e,r,s){var u=new b("popup-closed-by-user"),c=new b("web-storage-unsupported"),d=this,v=!1;return this.ma().then(function(){x_(d).then(function(y){y||(e&&an(e),r(c),v=!0)})}).o(function(){}).then(function(){if(!v)return Hg(e)}).then(function(){if(!v)return Vn(s).then(function(){r(u)})})},t.Yb=function(){var e=be();return!xr(e)&&!Lh(e)},t.Ub=function(){return!1},t.Nb=function(e,r,s,u,c,d,v,y){if(!e)return te(new b("popup-blocked"));if(v&&!xr())return this.ma().o(function(T){an(e),c(T)}),u(),O();this.a||(this.a=zf(Yf(this)));var I=this;return this.a.then(function(){var T=I.ma().o(function(M){throw an(e),c(M),M});return u(),T}).then(function(){if(Ca(s),!v){var T=$r(I.s,I.g,I.b,r,s,null,d,I.c,void 0,I.i,y,I.f);Ah(T,e)}}).o(function(T){throw T.code=="auth/network-request-failed"&&(I.a=null),T})};function Yf(e){return e.l||(e.C=e.c?Gn(e.c,$a(e.b)):null,e.l=new tt(e.g,Ir(e.i),e.C),e.f&&_o(e.l,e.f)),e.l}t.Ob=function(e,r,s,u){this.a||(this.a=zf(Yf(this)));var c=this;return this.a.then(function(){Ca(r);var d=$r(c.s,c.g,c.b,e,r,Dr(),s,c.c,void 0,c.i,u,c.f);Ah(d)}).o(function(d){throw d.code=="auth/network-request-failed"&&(c.a=null),d})},t.ma=function(){var e=this;return Kf(this).then(function(){return e.v.sb}).o(function(){throw e.a=null,new b("network-request-failed")})},t.ac=function(){return!0};function $r(e,r,s,u,c,d,v,y,I,T,M,Q){return e=new Xa(e,r,s,u,c,Q),e.l=d,e.g=v,e.i=y,e.b=Dt(I||null),e.f=T,e.zb(M).toString()}function D_(e){if(!e.v)throw Error("IfcHandler must be initialized!");N_(e.v,function(r){var s={};if(r&&r.authEvent){var u=!1;for(r=gf(r.authEvent),s=0;s<e.h.length;s++)u=e.h[s](r)||u;return s={},s.status=u?"ACK":"ERROR",O(s)}return s.status="ERROR",O(s)})}function x_(e){var r={type:"webStorageSupport"};return Kf(e).then(function(){return A_(e.v,r)}).then(function(s){if(s&&s.length&&typeof s[0].webStorageSupport!="undefined")return s[0].webStorageSupport;throw Error()})}t.Ea=function(e){this.h.push(e)},t.Ta=function(e){$e(this.h,function(r){return r==e})};function Qf(e){if(this.a=e||x.INTERNAL.reactNative&&x.INTERNAL.reactNative.AsyncStorage,!this.a)throw new b("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}t=Qf.prototype,t.get=function(e){return O(this.a.getItem(e)).then(function(r){return r&&zn(r)})},t.set=function(e,r){return O(this.a.setItem(e,Lr(r)))},t.U=function(e){return O(this.a.removeItem(e))},t.ca=function(){},t.ia=function(){};function Xf(e){this.b=e,this.a={},this.f=D(this.c,this)}var $f=[];function L_(){var e=Ze()?self:null;if(ie($f,function(s){s.b==e&&(r=s)}),!r){var r=new Xf(e);$f.push(r)}return r}Xf.prototype.c=function(e){var r=e.data.eventType,s=e.data.eventId,u=this.a[r];if(u&&0<u.length){e.ports[0].postMessage({status:"ack",eventId:s,eventType:r,response:null});var c=[];ie(u,function(d){c.push(O().then(function(){return d(e.origin,e.data.data)}))}),eh(c).then(function(d){var v=[];ie(d,function(y){v.push({fulfilled:y.Qb,value:y.value,reason:y.reason?y.reason.message:void 0})}),ie(v,function(y){for(var I in y)typeof y[I]=="undefined"&&delete y[I]}),e.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:v})})}};function Jf(e,r,s){en(e.a)&&e.b.addEventListener("message",e.f),typeof e.a[r]=="undefined"&&(e.a[r]=[]),e.a[r].push(s)}function Zf(e){this.a=e}Zf.prototype.postMessage=function(e,r){this.a.postMessage(e,r)};function ed(e){this.c=e,this.b=!1,this.a=[]}function td(e,r,s,u){var c,d=s||{},v,y,I,T=null;if(e.b)return te(Error("connection_unavailable"));var M=u?800:50,Q=typeof MessageChannel!="undefined"?new MessageChannel:null;return new B(function(z,ye){Q?(c=Math.floor(Math.random()*Math.pow(10,20)).toString(),Q.port1.start(),y=setTimeout(function(){ye(Error("unsupported_event"))},M),v=function(At){At.data.eventId===c&&(At.data.status==="ack"?(clearTimeout(y),I=setTimeout(function(){ye(Error("timeout"))},3e3)):At.data.status==="done"?(clearTimeout(I),typeof At.data.response!="undefined"?z(At.data.response):ye(Error("unknown_error"))):(clearTimeout(y),clearTimeout(I),ye(Error("invalid_response"))))},T={messageChannel:Q,onMessage:v},e.a.push(T),Q.port1.addEventListener("message",v),e.c.postMessage({eventType:r,eventId:c,data:d},[Q.port2])):ye(Error("connection_unavailable"))}).then(function(z){return Ja(e,T),z}).o(function(z){throw Ja(e,T),z})}function Ja(e,r){if(r){var s=r.messageChannel,u=r.onMessage;s&&(s.port1.removeEventListener("message",u),s.port1.close()),$e(e.a,function(c){return c==r})}}ed.prototype.close=function(){for(;0<this.a.length;)Ja(this,this.a[0]);this.b=!0};function nd(){if(!tu())throw new b("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=f.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var e=this;Ze()&&self?(this.v=L_(),Jf(this.v,"keyChanged",function(r,s){return od(e).then(function(u){return 0<u.length&&ie(e.a,function(c){c(u)}),{keyProcessed:Et(u,s.key)}})}),Jf(this.v,"ping",function(){return O(["keyChanged"])})):Xg().then(function(r){(e.h=r)&&(e.g=new ed(new Zf(r)),td(e.g,"ping",null,!0).then(function(s){s[0].fulfilled&&Et(s[0].value,"keyChanged")&&(e.s=!0)}).o(function(){}))})}var Za;function M_(e){return new B(function(r,s){var u=e.m.deleteDatabase("firebaseLocalStorageDb");u.onsuccess=function(){r()},u.onerror=function(c){s(Error(c.target.error))}})}function rd(e){return new B(function(r,s){var u=e.m.open("firebaseLocalStorageDb",1);u.onerror=function(c){try{c.preventDefault()}catch{}s(Error(c.target.error))},u.onupgradeneeded=function(c){c=c.target.result;try{c.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(d){s(d)}},u.onsuccess=function(c){c=c.target.result,c.objectStoreNames.contains("firebaseLocalStorage")?r(c):M_(e).then(function(){return rd(e)}).then(function(d){r(d)}).o(function(d){s(d)})}})}function eu(e){return e.i||(e.i=rd(e)),e.i}function bo(e,r){function s(c,d){eu(e).then(r).then(c).o(function(v){if(3<++u)d(v);else return eu(e).then(function(y){return y.close(),e.i=void 0,s(c,d)}).o(function(y){d(y)})})}var u=0;return new B(s)}function tu(){try{return!!f.indexedDB}catch{return!1}}function Jr(e){return e.objectStore("firebaseLocalStorage")}function Zr(e,r){return e.transaction(["firebaseLocalStorage"],r?"readwrite":"readonly")}function Xn(e){return new B(function(r,s){e.onsuccess=function(u){u&&u.target?r(u.target.result):r()},e.onerror=function(u){s(u.target.error)}})}t=nd.prototype,t.set=function(e,r){var s=this,u=!1;return bo(this,function(c){return c=Jr(Zr(c,!0)),Xn(c.get(e))}).then(function(c){return bo(s,function(d){if(d=Jr(Zr(d,!0)),c)return c.value=r,Xn(d.put(c));s.b++,u=!0;var v={};return v.fbase_key=e,v.value=r,Xn(d.add(v))})}).then(function(){return s.c[e]=r,id(s,e)}).oa(function(){u&&s.b--})};function id(e,r){return e.g&&e.h&&Qg()===e.h?td(e.g,"keyChanged",{key:r},e.s).then(function(){}).o(function(){}):O()}t.get=function(e){return bo(this,function(r){return Xn(Jr(Zr(r,!1)).get(e))}).then(function(r){return r&&r.value})},t.U=function(e){var r=this,s=!1;return bo(this,function(u){return s=!0,r.b++,Xn(Jr(Zr(u,!0)).delete(e))}).then(function(){return delete r.c[e],id(r,e)}).oa(function(){s&&r.b--})};function od(e){return eu(e).then(function(r){var s=Jr(Zr(r,!1));return s.getAll?Xn(s.getAll()):new B(function(u,c){var d=[],v=s.openCursor();v.onsuccess=function(y){(y=y.target.result)?(d.push(y.value),y.continue()):u(d)},v.onerror=function(y){c(y.target.error)}})}).then(function(r){var s={},u=[];if(e.b==0){for(u=0;u<r.length;u++)s[r[u].fbase_key]=r[u].value;u=Nh(e.c,s),e.c=s}return u})}t.ca=function(e){this.a.length==0&&F_(this),this.a.push(e)},t.ia=function(e){$e(this.a,function(r){return r==e}),this.a.length==0&&sd(this)};function F_(e){function r(){e.f=setTimeout(function(){e.l=od(e).then(function(s){0<s.length&&ie(e.a,function(u){u(s)})}).then(function(){r()}).o(function(s){s.message!="STOP_EVENT"&&r()})},800)}sd(e),r()}function sd(e){e.l&&e.l.cancel("STOP_EVENT"),e.f&&(clearTimeout(e.f),e.f=null)}function ad(e){var r=this,s=null;this.a=[],this.type="indexedDB",this.c=e,this.b=O().then(function(){if(tu()){var u=ln(),c="__sak"+u;return Za||(Za=new nd),s=Za,s.set(c,u).then(function(){return s.get(c)}).then(function(d){if(d!==u)throw Error("indexedDB not supported!");return s.U(c)}).then(function(){return s}).o(function(){return r.c})}return r.c}).then(function(u){return r.type=u.type,u.ca(function(c){ie(r.a,function(d){d(c)})}),u})}t=ad.prototype,t.get=function(e){return this.b.then(function(r){return r.get(e)})},t.set=function(e,r){return this.b.then(function(s){return s.set(e,r)})},t.U=function(e){return this.b.then(function(r){return r.U(e)})},t.ca=function(e){this.a.push(e)},t.ia=function(e){$e(this.a,function(r){return r==e})};function ei(){this.a={},this.type="inMemory"}t=ei.prototype,t.get=function(e){return O(this.a[e])},t.set=function(e,r){return this.a[e]=r,O()},t.U=function(e){return delete this.a[e],O()},t.ca=function(){},t.ia=function(){};function Eo(){if(!j_())throw ht()=="Node"?new b("internal-error","The LocalStorage compatibility library was not found."):new b("web-storage-unsupported");this.a=ud()||x.INTERNAL.node.localStorage,this.type="localStorage"}function ud(){try{var e=f.localStorage,r=ln();return e&&(e.setItem(r,"1"),e.removeItem(r)),e}catch{return null}}function j_(){var e=ht()=="Node";if(e=ud()||e&&x.INTERNAL.node&&x.INTERNAL.node.localStorage,!e)return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch{return!1}}t=Eo.prototype,t.get=function(e){var r=this;return O().then(function(){var s=r.a.getItem(e);return zn(s)})},t.set=function(e,r){var s=this;return O().then(function(){var u=Lr(r);u===null?s.U(e):s.a.setItem(e,u)})},t.U=function(e){var r=this;return O().then(function(){r.a.removeItem(e)})},t.ca=function(e){f.window&&He(f.window,"storage",e)},t.ia=function(e){f.window&&Me(f.window,"storage",e)};function nu(){this.type="nullStorage"}t=nu.prototype,t.get=function(){return O(null)},t.set=function(){return O()},t.U=function(){return O()},t.ca=function(){},t.ia=function(){};function ru(){if(!U_())throw ht()=="Node"?new b("internal-error","The SessionStorage compatibility library was not found."):new b("web-storage-unsupported");this.a=ld()||x.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function ld(){try{var e=f.sessionStorage,r=ln();return e&&(e.setItem(r,"1"),e.removeItem(r)),e}catch{return null}}function U_(){var e=ht()=="Node";if(e=ld()||e&&x.INTERNAL.node&&x.INTERNAL.node.sessionStorage,!e)return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch{return!1}}t=ru.prototype,t.get=function(e){var r=this;return O().then(function(){var s=r.a.getItem(e);return zn(s)})},t.set=function(e,r){var s=this;return O().then(function(){var u=Lr(r);u===null?s.U(e):s.a.setItem(e,u)})},t.U=function(e){var r=this;return O().then(function(){r.a.removeItem(e)})},t.ca=function(){},t.ia=function(){};function V_(){var e={};e.Browser=W_,e.Node=B_,e.ReactNative=H_,e.Worker=G_,this.a=e[ht()]}var iu,W_={F:Eo,cb:ru},B_={F:Eo,cb:ru},H_={F:Qf,cb:nu},G_={F:Eo,cb:nu},$n={rd:"local",NONE:"none",td:"session"};function q_(e){var r=new b("invalid-persistence-type"),s=new b("unsupported-persistence-type");e:{for(u in $n)if($n[u]==e){var u=!0;break e}u=!1}if(!u||typeof e!="string")throw r;switch(ht()){case"ReactNative":if(e==="session")throw s;break;case"Node":if(e!=="none")throw s;break;case"Worker":if(e==="session"||!tu()&&e!=="none")throw s;break;default:if(!ia()&&e!=="none")throw s}}function cd(){var e=!!(!Lh(be())&&na()),r=xr(),s=ia();this.m=e,this.h=r,this.l=s,this.a={},iu||(iu=new V_),e=iu;try{this.g=!ea()&&Fh()||!f.indexedDB?new e.a.F:new ad(Ze()?new ei:new e.a.F)}catch{this.g=new ei,this.h=!0}try{this.i=new e.a.cb}catch{this.i=new ei}this.v=new ei,this.f=D(this.Zb,this),this.b={}}var ou;function ti(){return ou||(ou=new cd),ou}function gn(e,r){switch(r){case"session":return e.i;case"none":return e.v;default:return e.g}}function Jn(e,r){return"firebase:"+e.name+(r?":"+r:"")}function z_(e,r,s){var u=Jn(r,s),c=gn(e,r.F);return e.get(r,s).then(function(d){var v=null;try{v=zn(f.localStorage.getItem(u))}catch{}if(v&&!d)return f.localStorage.removeItem(u),e.set(r,v,s);v&&d&&c.type!="localStorage"&&f.localStorage.removeItem(u)})}t=cd.prototype,t.get=function(e,r){return gn(this,e.F).get(Jn(e,r))};function Zn(e,r,s){return s=Jn(r,s),r.F=="local"&&(e.b[s]=null),gn(e,r.F).U(s)}t.set=function(e,r,s){var u=Jn(e,s),c=this,d=gn(this,e.F);return d.set(u,r).then(function(){return d.get(u)}).then(function(v){e.F=="local"&&(c.b[u]=v)})},t.addListener=function(e,r,s){e=Jn(e,r),this.l&&(this.b[e]=f.localStorage.getItem(e)),en(this.a)&&(gn(this,"local").ca(this.f),this.h||(ea()||!Fh())&&f.indexedDB||!this.l||K_(this)),this.a[e]||(this.a[e]=[]),this.a[e].push(s)},t.removeListener=function(e,r,s){e=Jn(e,r),this.a[e]&&($e(this.a[e],function(u){return u==s}),this.a[e].length==0&&delete this.a[e]),en(this.a)&&(gn(this,"local").ia(this.f),su(this))};function K_(e){su(e),e.c=setInterval(function(){for(var r in e.a){var s=f.localStorage.getItem(r),u=e.b[r];s!=u&&(e.b[r]=s,s=new rn({type:"storage",key:r,target:window,oldValue:u,newValue:s,a:!0}),e.Zb(s))}},1e3)}function su(e){e.c&&(clearInterval(e.c),e.c=null)}t.Zb=function(e){if(e&&e.g){var r=e.a.key;if(r==null)for(var s in this.a){var u=this.b[s];typeof u=="undefined"&&(u=null);var c=f.localStorage.getItem(s);c!==u&&(this.b[s]=c,this.nb(s))}else if(r.indexOf("firebase:")==0&&this.a[r]){if(typeof e.a.a!="undefined"?gn(this,"local").ia(this.f):su(this),this.m){if(s=f.localStorage.getItem(r),u=e.a.newValue,u!==s)u!==null?f.localStorage.setItem(r,u):f.localStorage.removeItem(r);else if(this.b[r]===u&&typeof e.a.a=="undefined")return}var d=this;s=function(){(typeof e.a.a!="undefined"||d.b[r]!==f.localStorage.getItem(r))&&(d.b[r]=f.localStorage.getItem(r),d.nb(r))},Je&&xt&&xt==10&&f.localStorage.getItem(r)!==e.a.newValue&&e.a.newValue!==e.a.oldValue?setTimeout(s,10):s()}}else ie(e,D(this.nb,this))},t.nb=function(e){this.a[e]&&ie(this.a[e],function(r){r()})};function Y_(e){this.a=e,this.b=ti()}var au={name:"authEvent",F:"local"};function Q_(e){return e.b.get(au,e.a).then(function(r){return gf(r)})}function X_(){this.a=ti()}function $_(){this.b=-1}function Io(e,r){this.b=hd,this.f=f.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=e,this.h=r,this.l=f.Int32Array?new Int32Array(64):Array(64),To===void 0&&(f.Int32Array?To=new Int32Array(pd):To=pd),this.reset()}var To;j(Io,$_);for(var hd=64,J_=hd-1,fd=[],uu=0;uu<J_;uu++)fd[uu]=0;var dd=As(128,fd);Io.prototype.reset=function(){this.g=this.c=0,this.a=f.Int32Array?new Int32Array(this.h):Zt(this.h)};function lu(e){for(var r=e.f,s=e.l,u=0,c=0;c<r.length;)s[u++]=r[c]<<24|r[c+1]<<16|r[c+2]<<8|r[c+3],c=4*u;for(r=16;64>r;r++){c=s[r-15]|0,u=s[r-2]|0;var d=(s[r-16]|0)+((c>>>7|c<<25)^(c>>>18|c<<14)^c>>>3)|0,v=(s[r-7]|0)+((u>>>17|u<<15)^(u>>>19|u<<13)^u>>>10)|0;s[r]=d+v|0}u=e.a[0]|0,c=e.a[1]|0;var y=e.a[2]|0,I=e.a[3]|0,T=e.a[4]|0,M=e.a[5]|0,Q=e.a[6]|0;for(d=e.a[7]|0,r=0;64>r;r++){var z=((u>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10))+(u&c^u&y^c&y)|0;v=T&M^~T&Q,d=d+((T>>>6|T<<26)^(T>>>11|T<<21)^(T>>>25|T<<7))|0,v=v+(To[r]|0)|0,v=d+(v+(s[r]|0)|0)|0,d=Q,Q=M,M=T,T=I+v|0,I=y,y=c,c=u,u=v+z|0}e.a[0]=e.a[0]+u|0,e.a[1]=e.a[1]+c|0,e.a[2]=e.a[2]+y|0,e.a[3]=e.a[3]+I|0,e.a[4]=e.a[4]+T|0,e.a[5]=e.a[5]+M|0,e.a[6]=e.a[6]+Q|0,e.a[7]=e.a[7]+d|0}function cu(e,r,s){s===void 0&&(s=r.length);var u=0,c=e.c;if(typeof r=="string")for(;u<s;)e.f[c++]=r.charCodeAt(u++),c==e.b&&(lu(e),c=0);else if(S(r))for(;u<s;){var d=r[u++];if(!(typeof d=="number"&&0<=d&&255>=d&&d==(d|0)))throw Error("message must be a byte array");e.f[c++]=d,c==e.b&&(lu(e),c=0)}else throw Error("message must be string or array");e.c=c,e.g+=s}var pd=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function vd(){Io.call(this,8,Z_)}j(vd,Io);var Z_=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function md(e,r,s,u,c,d){this.v=e,this.i=r,this.l=s,this.m=u||null,this.u=c||null,this.s=d,this.h=r+":"+s,this.C=new X_,this.g=new Y_(this.h),this.f=null,this.b=[],this.a=this.c=null}function So(e){return new b("invalid-cordova-configuration",e)}t=md.prototype,t.ma=function(){return this.Ia?this.Ia:this.Ia=zg().then(function(){if(typeof ne("universalLinks.subscribe",f)!="function")throw So("cordova-universal-links-plugin-fix is not installed");if(typeof ne("BuildInfo.packageName",f)=="undefined")throw So("cordova-plugin-buildinfo is not installed");if(typeof ne("cordova.plugins.browsertab.openUrl",f)!="function")throw So("cordova-plugin-browsertab is not installed");if(typeof ne("cordova.InAppBrowser.open",f)!="function")throw So("cordova-plugin-inappbrowser is not installed")},function(){throw new b("cordova-not-ready")})};function ew(){for(var e=20,r=[];0<e;)r.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return r.join("")}function tw(e){var r=new vd;cu(r,e),e=[];var s=8*r.g;56>r.c?cu(r,dd,56-r.c):cu(r,dd,r.b-(r.c-56));for(var u=63;56<=u;u--)r.f[u]=s&255,s/=256;for(lu(r),u=s=0;u<r.i;u++)for(var c=24;0<=c;c-=8)e[s++]=r.a[u]>>c&255;return fy(e)}t.Pb=function(e,r){return r(new b("operation-not-supported-in-this-environment")),O()},t.Nb=function(){return te(new b("operation-not-supported-in-this-environment"))},t.ac=function(){return!1},t.Yb=function(){return!0},t.Ub=function(){return!0},t.Ob=function(e,r,s,u){if(this.c)return te(new b("redirect-operation-pending"));var c=this,d=f.document,v=null,y=null,I=null,T=null;return this.c=O().then(function(){return Ca(r),yd(c)}).then(function(){return nw(c,e,r,s,u)}).then(function(){return new B(function(M,Q){y=function(){var z=ne("cordova.plugins.browsertab.close",f);return M(),typeof z=="function"&&z(),c.a&&typeof c.a.close=="function"&&(c.a.close(),c.a=null),!1},c.Ea(y),I=function(){v||(v=Vn(2e3).then(function(){Q(new b("redirect-cancelled-by-user"))}))},T=function(){oa()&&I()},d.addEventListener("resume",I,!1),be().toLowerCase().match(/android/)||d.addEventListener("visibilitychange",T,!1)}).o(function(M){return hu(c).then(function(){throw M})})}).oa(function(){I&&d.removeEventListener("resume",I,!1),T&&d.removeEventListener("visibilitychange",T,!1),v&&v.cancel(),y&&c.Ta(y),c.c=null})};function nw(e,r,s,u,c){var d=ew(),v=new et(r,u,null,d,new b("no-auth-event"),null,c),y=ne("BuildInfo.packageName",f);if(typeof y!="string")throw new b("invalid-cordova-configuration");var I=ne("BuildInfo.displayName",f),T={};if(be().toLowerCase().match(/iphone|ipad|ipod/))T.ibi=y;else if(be().toLowerCase().match(/android/))T.apn=y;else return te(new b("operation-not-supported-in-this-environment"));I&&(T.appDisplayName=I),d=tw(d),T.sessionId=d;var M=$r(e.v,e.i,e.l,r,s,null,u,e.m,T,e.u,c,e.s);return e.ma().then(function(){var Q=e.h;return e.C.a.set(au,v.w(),Q)}).then(function(){var Q=ne("cordova.plugins.browsertab.isAvailable",f);if(typeof Q!="function")throw new b("invalid-cordova-configuration");var z=null;Q(function(ye){if(ye){if(z=ne("cordova.plugins.browsertab.openUrl",f),typeof z!="function")throw new b("invalid-cordova-configuration");z(M)}else{if(z=ne("cordova.InAppBrowser.open",f),typeof z!="function")throw new b("invalid-cordova-configuration");ye=be(),e.a=z(M,ye.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||ye.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}function gd(e,r){for(var s=0;s<e.b.length;s++)try{e.b[s](r)}catch{}}function yd(e){return e.f||(e.f=e.ma().then(function(){return new B(function(r){function s(u){return r(u),e.Ta(s),!1}e.Ea(s),rw(e)})})),e.f}function hu(e){var r=null;return Q_(e.g).then(function(s){return r=s,s=e.g,Zn(s.b,au,s.a)}).then(function(){return r})}function rw(e){function r(v){u=!0,c&&c.cancel(),hu(e).then(function(y){var I=s;if(y&&v&&v.url){var T=null;I=lf(v.url),I.indexOf("/__/auth/callback")!=-1&&(T=Oe(I),T=zn(Ge(T,"firebaseError")||null),T=(T=typeof T=="object"?yc(T):null)?new et(y.c,y.b,null,null,T,null,y.T()):new et(y.c,y.b,I,y.f,null,null,y.T())),I=T||s}gd(e,I)})}var s=new et("unknown",null,null,null,new b("no-auth-event")),u=!1,c=Vn(500).then(function(){return hu(e).then(function(){u||gd(e,s)})}),d=f.handleOpenURL;f.handleOpenURL=function(v){if(v.toLowerCase().indexOf(ne("BuildInfo.packageName",f).toLowerCase()+"://")==0&&r({url:v}),typeof d=="function")try{d(v)}catch(y){console.error(y)}},Aa||(Aa=new wy),by(r)}t.Ea=function(e){this.b.push(e),yd(this).o(function(r){r.code==="auth/invalid-cordova-configuration"&&(r=new et("unknown",null,null,null,new b("no-auth-event")),e(r))})},t.Ta=function(e){$e(this.b,function(r){return r==e})};function iw(e){this.a=e,this.b=ti()}var fu={name:"pendingRedirect",F:"session"};function ow(e){return e.b.set(fu,"pending",e.a)}function du(e){return Zn(e.b,fu,e.a)}function sw(e){return e.b.get(fu,e.a).then(function(r){return r=="pending"})}function Co(e,r,s,u){this.i={},this.u=0,this.D=e,this.v=r,this.m=s,this.J=u,this.h=[],this.f=!1,this.l=D(this.s,this),this.b=new No,this.C=new Nd,this.g=new iw(Sd(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=_d(this.D,this.v,this.m,Tr,this.J)}function _d(e,r,s,u,c){var d=x.SDK_VERSION||null;return ta()?new md(e,r,s,d,u,c):new qf(e,r,s,d,u,c)}Co.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=_d(this.D,this.v,this.m,null,this.J),this.i={}};function wd(e){e.f||(e.f=!0,e.a.Ea(e.l));var r=e.a;return e.a.ma().o(function(s){throw e.a==r&&e.reset(),s})}function bd(e){e.a.Yb()&&wd(e).o(function(r){var s=new et("unknown",null,null,null,new b("operation-not-supported-in-this-environment"));vu(r)&&e.s(s)}),e.a.Ub()||Cd(e.b)}function Ao(e,r){Et(e.h,r)||e.h.push(r),e.f||sw(e.g).then(function(s){s?du(e.g).then(function(){wd(e).o(function(u){var c=new et("unknown",null,null,null,new b("operation-not-supported-in-this-environment"));vu(u)&&e.s(c)})}):bd(e)}).o(function(){bd(e)})}function pu(e,r){$e(e.h,function(s){return s==r})}Co.prototype.s=function(e){if(!e)throw new b("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),e&&e.getUid()&&this.i.hasOwnProperty(e.getUid()))return!1;for(var r=!1,s=0;s<this.h.length;s++){var u=this.h[s];if(u.Gb(e.c,e.b)){(r=this.c[e.c])&&(r.h(e,u),e&&(e.f||e.b)&&(this.i[e.getUid()]=!0,this.u=Date.now())),r=!0;break}}return Cd(this.b),r};var aw=new Ft(2e3,1e4),uw=new Ft(3e4,6e4);Co.prototype.ra=function(){return this.b.ra()};function Ed(e,r,s,u,c,d,v){return e.a.Nb(r,s,u,function(){e.f||(e.f=!0,e.a.Ea(e.l))},function(){e.reset()},c,d,v)}function vu(e){return!!(e&&e.code=="auth/cordova-not-ready")}function Id(e,r,s,u,c){var d;return ow(e.g).then(function(){return e.a.Ob(r,s,u,c).o(function(v){if(vu(v))throw new b("operation-not-supported-in-this-environment");return d=v,du(e.g).then(function(){throw d})}).then(function(){return e.a.ac()?new B(function(){}):du(e.g).then(function(){return e.ra()}).then(function(){}).o(function(){})})})}function Td(e,r,s,u,c){return e.a.Pb(u,function(d){r.na(s,null,d,c)},aw.get())}var mu={};function Sd(e,r,s){return e=e+":"+r,s&&(e=e+":"+s.url),e}function gu(e,r,s,u){var c=Sd(r,s,u);return mu[c]||(mu[c]=new Co(e,r,s,u)),mu[c]}function No(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}No.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},No.prototype.h=function(e,r){if(e){this.reset(),this.g=!0;var s=e.c,u=e.b,c=e.a&&e.a.code=="auth/web-storage-unsupported",d=e.a&&e.a.code=="auth/operation-not-supported-in-this-environment";this.i=!(!c&&!d),s!="unknown"||c||d?e.a?(yn(this,!0,null,e.a),O()):r.Fa(s,u)?lw(this,e,r):te(new b("invalid-auth-event")):(yn(this,!1,null,null),O())}else te(new b("invalid-auth-event"))};function Cd(e){e.g||(e.g=!0,yn(e,!1,null,null))}function ko(e){e.g&&!e.i&&yn(e,!1,null,null)}function lw(e,r,s){s=s.Fa(r.c,r.b);var u=r.g,c=r.f,d=r.i,v=r.T(),y=!!r.c.match(/Redirect$/);s(u,c,v,d).then(function(I){yn(e,y,I,null)}).o(function(I){yn(e,y,null,I)})}function cw(e,r){if(e.b=function(){return te(r)},e.c.length)for(var s=0;s<e.c.length;s++)e.c[s](r)}function Ad(e,r){if(e.b=function(){return O(r)},e.f.length)for(var s=0;s<e.f.length;s++)e.f[s](r)}function yn(e,r,s,u){r?u?cw(e,u):Ad(e,s):Ad(e,{user:null}),e.f=[],e.c=[]}No.prototype.ra=function(){var e=this;return new B(function(r,s){e.b?e.b().then(r,s):(e.f.push(r),e.c.push(s),hw(e))})};function hw(e){var r=new b("timeout");e.a&&e.a.cancel(),e.a=Vn(uw.get()).then(function(){e.b||(e.g=!0,yn(e,!0,null,r))})}function Nd(){}Nd.prototype.h=function(e,r){if(e){var s=e.c,u=e.b;e.a?(r.na(e.c,null,e.a,e.b),O()):r.Fa(s,u)?fw(e,r):te(new b("invalid-auth-event"))}else te(new b("invalid-auth-event"))};function fw(e,r){var s=e.b,u=e.c;r.Fa(u,s)(e.g,e.f,e.T(),e.i).then(function(c){r.na(u,c,null,s)}).o(function(c){r.na(u,null,c,s)})}function kd(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(e){this.jb=e},enumerable:!1})}function yu(e,r){this.a=r,R(this,"verificationId",e)}yu.prototype.confirm=function(e){return e=mf(this.verificationId,e),this.a(e)};function _u(e,r,s,u){return new St(e).gb(r,s).then(function(c){return new yu(c,u)})}function dw(e){var r=ef(e);if(!(r&&r.exp&&r.auth_time&&r.iat))throw new b("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Se(this,{token:e,expirationTime:Mr(1e3*r.exp),authTime:Mr(1e3*r.auth_time),issuedAtTime:Mr(1e3*r.iat),signInProvider:r.firebase&&r.firebase.sign_in_provider?r.firebase.sign_in_provider:null,signInSecondFactor:r.firebase&&r.firebase.sign_in_second_factor?r.firebase.sign_in_second_factor:null,claims:r})}function wu(e,r,s){var u=r&&r[Od];if(!u)throw new b("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=e,this.f=Dt(r),this.g=s,this.c=new ro(null,u),this.b=[];var c=this;ie(r[Rd]||[],function(d){(d=ha(d))&&c.b.push(d)}),R(this,"auth",this.a),R(this,"session",this.c),R(this,"hints",this.b)}var Rd="mfaInfo",Od="mfaPendingCredential";wu.prototype.Rc=function(e){var r=this;return e.tb(this.a.a,this.c).then(function(s){var u=Dt(r.f);return delete u[Rd],delete u[Od],Ne(u,s),r.g(u)})};function bu(e,r,s,u){b.call(this,"multi-factor-auth-required",u,r),this.b=new wu(e,r,s),R(this,"resolver",this.b)}j(bu,b);function Pd(e,r,s){if(e&&C(e.serverResponse)&&e.code==="auth/multi-factor-auth-required")try{return new bu(r,e.serverResponse,s,e.message)}catch{}return null}function Dd(){}Dd.prototype.tb=function(e,r,s){return r.type==Vr?pw(this,e,r,s):vw(this,e,r)};function pw(e,r,s,u){return s.Ha().then(function(c){return c={idToken:c},typeof u!="undefined"&&(c.displayName=u),Ne(c,{phoneVerificationInfo:Wr(e.a)}),H(r,r_,c)})}function vw(e,r,s){return s.Ha().then(function(u){return u={mfaPendingCredential:u},Ne(u,{phoneVerificationInfo:Wr(e.a)}),H(r,i_,u)})}function Eu(e){R(this,"factorId",e.fa),this.a=e}j(Eu,Dd);function xd(e){if(Eu.call(this,e),this.a.fa!=St.PROVIDER_ID)throw new b("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}j(xd,Eu);function er(e,r){Re.call(this,e);for(var s in r)this[s]=r[s]}j(er,Re);function Iu(e,r){this.a=e,this.b=[],this.c=D(this.yc,this),He(this.a,"userReloaded",this.c);var s=[];r&&r.multiFactor&&r.multiFactor.enrolledFactors&&ie(r.multiFactor.enrolledFactors,function(u){var c=null,d={};if(u){u.uid&&(d[da]=u.uid),u.displayName&&(d[Uh]=u.displayName),u.enrollmentTime&&(d[fa]=new Date(u.enrollmentTime).toISOString()),u.phoneNumber&&(d[pa]=u.phoneNumber);try{c=new Fr(d)}catch{}u=c}else u=null;u&&s.push(u)}),Ro(this,s)}function mw(e){var r=[];return ie(e.mfaInfo||[],function(s){(s=ha(s))&&r.push(s)}),r}t=Iu.prototype,t.yc=function(e){Ro(this,mw(e.hd))};function Ro(e,r){e.b=r,R(e,"enrolledFactors",r)}t.Sb=function(){return this.a.I().then(function(e){return new ro(e,null)})},t.fc=function(e,r){var s=this,u=this.a.a;return this.Sb().then(function(c){return e.tb(u,c,r)}).then(function(c){return pt(s.a,c),s.a.reload()})},t.bd=function(e){var r=this,s=typeof e=="string"?e:e.uid,u=this.a.a;return this.a.I().then(function(c){return H(u,T_,{idToken:c,mfaEnrollmentId:s})}).then(function(c){var d=Km(r.b,function(v){return v.uid!=s});return Ro(r,d),pt(r.a,c),r.a.reload().o(function(v){if(v.code!="auth/user-token-expired")throw v})})},t.w=function(){return{multiFactor:{enrolledFactors:xi(this.b,function(e){return e.w()})}}};function Tu(e,r,s){if(this.h=e,this.i=r,this.g=s,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}Tu.prototype.start=function(){this.a=this.c,Su(this,!0)};function gw(e,r){return r?(e.a=e.c,e.g()):(r=e.a,e.a*=2,e.a>e.f&&(e.a=e.f),r)}function Su(e,r){e.stop(),e.b=Vn(gw(e,r)).then(function(){return Yg()}).then(function(){return e.h()}).then(function(){Su(e,!0)}).o(function(s){e.i(s)&&Su(e,!1)})}Tu.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)};function Cu(e){this.f=e,this.b=this.a=null,this.c=Date.now()}Cu.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}};function Ld(e,r){typeof r=="undefined"&&(e.b?(r=e.b,r=r.a-r.g):r=0),e.c=Date.now()+1e3*r}function Md(e,r){e.b=to(r[nt]||""),e.a=r.refreshToken,r=r.expiresIn,Ld(e,typeof r!="undefined"?Number(r):void 0)}function yw(e,r){e.b=r.b,e.a=r.a,e.c=r.c}function _w(e,r){return Wy(e.f,r).then(function(s){return e.b=to(s.access_token),e.a=s.refresh_token,Ld(e,s.expires_in),{accessToken:e.b.toString(),refreshToken:e.a}}).o(function(s){throw s.code=="auth/user-token-expired"&&(e.a=null),s})}Cu.prototype.getToken=function(e){return e=!!e,this.b&&!this.a?te(new b("user-token-expired")):e||!this.b||Date.now()>this.c-3e4?this.a?_w(this,{grant_type:"refresh_token",refresh_token:this.a}):O(null):O({accessToken:this.b.toString(),refreshToken:this.a})};function Oo(e,r){this.a=e||null,this.b=r||null,Se(this,{lastSignInTime:Mr(r||null),creationTime:Mr(e||null)})}function ww(e){return new Oo(e.a,e.b)}Oo.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}};function bw(e,r,s,u,c,d){Se(this,{uid:e,displayName:u||null,photoURL:c||null,email:s||null,phoneNumber:d||null,providerId:r})}function je(e,r,s){this.N=[],this.l=e.apiKey,this.m=e.appName,this.s=e.authDomain||null;var u=x.SDK_VERSION?Gn(x.SDK_VERSION):null;this.a=new tt(this.l,Ir(Tr),u),(this.u=e.emulatorConfig||null)&&_o(this.a,this.u),this.h=new Cu(this.a),Du(this,r[nt]),Md(this.h,r),R(this,"refreshToken",this.h.a),jd(this,s||{}),Te.call(this),this.P=!1,this.s&&un()&&(this.b=gu(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=Ew(this),this.ba=D(this.ib,this);var c=this;this.za=null,this.Pa=function(d){c.xa(d.h)},this.qa=null,this.Ba=function(d){Au(c,d.c)},this.$=null,this.aa=[],this.Oa=function(d){ni(c,d.f)},this.ja=null,this.S=new Iu(this,s),R(this,"multiFactor",this.S)}j(je,Te),je.prototype.xa=function(e){this.za=e,Pf(this.a,e)};function Au(e,r){e.u=r,_o(e.a,r),e.b&&(r=e.b,e.b=gu(e.s,e.l,e.m,e.u),e.P&&(pu(r,e),Ao(e.b,e)))}je.prototype.la=function(){return this.za};function Nu(e,r){e.qa&&Me(e.qa,"languageCodeChanged",e.Pa),(e.qa=r)&&He(r,"languageCodeChanged",e.Pa)}function ku(e,r){e.$&&Me(e.$,"emulatorConfigChanged",e.Ba),(e.$=r)&&He(r,"emulatorConfigChanged",e.Ba)}function ni(e,r){e.aa=r,Df(e.a,x.SDK_VERSION?Gn(x.SDK_VERSION,e.aa):null)}je.prototype.Ga=function(){return Zt(this.aa)};function Ru(e,r){e.ja&&Me(e.ja,"frameworkChanged",e.Oa),(e.ja=r)&&He(r,"frameworkChanged",e.Oa)}je.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())};function Ou(e){try{return x.app(e.m).auth()}catch{throw new b("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function Ew(e){return new Tu(function(){return e.I(!0)},function(r){return!!(r&&r.code=="auth/network-request-failed")},function(){var r=e.h.c-Date.now()-3e5;return 0<r?r:0})}function Fd(e){e.J||e.D.b||(e.D.start(),Me(e,"tokenChanged",e.ba),He(e,"tokenChanged",e.ba))}function Pu(e){Me(e,"tokenChanged",e.ba),e.D.stop()}function Du(e,r){e.Aa=r,R(e,"_lat",r)}function Iw(e,r){$e(e.W,function(s){return s==r})}function _n(e){for(var r=[],s=0;s<e.W.length;s++)r.push(e.W[s](e));return eh(r).then(function(){return e})}function ri(e){e.b&&!e.P&&(e.P=!0,Ao(e.b,e))}function jd(e,r){Se(e,{uid:r.uid,displayName:r.displayName||null,photoURL:r.photoURL||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,isAnonymous:r.isAnonymous||!1,tenantId:r.tenantId||null,metadata:new Oo(r.createdAt,r.lastLoginAt),providerData:[]}),e.a.b=e.tenantId}R(je.prototype,"providerId","firebase");function Ud(){}function xu(e){return O().then(function(){if(e.J)throw new b("app-deleted")})}function Lu(e){return xi(e.providerData,function(r){return r.providerId})}function Mu(e,r){r&&(Vd(e,r.providerId),e.providerData.push(r))}function Vd(e,r){$e(e.providerData,function(s){return s.providerId==r})}function Vt(e,r,s){(r!="uid"||s)&&e.hasOwnProperty(r)&&R(e,r,s)}function Po(e,r){e!=r&&(Se(e,{uid:r.uid,displayName:r.displayName,photoURL:r.photoURL,email:r.email,emailVerified:r.emailVerified,phoneNumber:r.phoneNumber,isAnonymous:r.isAnonymous,tenantId:r.tenantId,providerData:[]}),r.metadata?R(e,"metadata",ww(r.metadata)):R(e,"metadata",new Oo),ie(r.providerData,function(s){Mu(e,s)}),yw(e.h,r.h),R(e,"refreshToken",e.h.a),Ro(e.S,r.S.b))}t=je.prototype,t.reload=function(){var e=this;return ve(this,xu(this).then(function(){return Fu(e).then(function(){return _n(e)}).then(Ud)}))};function Fu(e){return e.I().then(function(r){var s=e.isAnonymous;return Tw(e,r).then(function(){return s||Vt(e,"isAnonymous",!1),r})})}t.oc=function(e){return this.I(e).then(function(r){return new dw(r)})},t.I=function(e){var r=this;return ve(this,xu(this).then(function(){return r.h.getToken(e)}).then(function(s){if(!s)throw new b("internal-error");return s.accessToken!=r.Aa&&(Du(r,s.accessToken),r.dispatchEvent(new er("tokenChanged"))),Vt(r,"refreshToken",s.refreshToken),s.accessToken}))};function pt(e,r){r[nt]&&e.Aa!=r[nt]&&(Md(e.h,r),e.dispatchEvent(new er("tokenChanged")),Du(e,r[nt]),Vt(e,"refreshToken",e.h.a))}function Tw(e,r){return H(e.a,o_,{idToken:r}).then(D(e.Kc,e))}t.Kc=function(e){if(e=e.users,!e||!e.length)throw new b("internal-error");e=e[0],jd(this,{uid:e.localId,displayName:e.displayName,photoURL:e.photoUrl,email:e.email,emailVerified:!!e.emailVerified,phoneNumber:e.phoneNumber,lastLoginAt:e.lastLoginAt,createdAt:e.createdAt,tenantId:e.tenantId});for(var r=Sw(e),s=0;s<r.length;s++)Mu(this,r[s]);Vt(this,"isAnonymous",!(this.email&&e.passwordHash)&&!(this.providerData&&this.providerData.length)),this.dispatchEvent(new er("userReloaded",{hd:e}))};function Sw(e){return(e=e.providerUserInfo)&&e.length?xi(e,function(r){return new bw(r.rawId,r.providerId,r.email,r.displayName,r.photoUrl,r.phoneNumber)}):[]}t.Lc=function(e){return sa("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(e)},t.ub=function(e){var r=this,s=null;return ve(this,e.c(this.a,this.uid).then(function(u){return pt(r,u),s=ii(r,u,"reauthenticate"),r.i=null,r.reload()}).then(function(){return s}),!0)};function Do(e,r){return Fu(e).then(function(){if(Et(Lu(e),r))return _n(e).then(function(){throw new b("provider-already-linked")})})}t.Cc=function(e){return sa("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(e)},t.rb=function(e){var r=this,s=null;return ve(this,Do(this,e.providerId).then(function(){return r.I()}).then(function(u){return e.b(r.a,u)}).then(function(u){return s=ii(r,u,"link"),Wd(r,u)}).then(function(){return s}))},t.Dc=function(e,r){var s=this;return ve(this,Do(this,"phone").then(function(){return _u(Ou(s),e,r,D(s.rb,s))}))},t.Mc=function(e,r){var s=this;return ve(this,O().then(function(){return _u(Ou(s),e,r,D(s.ub,s))}),!0)};function ii(e,r,s){var u=Sa(r);return r=nf(r),ft({user:e,credential:u,additionalUserInfo:r,operationType:s})}function Wd(e,r){return pt(e,r),e.reload().then(function(){return e})}t.Cb=function(e){var r=this;return ve(this,this.I().then(function(s){return r.a.Cb(s,e)}).then(function(s){return pt(r,s),r.reload()}))},t.ed=function(e){var r=this;return ve(this,this.I().then(function(s){return e.b(r.a,s)}).then(function(s){return pt(r,s),r.reload()}))},t.Db=function(e){var r=this;return ve(this,this.I().then(function(s){return r.a.Db(s,e)}).then(function(s){return pt(r,s),r.reload()}))},t.Eb=function(e){if(e.displayName===void 0&&e.photoURL===void 0)return xu(this);var r=this;return ve(this,this.I().then(function(s){return r.a.Eb(s,{displayName:e.displayName,photoUrl:e.photoURL})}).then(function(s){return pt(r,s),Vt(r,"displayName",s.displayName||null),Vt(r,"photoURL",s.photoUrl||null),ie(r.providerData,function(u){u.providerId==="password"&&(R(u,"displayName",r.displayName),R(u,"photoURL",r.photoURL))}),_n(r)}).then(Ud))},t.cd=function(e){var r=this;return ve(this,Fu(this).then(function(s){return Et(Lu(r),e)?Yy(r.a,s,[e]).then(function(u){var c={};return ie(u.providerUserInfo||[],function(d){c[d.providerId]=!0}),ie(Lu(r),function(d){c[d]||Vd(r,d)}),c[St.PROVIDER_ID]||R(r,"phoneNumber",null),_n(r)}):_n(r).then(function(){throw new b("no-such-provider")})}))},t.delete=function(){var e=this;return ve(this,this.I().then(function(r){return H(e.a,Zy,{idToken:r})}).then(function(){e.dispatchEvent(new er("userDeleted"))})).then(function(){for(var r=0;r<e.N.length;r++)e.N[r].cancel("app-deleted");Nu(e,null),ku(e,null),Ru(e,null),e.N=[],e.J=!0,Pu(e),R(e,"refreshToken",null),e.b&&pu(e.b,e)})},t.Gb=function(e,r){return!!(e=="linkViaPopup"&&(this.g||null)==r&&this.f||e=="reauthViaPopup"&&(this.g||null)==r&&this.f||e=="linkViaRedirect"&&(this.ga||null)==r||e=="reauthViaRedirect"&&(this.ga||null)==r)},t.na=function(e,r,s,u){e!="linkViaPopup"&&e!="reauthViaPopup"||u!=(this.g||null)||(s&&this.C?this.C(s):r&&!s&&this.f&&this.f(r),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(e,r){return e=="linkViaPopup"&&r==(this.g||null)?D(this.Lb,this):e=="reauthViaPopup"&&r==(this.g||null)?D(this.Mb,this):e=="linkViaRedirect"&&(this.ga||null)==r?D(this.Lb,this):e=="reauthViaRedirect"&&(this.ga||null)==r?D(this.Mb,this):null},t.Ec=function(e){var r=this;return Bd(this,"linkViaPopup",e,function(){return Do(r,e.providerId).then(function(){return _n(r)})},!1)},t.Nc=function(e){return Bd(this,"reauthViaPopup",e,function(){return O()},!0)};function Bd(e,r,s,u,c){if(!un())return te(new b("operation-not-supported-in-this-environment"));if(e.i&&!c)return te(e.i);var d=_a(s.providerId),v=ln(e.uid+":::"),y=null;(!xr()||na())&&e.s&&s.isOAuthProvider&&(y=$r(e.s,e.l,e.m,r,s,null,v,x.SDK_VERSION||null,null,null,e.tenantId,e.u));var I=Rh(y,d&&d.va,d&&d.ua);return u=u().then(function(){if(Gd(e),!c)return e.I().then(function(){})}).then(function(){return Ed(e.b,I,r,s,v,!!y,e.tenantId)}).then(function(){return new B(function(T,M){e.na(r,null,new b("cancelled-popup-request"),e.g||null),e.f=T,e.C=M,e.g=v,e.c=Td(e.b,e,r,I,v)})}).then(function(T){return I&&an(I),T?ft(T):null}).o(function(T){throw I&&an(I),T}),ve(e,u,c)}t.Fc=function(e){var r=this;return Hd(this,"linkViaRedirect",e,function(){return Do(r,e.providerId)},!1)},t.Oc=function(e){return Hd(this,"reauthViaRedirect",e,function(){return O()},!0)};function Hd(e,r,s,u,c){if(!un())return te(new b("operation-not-supported-in-this-environment"));if(e.i&&!c)return te(e.i);var d=null,v=ln(e.uid+":::");return u=u().then(function(){if(Gd(e),!c)return e.I().then(function(){})}).then(function(){return e.ga=v,_n(e)}).then(function(y){return e.ha&&(y=e.ha,y=y.b.set(ju,e.w(),y.a)),y}).then(function(){return Id(e.b,r,s,v,e.tenantId)}).o(function(y){if(d=y,e.ha)return zd(e.ha);throw d}).then(function(){if(d)throw d}),ve(e,u,c)}function Gd(e){if(!e.b||!e.P)throw e.b&&!e.P?new b("internal-error"):new b("auth-domain-config-required")}t.Lb=function(e,r,s,u){var c=this;this.c&&(this.c.cancel(),this.c=null);var d=null;return s=this.I().then(function(v){return za(c.a,{requestUri:e,postBody:u,sessionId:r,idToken:v})}).then(function(v){return d=ii(c,v,"link"),Wd(c,v)}).then(function(){return d}),ve(this,s)},t.Mb=function(e,r,s,u){var c=this;this.c&&(this.c.cancel(),this.c=null);var d=null,v=O().then(function(){return Yn(Ka(c.a,{requestUri:e,sessionId:r,postBody:u,tenantId:s}),c.uid)}).then(function(y){return d=ii(c,y,"reauthenticate"),pt(c,y),c.i=null,c.reload()}).then(function(){return d});return ve(this,v,!0)},t.vb=function(e){var r=this,s=null;return ve(this,this.I().then(function(u){return s=u,typeof e=="undefined"||en(e)?{}:Zi(new Ji(e))}).then(function(u){return r.a.vb(s,u)}).then(function(u){if(r.email!=u)return r.reload()}).then(function(){}))},t.Fb=function(e,r){var s=this,u=null;return ve(this,this.I().then(function(c){return u=c,typeof r=="undefined"||en(r)?{}:Zi(new Ji(r))}).then(function(c){return s.a.Fb(u,e,c)}).then(function(c){if(s.email!=c)return s.reload()}).then(function(){}))};function ve(e,r,s){var u=Cw(e,r,s);return e.N.push(u),u.oa(function(){Li(e.N,u)}),u.o(function(c){var d=null;throw c&&c.code==="auth/multi-factor-auth-required"&&(d=Pd(c.w(),Ou(e),D(e.jc,e))),d||c})}t.jc=function(e){var r=null,s=this;return e=Yn(O(e),s.uid).then(function(u){return r=ii(s,u,"reauthenticate"),pt(s,u),s.i=null,s.reload()}).then(function(){return r}),ve(this,e,!0)};function Cw(e,r,s){return e.i&&!s?(r.cancel(),te(e.i)):r.o(function(u){throw!u||u.code!="auth/user-disabled"&&u.code!="auth/user-token-expired"||(e.i||e.dispatchEvent(new er("userInvalidated")),e.i=u),u})}t.toJSON=function(){return this.w()},t.w=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&Ne(e,this.metadata.w()),ie(this.providerData,function(r){e.providerData.push($g(r))}),Ne(e,this.S.w()),e};function qd(e){if(!e.apiKey)return null;var r={apiKey:e.apiKey,authDomain:e.authDomain,appName:e.appName,emulatorConfig:e.emulatorConfig},s={};if(e.stsTokenManager&&e.stsTokenManager.accessToken){s[nt]=e.stsTokenManager.accessToken,s.refreshToken=e.stsTokenManager.refreshToken||null;var u=e.stsTokenManager.expirationTime;u&&(s.expiresIn=(u-Date.now())/1e3)}else return null;var c=new je(r,s,e);return e.providerData&&ie(e.providerData,function(d){d&&Mu(c,ft(d))}),e.redirectEventId&&(c.ga=e.redirectEventId),c}function Aw(e,r,s,u){var c=new je(e,r);return s&&(c.ha=s),u&&ni(c,u),c.reload().then(function(){return c})}function Nw(e,r,s,u){var c=e.h,d={};return d[nt]=c.b&&c.b.toString(),d.refreshToken=c.a,r=new je(r||{apiKey:e.l,authDomain:e.s,appName:e.m},d),s&&(r.ha=s),u&&ni(r,u),Po(r,e),r}function kw(e){this.a=e,this.b=ti()}var ju={name:"redirectUser",F:"session"};function zd(e){return Zn(e.b,ju,e.a)}function Rw(e,r){return e.b.get(ju,e.a).then(function(s){return s&&r&&(s.authDomain=r),qd(s||{})})}function Uu(e){this.a=e,this.b=ti(),this.c=null,this.f=Ow(this),this.b.addListener(vt("local"),this.a,D(this.g,this))}Uu.prototype.g=function(){var e=this,r=vt("local");tr(this,function(){return O().then(function(){return e.c&&e.c.F!="local"?e.b.get(r,e.a):null}).then(function(s){if(s)return Vu(e,"local").then(function(){e.c=r})})})};function Vu(e,r){var s=[],u;for(u in $n)$n[u]!==r&&s.push(Zn(e.b,vt($n[u]),e.a));return s.push(Zn(e.b,Wu,e.a)),wg(s)}function Ow(e){var r=vt("local"),s=vt("session"),u=vt("none");return z_(e.b,r,e.a).then(function(){return e.b.get(s,e.a)}).then(function(c){return c?s:e.b.get(u,e.a).then(function(d){return d?u:e.b.get(r,e.a).then(function(v){return v?r:e.b.get(Wu,e.a).then(function(y){return y?vt(y):r})})})}).then(function(c){return e.c=c,Vu(e,c.F)}).o(function(){e.c||(e.c=r)})}var Wu={name:"persistence",F:"session"};function vt(e){return{name:"authUser",F:e}}Uu.prototype.yb=function(e){var r=null,s=this;return q_(e),tr(this,function(){return e!=s.c.F?s.b.get(s.c,s.a).then(function(u){return r=u,Vu(s,e)}).then(function(){if(s.c=vt(e),r)return s.b.set(s.c,r,s.a)}):O()})};function Pw(e){return tr(e,function(){return e.b.set(Wu,e.c.F,e.a)})}function Kd(e,r){return tr(e,function(){return e.b.set(e.c,r.w(),e.a)})}function Yd(e){return tr(e,function(){return Zn(e.b,e.c,e.a)})}function Qd(e,r,s){return tr(e,function(){return e.b.get(e.c,e.a).then(function(u){return u&&r&&(u.authDomain=r),u&&s&&(u.emulatorConfig=s),qd(u||{})})})}function tr(e,r){return e.f=e.f.then(r,r),e.f}function rt(e){if(this.l=!1,R(this,"settings",new kd),R(this,"app",e),X(this).options&&X(this).options.apiKey)e=x.SDK_VERSION?Gn(x.SDK_VERSION):null,this.a=new tt(X(this).options&&X(this).options.apiKey,Ir(Tr),e);else throw new b("invalid-api-key");this.P=[],this.s=[],this.N=[],this.Pa=x.INTERNAL.createSubscribe(D(this.zc,this)),this.W=void 0,this.ib=x.INTERNAL.createSubscribe(D(this.Ac,this)),nr(this,null),this.i=new Uu(X(this).options.apiKey+":"+X(this).name),this.D=new kw(X(this).options.apiKey+":"+X(this).name),this.$=le(this,jw(this)),this.h=le(this,Uw(this)),this.ba=!1,this.ja=D(this.Zc,this),this.Ba=D(this.da,this),this.qa=D(this.mc,this),this.za=D(this.wc,this),this.Aa=D(this.xc,this),this.b=null,Lw(this),this.INTERNAL={},this.INTERNAL.delete=D(this.delete,this),this.INTERNAL.logFramework=D(this.Gc,this),this.u=0,Te.call(this),xw(this),this.J=[],this.R=null}j(rt,Te);function Xd(e){Re.call(this,"languageCodeChanged"),this.h=e}j(Xd,Re);function $d(e){Re.call(this,"emulatorConfigChanged"),this.c=e}j($d,Re);function Jd(e){Re.call(this,"frameworkChanged"),this.f=e}j(Jd,Re),t=rt.prototype,t.yb=function(e){return e=this.i.yb(e),le(this,e)},t.xa=function(e){this.aa===e||this.l||(this.aa=e,Pf(this.a,this.aa),this.dispatchEvent(new Xd(this.la())))},t.la=function(){return this.aa},t.fd=function(){var e=f.navigator;this.xa(e&&(e.languages&&e.languages[0]||e.language||e.userLanguage)||null)},t.gd=function(e,r){if(!this.R){if(!/^https?:\/\//.test(e))throw new b("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");r=r?!!r.disableWarnings:!1,Dw(r),this.R={url:e,ec:r},this.settings.jb=!0,_o(this.a,this.R),this.dispatchEvent(new $d(this.R))}};function Dw(e){typeof console!="undefined"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),f.document&&!e&&Qi().then(function(){var r=f.document.createElement("div");r.innerText="Running in emulator mode. Do not use with production credentials.",r.style.position="fixed",r.style.width="100%",r.style.backgroundColor="#ffffff",r.style.border=".1em solid #000000",r.style.color="#b50000",r.style.bottom="0px",r.style.left="0px",r.style.margin="0px",r.style.zIndex=1e4,r.style.textAlign="center",r.classList.add("firebase-emulator-warning"),f.document.body.appendChild(r)})}t.Gc=function(e){this.J.push(e),Df(this.a,x.SDK_VERSION?Gn(x.SDK_VERSION,this.J):null),this.dispatchEvent(new Jd(this.J))},t.Ga=function(){return Zt(this.J)},t.zb=function(e){this.S===e||this.l||(this.S=e,this.a.b=this.S)},t.T=function(){return this.S};function xw(e){Object.defineProperty(e,"lc",{get:function(){return this.la()},set:function(r){this.xa(r)},enumerable:!1}),e.aa=null,Object.defineProperty(e,"ti",{get:function(){return this.T()},set:function(r){this.zb(r)},enumerable:!1}),e.S=null,Object.defineProperty(e,"emulatorConfig",{get:function(){if(this.R){var r=Oe(this.R.url);r=ft({protocol:r.c,host:r.a,port:r.g,options:ft({disableWarnings:this.R.ec})})}else r=null;return r},enumerable:!1})}t.toJSON=function(){return{apiKey:X(this).options.apiKey,authDomain:X(this).options.authDomain,appName:X(this).name,currentUser:U(this)&&U(this).w()}};function Bu(e){return e.Oa||te(new b("auth-domain-config-required"))}function Lw(e){var r=X(e).options.authDomain,s=X(e).options.apiKey;r&&un()&&(e.Oa=e.$.then(function(){if(!e.l){if(e.b=gu(r,s,X(e).name,e.R),Ao(e.b,e),U(e)&&ri(U(e)),e.m){ri(e.m);var u=e.m;u.xa(e.la()),Nu(u,e),u=e.m,ni(u,e.J),Ru(u,e),u=e.m,Au(u,e.R),ku(u,e),e.m=null}return e.b}}))}t.Gb=function(e,r){switch(e){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==r&&!!this.f;default:return!1}},t.na=function(e,r,s,u){e=="signInViaPopup"&&this.g==u&&(s&&this.C?this.C(s):r&&!s&&this.f&&this.f(r),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(e,r){return e=="signInViaRedirect"||e=="signInViaPopup"&&this.g==r&&this.f?D(this.ic,this):null},t.ic=function(e,r,s,u){var c=this,d={requestUri:e,postBody:u,sessionId:r,tenantId:s};return this.c&&(this.c.cancel(),this.c=null),c.$.then(function(){return wn(c,qa(c.a,d))})},t.Xc=function(e){if(!un())return te(new b("operation-not-supported-in-this-environment"));var r=this,s=_a(e.providerId),u=ln(),c=null;(!xr()||na())&&X(this).options.authDomain&&e.isOAuthProvider&&(c=$r(X(this).options.authDomain,X(this).options.apiKey,X(this).name,"signInViaPopup",e,null,u,x.SDK_VERSION||null,null,null,this.T(),this.R));var d=Rh(c,s&&s.va,s&&s.ua);return s=Bu(this).then(function(v){return Ed(v,d,"signInViaPopup",e,u,!!c,r.T())}).then(function(){return new B(function(v,y){r.na("signInViaPopup",null,new b("cancelled-popup-request"),r.g),r.f=v,r.C=y,r.g=u,r.c=Td(r.b,r,"signInViaPopup",d,u)})}).then(function(v){return d&&an(d),v?ft(v):null}).o(function(v){throw d&&an(d),v}),le(this,s)},t.Yc=function(e){if(!un())return te(new b("operation-not-supported-in-this-environment"));var r=this,s=Bu(this).then(function(){return Pw(r.i)}).then(function(){return Id(r.b,"signInViaRedirect",e,void 0,r.T())});return le(this,s)};function Zd(e){if(!un())return te(new b("operation-not-supported-in-this-environment"));var r=Bu(e).then(function(){return e.b.ra()}).then(function(s){return s?ft(s):null});return le(e,r)}t.ra=function(){var e=this;return Zd(this).then(function(r){return e.b&&ko(e.b.b),r}).o(function(r){throw e.b&&ko(e.b.b),r})},t.dd=function(e){if(!e)return te(new b("null-user"));if(this.S!=e.tenantId)return te(new b("tenant-id-mismatch"));var r=this,s={};s.apiKey=X(this).options.apiKey,s.authDomain=X(this).options.authDomain,s.appName=X(this).name;var u=Nw(e,s,r.D,r.Ga());return le(this,this.h.then(function(){if(X(r).options.apiKey!=e.l)return u.reload()}).then(function(){return U(r)&&e.uid==U(r).uid?(Po(U(r),e),r.da(e)):(nr(r,u),ri(u),r.da(u))}).then(function(){oi(r)}))};function Mw(e,r){var s={};return s.apiKey=X(e).options.apiKey,s.authDomain=X(e).options.authDomain,s.appName=X(e).name,e.R&&(s.emulatorConfig=e.R),e.$.then(function(){return Aw(s,r,e.D,e.Ga())}).then(function(u){return U(e)&&u.uid==U(e).uid?(Po(U(e),u),e.da(u)):(nr(e,u),ri(u),e.da(u))}).then(function(){oi(e)})}function nr(e,r){U(e)&&(Iw(U(e),e.Ba),Me(U(e),"tokenChanged",e.qa),Me(U(e),"userDeleted",e.za),Me(U(e),"userInvalidated",e.Aa),Pu(U(e))),r&&(r.W.push(e.Ba),He(r,"tokenChanged",e.qa),He(r,"userDeleted",e.za),He(r,"userInvalidated",e.Aa),0<e.u&&Fd(r)),R(e,"currentUser",r),r&&(r.xa(e.la()),Nu(r,e),ni(r,e.J),Ru(r,e),Au(r,e.R),ku(r,e))}t.Bb=function(){var e=this,r=this.h.then(function(){return e.b&&ko(e.b.b),U(e)?(nr(e,null),Yd(e.i).then(function(){oi(e)})):O()});return le(this,r)};function Fw(e){var r=Rw(e.D,X(e).options.authDomain).then(function(s){return(e.m=s)&&(s.ha=e.D),zd(e.D)});return le(e,r)}function jw(e){var r=X(e).options.authDomain,s=Fw(e).then(function(){return Qd(e.i,r,e.R)}).then(function(u){return u?(u.ha=e.D,e.m&&(e.m.ga||null)==(u.ga||null)?u:u.reload().then(function(){return Kd(e.i,u).then(function(){return u})}).o(function(c){return c.code=="auth/network-request-failed"?u:Yd(e.i)})):null}).then(function(u){nr(e,u||null)});return le(e,s)}function Uw(e){return e.$.then(function(){return Zd(e)}).o(function(){}).then(function(){if(!e.l)return e.ja()}).o(function(){}).then(function(){if(!e.l){e.ba=!0;var r=e.i;r.b.addListener(vt("local"),r.a,e.ja)}})}t.Zc=function(){var e=this;return Qd(this.i,X(this).options.authDomain).then(function(r){if(!e.l){var s;if(s=U(e)&&r){s=U(e).uid;var u=r.uid;s=s==null||s===""||u===void 0||u===null||u===""?!1:s==u}if(s)return Po(U(e),r),U(e).I();(U(e)||r)&&(nr(e,r),r&&(ri(r),r.ha=e.D),e.b&&Ao(e.b,e),oi(e))}})},t.da=function(e){return Kd(this.i,e)},t.mc=function(){oi(this),this.da(U(this))},t.wc=function(){this.Bb()},t.xc=function(){this.Bb()};function wn(e,r){var s=null,u=null;return le(e,r.then(function(c){return s=Sa(c),u=nf(c),Mw(e,c)},function(c){var d=null;throw c&&c.code==="auth/multi-factor-auth-required"&&(d=Pd(c.w(),e,D(e.kc,e))),d||c}).then(function(){return ft({user:U(e),credential:s,additionalUserInfo:u,operationType:"signIn"})}))}t.kc=function(e){var r=this;return this.h.then(function(){return wn(r,O(e))})},t.zc=function(e){var r=this;this.addAuthTokenListener(function(){e.next(U(r))})},t.Ac=function(e){var r=this;Vw(this,function(){e.next(U(r))})},t.Ic=function(e,r,s){var u=this;return this.ba&&Promise.resolve().then(function(){typeof e=="function"?e(U(u)):typeof e.next=="function"&&e.next(U(u))}),this.Pa(e,r,s)},t.Hc=function(e,r,s){var u=this;return this.ba&&Promise.resolve().then(function(){u.W=u.getUid(),typeof e=="function"?e(U(u)):typeof e.next=="function"&&e.next(U(u))}),this.ib(e,r,s)},t.nc=function(e){var r=this,s=this.h.then(function(){return U(r)?U(r).I(e).then(function(u){return{accessToken:u}}):null});return le(this,s)},t.Tc=function(e){var r=this;return this.h.then(function(){return wn(r,H(r.a,w_,{token:e}))}).then(function(s){var u=s.user;return Vt(u,"isAnonymous",!1),r.da(u),s})},t.Uc=function(e,r){var s=this;return this.h.then(function(){return wn(s,H(s.a,Bf,{email:e,password:r}))})},t.dc=function(e,r){var s=this;return this.h.then(function(){return wn(s,H(s.a,$y,{email:e,password:r}))})},t.ab=function(e){var r=this;return this.h.then(function(){return wn(r,e.ka(r.a))})},t.Sc=function(e){return sa("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(e)},t.Ab=function(){var e=this;return this.h.then(function(){var r=U(e);if(r&&r.isAnonymous){var s=ft({providerId:null,isNewUser:!1});return ft({user:r,credential:null,additionalUserInfo:s,operationType:"signIn"})}return wn(e,e.a.Ab()).then(function(u){var c=u.user;return Vt(c,"isAnonymous",!0),e.da(c),u})})};function X(e){return e.app}function U(e){return e.currentUser}t.getUid=function(){return U(this)&&U(this).uid||null};function xo(e){return U(e)&&U(e)._lat||null}function oi(e){if(e.ba){for(var r=0;r<e.s.length;r++)e.s[r]&&e.s[r](xo(e));if(e.W!==e.getUid()&&e.N.length)for(e.W=e.getUid(),r=0;r<e.N.length;r++)e.N[r]&&e.N[r](xo(e))}}t.cc=function(e){this.addAuthTokenListener(e),this.u++,0<this.u&&U(this)&&Fd(U(this))},t.Pc=function(e){var r=this;ie(this.s,function(s){s==e&&r.u--}),0>this.u&&(this.u=0),this.u==0&&U(this)&&Pu(U(this)),this.removeAuthTokenListener(e)},t.addAuthTokenListener=function(e){var r=this;this.s.push(e),le(this,this.h.then(function(){r.l||Et(r.s,e)&&e(xo(r))}))},t.removeAuthTokenListener=function(e){$e(this.s,function(r){return r==e})};function Vw(e,r){e.N.push(r),le(e,e.h.then(function(){!e.l&&Et(e.N,r)&&e.W!==e.getUid()&&(e.W=e.getUid(),r(xo(e)))}))}t.delete=function(){this.l=!0;for(var e=0;e<this.P.length;e++)this.P[e].cancel("app-deleted");return this.P=[],this.i&&(e=this.i,e.b.removeListener(vt("local"),e.a,this.ja)),this.b&&(pu(this.b,this),ko(this.b.b)),Promise.resolve()};function le(e,r){return e.P.push(r),r.oa(function(){Li(e.P,r)}),r}t.hc=function(e){return le(this,By(this.a,e))},t.Bc=function(e){return!!Ta(e)},t.xb=function(e,r){var s=this;return le(this,O().then(function(){var u=new Ji(r);if(!u.c)throw new b("argument-error",ga+" must be true when sending sign in link to email");return Zi(u)}).then(function(u){return s.a.xb(e,u)}).then(function(){}))},t.jd=function(e){return this.Sa(e).then(function(r){return r.data.email})},t.ob=function(e,r){return le(this,this.a.ob(e,r).then(function(){}))},t.Sa=function(e){return le(this,this.a.Sa(e).then(function(r){return new Zg(r)}))},t.kb=function(e){return le(this,this.a.kb(e).then(function(){}))},t.wb=function(e,r){var s=this;return le(this,O().then(function(){return typeof r=="undefined"||en(r)?{}:Zi(new Ji(r))}).then(function(u){return s.a.wb(e,u)}).then(function(){}))},t.Wc=function(e,r){return le(this,_u(this,e,r,D(this.ab,this)))},t.Vc=function(e,r){var s=this;return le(this,O().then(function(){var u=r||Dr(),c=vf(e,u);if(u=Ta(u),!u)throw new b("argument-error","Invalid email link!");if(u.tenantId!==s.T())throw new b("tenant-id-mismatch");return s.ab(c)}))};function si(){}si.prototype.render=function(){},si.prototype.reset=function(){},si.prototype.getResponse=function(){},si.prototype.execute=function(){};function rr(){this.a={},this.b=1e12}var Hu=null;rr.prototype.render=function(e,r){return this.a[this.b.toString()]=new Lo(e,r),this.b++},rr.prototype.reset=function(e){var r=Gu(this,e);e=ep(e),r&&e&&(r.delete(),delete this.a[e])},rr.prototype.getResponse=function(e){return(e=Gu(this,e))?e.getResponse():null},rr.prototype.execute=function(e){(e=Gu(this,e))&&e.execute()};function Gu(e,r){return(r=ep(r))&&e.a[r]||null}function ep(e){return(e=typeof e=="undefined"?1e12:e)?e.toString():null}function Lo(e,r){this.g=!1,this.c=r,this.a=this.b=null,this.h=this.c.size!=="invisible",this.f=Cr(e);var s=this;this.i=function(){s.execute()},this.h?this.execute():He(this.f,"click",this.i)}Lo.prototype.getResponse=function(){return qu(this),this.b},Lo.prototype.execute=function(){qu(this);var e=this;this.a||(this.a=setTimeout(function(){e.b=Kg();var r=e.c.callback,s=e.c["expired-callback"];if(r)try{r(e.b)}catch{}e.a=setTimeout(function(){if(e.a=null,e.b=null,s)try{s()}catch{}e.h&&e.execute()},6e4)},500))},Lo.prototype.delete=function(){qu(this),this.g=!0,clearTimeout(this.a),this.a=null,Me(this.f,"click",this.i)};function qu(e){if(e.g)throw Error("reCAPTCHA mock was already deleted!")}function zu(){}R(zu,"FACTOR_ID","phone");function Ku(){}Ku.prototype.g=function(){return Hu||(Hu=new rr),O(Hu)},Ku.prototype.c=function(){};var Yu=null;function Qu(){this.b=f.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Ww=new lt(Mi,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Bw=new Ft(3e4,6e4);Qu.prototype.g=function(e){var r=this;return new B(function(s,u){var c=setTimeout(function(){u(new b("network-request-failed"))},Bw.get());if(!f.grecaptcha||e!==r.f&&!r.b){f[r.a]=function(){if(f.grecaptcha){r.f=e;var v=f.grecaptcha.render;f.grecaptcha.render=function(y,I){return y=v(y,I),r.b++,y},clearTimeout(c),s(f.grecaptcha)}else clearTimeout(c),u(new b("internal-error"));delete f[r.a]};var d=Rs(Ww,{onload:r.a,hl:e||""});O(ja(d)).o(function(){clearTimeout(c),u(new b("internal-error","Unable to load external reCAPTCHA dependencies!"))})}else clearTimeout(c),s(f.grecaptcha)})},Qu.prototype.c=function(){this.b--};var Xu=null;function $u(e,r,s,u,c,d,v){if(R(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=r,this.g=null,v?(Yu||(Yu=new Ku),v=Yu):(Xu||(Xu=new Qu),v=Xu),this.m=v,this.a=s||{theme:"light",type:"image"},this.h=[],this.a[rp])throw new b("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i=this.a[Hw]==="invisible",!f.document)throw new b("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!Cr(r)||!this.i&&Cr(r).hasChildNodes())throw new b("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new tt(e,d||null,c||null),this.u=u||function(){return null};var y=this;this.l=[];var I=this.a[tp];this.a[tp]=function(M){if(ip(y,M),typeof I=="function")I(M);else if(typeof I=="string"){var Q=ne(I,f);typeof Q=="function"&&Q(M)}};var T=this.a[np];this.a[np]=function(){if(ip(y,null),typeof T=="function")T();else if(typeof T=="string"){var M=ne(T,f);typeof M=="function"&&M()}}}var tp="callback",np="expired-callback",rp="sitekey",Hw="size";function ip(e,r){for(var s=0;s<e.l.length;s++)try{e.l[s](r)}catch{}}function Gw(e,r){$e(e.l,function(s){return s==r})}function Ju(e,r){return e.h.push(r),r.oa(function(){Li(e.h,r)}),r}t=$u.prototype,t.Ia=function(){var e=this;return this.f?this.f:this.f=Ju(this,O().then(function(){if(Xi()&&!Ze())return Qi();throw new b("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return e.m.g(e.u())}).then(function(r){return e.g=r,H(e.s,h_,{})}).then(function(r){e.a[rp]=r.recaptchaSiteKey}).o(function(r){throw e.f=null,r}))},t.render=function(){Mo(this);var e=this;return Ju(this,this.Ia().then(function(){if(e.c===null){var r=e.v;if(!e.i){var s=Cr(r);r=mg("DIV"),s.appendChild(r)}e.c=e.g.render(r,e.a)}return e.c}))},t.verify=function(){Mo(this);var e=this;return Ju(this,this.render().then(function(r){return new B(function(s){var u=e.g.getResponse(r);if(u)s(u);else{var c=function(d){d&&(Gw(e,c),s(d))};e.l.push(c),e.i&&e.g.execute(e.c)}})}))},t.reset=function(){Mo(this),this.c!==null&&this.g.reset(this.c)};function Mo(e){if(e.J)throw new b("internal-error","RecaptchaVerifier instance has been destroyed.")}t.clear=function(){Mo(this),this.J=!0,this.m.c();for(var e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){e=Cr(this.v);for(var r;r=e.firstChild;)e.removeChild(r)}};function Zu(e,r,s){var u=!1;try{this.b=s||x.app()}catch{throw new b("argument-error","No firebase.app.App instance is currently initialized.")}if(this.b.options&&this.b.options.apiKey)s=this.b.options.apiKey;else throw new b("invalid-api-key");var c=this,d=null;try{d=this.b.auth().Ga()}catch{}try{u=this.b.auth().settings.appVerificationDisabledForTesting}catch{}d=x.SDK_VERSION?Gn(x.SDK_VERSION,d):null,$u.call(this,s,e,r,function(){try{var v=c.b.auth().la()}catch{v=null}return v},d,Ir(Tr),u)}j(Zu,$u);function op(e,r,s,u){e:{s=Array.prototype.slice.call(s);for(var c=0,d=!1,v=0;v<r.length;v++)if(r[v].optional)d=!0;else{if(d)throw new b("internal-error","Argument validator encountered a required argument after an optional argument.");c++}if(d=r.length,s.length<c||d<s.length)u="Expected "+(c==d?c==1?"1 argument":c+" arguments":c+"-"+d+" arguments")+" but got "+s.length+".";else{for(c=0;c<s.length;c++)if(d=r[c].optional&&s[c]===void 0,!r[c].M(s[c])&&!d){if(r=r[c],0>c||c>=sp.length)throw new b("internal-error","Argument validator received an unsupported number of arguments.");s=sp[c],u=(u?"":s+" argument ")+(r.name?'"'+r.name+'" ':"")+"must be "+r.K+".";break e}u=null}}if(u)throw new b("argument-error",e+" failed: "+u)}var sp="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function k(e,r){return{name:e||"",K:"a valid string",optional:!!r,M:function(s){return typeof s=="string"}}}function el(e,r){return{name:e||"",K:"a boolean",optional:!!r,M:function(s){return typeof s=="boolean"}}}function de(e,r){return{name:e||"",K:"a valid object",optional:!!r,M:C}}function ir(e,r){return{name:e||"",K:"a function",optional:!!r,M:function(s){return typeof s=="function"}}}function mt(e,r){return{name:e||"",K:"null",optional:!!r,M:function(s){return s===null}}}function qw(){return{name:"",K:"an HTML element",optional:!1,M:function(e){return!!(e&&e instanceof Element)}}}function zw(){return{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(e){return!!(e&&e instanceof rt)}}}function Kw(){return{name:"app",K:"an instance of Firebase App",optional:!0,M:function(e){return!!(e&&e instanceof x.app.App)}}}function Wt(e){return{name:e?e+"Credential":"credential",K:e?"a valid "+e+" credential":"a valid credential",optional:!1,M:function(r){if(!r)return!1;var s=!e||r.providerId===e;return!(!r.ka||!s)}}}function ap(){return{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(e){return e?!!e.tb:!1}}}function or(){return{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}}function tl(e,r){return C(e)&&typeof e.type=="string"&&e.type===r&&typeof e.Ha=="function"}function up(e){return C(e)&&typeof e.uid=="string"}function Fo(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!(!e||typeof e.type!="string"||typeof e.verify!="function")}}}function he(e,r,s,u){return{name:s||"",K:e.K+" or "+r.K,optional:!!u,M:function(c){return e.M(c)||r.M(c)}}}function oe(e,r){for(var s in r){var u=r[s].name;e[u]=cp(u,e[s],r[s].j)}}function lp(e,r){for(var s in r){var u=r[s].name;u!==s&&Object.defineProperty(e,u,{get:Pt(function(c){return this[c]},s),set:Pt(function(c,d,v,y){op(c,[v],[y],!0),this[d]=y},u,s,r[s].lb),enumerable:!0})}}function fe(e,r,s,u){e[r]=cp(r,s,u)}function cp(e,r,s){function u(){var v=Array.prototype.slice.call(arguments);return op(c,s,v),r.apply(this,v)}if(!s)return r;var c=Yw(e),d;for(d in r)u[d]=r[d];for(d in r.prototype)u.prototype[d]=r.prototype[d];return u}function Yw(e){return e=e.split("."),e[e.length-1]}oe(rt.prototype,{kb:{name:"applyActionCode",j:[k("code")]},Sa:{name:"checkActionCode",j:[k("code")]},ob:{name:"confirmPasswordReset",j:[k("code"),k("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[k("email"),k("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[k("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[k("emailLink")]},Hc:{name:"onAuthStateChanged",j:[he(de(),ir(),"nextOrObserver"),ir("opt_error",!0),ir("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[he(de(),ir(),"nextOrObserver"),ir("opt_error",!0),ir("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[k("email"),he(de("opt_actionCodeSettings",!0),mt(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[k("email"),de("actionCodeSettings")]},yb:{name:"setPersistence",j:[k("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[Wt()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[Wt()]},Tc:{name:"signInWithCustomToken",j:[k("token")]},Uc:{name:"signInWithEmailAndPassword",j:[k("email"),k("password")]},Vc:{name:"signInWithEmailLink",j:[k("email"),k("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[k("phoneNumber"),Fo()]},Xc:{name:"signInWithPopup",j:[or()]},Yc:{name:"signInWithRedirect",j:[or()]},dd:{name:"updateCurrentUser",j:[he(function(e){return{name:"user",K:"an instance of Firebase User",optional:!!e,M:function(r){return!!(r&&r instanceof je)}}}(),mt(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[k(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[k("url"),de("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[k("code")]}}),lp(rt.prototype,{lc:{name:"languageCode",lb:he(k(),mt(),"languageCode")},ti:{name:"tenantId",lb:he(k(),mt(),"tenantId")}}),rt.Persistence=$n,rt.Persistence.LOCAL="local",rt.Persistence.SESSION="session",rt.Persistence.NONE="none",oe(je.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[el("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[el("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[Wt()]},rb:{name:"linkWithCredential",j:[Wt()]},Dc:{name:"linkWithPhoneNumber",j:[k("phoneNumber"),Fo()]},Ec:{name:"linkWithPopup",j:[or()]},Fc:{name:"linkWithRedirect",j:[or()]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Wt()]},ub:{name:"reauthenticateWithCredential",j:[Wt()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[k("phoneNumber"),Fo()]},Nc:{name:"reauthenticateWithPopup",j:[or()]},Oc:{name:"reauthenticateWithRedirect",j:[or()]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[he(de("opt_actionCodeSettings",!0),mt(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[k(null,!0)]},cd:{name:"unlink",j:[k("provider")]},Cb:{name:"updateEmail",j:[k("email")]},Db:{name:"updatePassword",j:[k("password")]},ed:{name:"updatePhoneNumber",j:[Wt("phone")]},Eb:{name:"updateProfile",j:[de("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[k("email"),he(de("opt_actionCodeSettings",!0),mt(null,!0),"opt_actionCodeSettings",!0)]}}),oe(rr.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),oe(si.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),oe(B.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),lp(kd.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:el("appVerificationDisabledForTesting")}}),oe(yu.prototype,{confirm:{name:"confirm",j:[k("verificationCode")]}}),fe(Kn,"fromJSON",function(e){e=typeof e=="string"?JSON.parse(e):e;for(var r,s=[gy,yy,_y,my],u=0;u<s.length;u++)if(r=s[u](e))return r;return null},[he(k(),de(),"json")]),fe(qe,"credential",function(e,r){return new jt(e,r)},[k("email"),k("password")]),oe(jt.prototype,{w:{name:"toJSON",j:[k(null,!0)]}}),oe(fn.prototype,{Ca:{name:"addScope",j:[k("scope")]},Ka:{name:"setCustomParameters",j:[de("customOAuthParameters")]}}),fe(fn,"credential",hf,[he(k(),de(),"token")]),fe(qe,"credentialWithLink",vf,[k("email"),k("emailLink")]),oe(dn.prototype,{Ca:{name:"addScope",j:[k("scope")]},Ka:{name:"setCustomParameters",j:[de("customOAuthParameters")]}}),fe(dn,"credential",ff,[he(k(),de(),"token")]),oe(pn.prototype,{Ca:{name:"addScope",j:[k("scope")]},Ka:{name:"setCustomParameters",j:[de("customOAuthParameters")]}}),fe(pn,"credential",df,[he(k(),he(de(),mt()),"idToken"),he(k(),mt(),"accessToken",!0)]),oe(Qn.prototype,{Ka:{name:"setCustomParameters",j:[de("customOAuthParameters")]}}),fe(Qn,"credential",pf,[he(k(),de(),"token"),k("secret",!0)]),oe(Fe.prototype,{Ca:{name:"addScope",j:[k("scope")]},credential:{name:"credential",j:[he(k(),he(de(),mt()),"optionsOrIdToken"),he(k(),mt(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[de("customOAuthParameters")]}}),oe(Tt.prototype,{w:{name:"toJSON",j:[k(null,!0)]}}),oe(cn.prototype,{w:{name:"toJSON",j:[k(null,!0)]}}),fe(St,"credential",mf,[k("verificationId"),k("verificationCode")]),oe(St.prototype,{gb:{name:"verifyPhoneNumber",j:[he(k(),function(e,r){return{name:e||"phoneInfoOptions",K:"valid phone info options",optional:!!r,M:function(s){return s?s.session&&s.phoneNumber?tl(s.session,Vr)&&typeof s.phoneNumber=="string":s.session&&s.multiFactorHint?tl(s.session,io)&&up(s.multiFactorHint):s.session&&s.multiFactorUid?tl(s.session,io)&&typeof s.multiFactorUid=="string":s.phoneNumber?typeof s.phoneNumber=="string":!1:!1}}}(),"phoneInfoOptions"),Fo()]}}),oe(Ut.prototype,{w:{name:"toJSON",j:[k(null,!0)]}}),oe(b.prototype,{toJSON:{name:"toJSON",j:[k(null,!0)]}}),oe(Br.prototype,{toJSON:{name:"toJSON",j:[k(null,!0)]}}),oe(Na.prototype,{toJSON:{name:"toJSON",j:[k(null,!0)]}}),oe(bu.prototype,{toJSON:{name:"toJSON",j:[k(null,!0)]}}),oe(wu.prototype,{Rc:{name:"resolveSignIn",j:[ap()]}}),oe(Iu.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[ap(),k("displayName",!0)]},bd:{name:"unenroll",j:[he({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:up},k(),"multiFactorInfoIdentifier")]}}),oe(Zu.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),fe(ma,"parseLink",zh,[k("link")]),fe(zu,"assertion",function(e){return new xd(e)},[Wt("phone")]),function(){if(typeof x!="undefined"&&x.INTERNAL&&x.INTERNAL.registerComponent){var e={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:$i,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:va,VERIFY_AND_CHANGE_EMAIL:jr,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:rt,AuthCredential:Kn,Error:b};fe(e,"EmailAuthProvider",qe,[]),fe(e,"FacebookAuthProvider",fn,[]),fe(e,"GithubAuthProvider",dn,[]),fe(e,"GoogleAuthProvider",pn,[]),fe(e,"TwitterAuthProvider",Qn,[]),fe(e,"OAuthProvider",Fe,[k("providerId")]),fe(e,"SAMLAuthProvider",cf,[k("providerId")]),fe(e,"PhoneAuthProvider",St,[zw()]),fe(e,"RecaptchaVerifier",Zu,[he(k(),qw(),"recaptchaContainer"),de("recaptchaParameters",!0),Kw()]),fe(e,"ActionCodeURL",ma,[]),fe(e,"PhoneMultiFactorGenerator",zu,[]),x.INTERNAL.registerComponent({name:"auth",instanceFactory:function(r){return r=r.getProvider("app").getImmediate(),new rt(r)},multipleInstances:!1,serviceProps:e,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(r){r.getProvider("auth-internal").initialize()}}),x.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(r){return r=r.getProvider("auth").getImmediate(),{getUid:D(r.getUid,r),getToken:D(r.nc,r),addAuthTokenListener:D(r.cc,r),removeAuthTokenListener:D(r.Pc,r)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),x.registerVersion("@firebase/auth","0.16.8"),x.INTERNAL.extendNamespace({User:je})}else throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.")}()}).apply(typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{});let sS={apiKey:"AIzaSyCKnFZNriZSl0qZyTB6AcPNGBj2wS-cJxc",authDomain:"borgesplace.firebaseapp.com",databaseURL:"https://borgesplace-default-rtdb.firebaseio.com",projectId:"borgesplace",storageBucket:"borgesplace.appspot.com",messagingSenderId:"1070315896460",appId:"1:1070315896460:web:70767e471c6b20cf9205a9",measurementId:"G-WDBN6K3G44"};x.initializeApp(sS);const ar=x.database(),ev=x.auth();class aS{getAllOrder(){return ar.ref("/orders")}createOrder(n){return ar.ref("/orders").push(n)}authSetPersistence(){return ev.setPersistence(x.auth.Auth.Persistence.SESSION)}auth(){return ev}checkAuth(){x.auth().onAuthStateChanged(n=>{n||window.location.replace("/admin/login")})}setAmount(n,i=""){return i.length?ar.ref(`/amounts/${i}`).update(n):ar.ref("/amounts").push(n)}updateOrder(n,i=""){return ar.ref(`/orders/${i}`).update(n)}getAllAmounts(){return ar.ref("/amounts")}}var uS=new aS;export{uS as d};
